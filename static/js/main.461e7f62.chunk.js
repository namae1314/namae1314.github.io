(this["webpackJsonp@liquity/dev-frontend"]=this["webpackJsonp@liquity/dev-frontend"]||[]).push([[0],{125:function(e,t,n){"use strict";var a,i=n(5),r=n(65),s=n(79),o=n(150),u=n(48),l=n(82),c=n(83),d=n(224),p=n(180),y=n(225),b=n(85),m=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._connect=t._connectByChainId=t._connectToDeployment=t.UnsupportedNetworkError=t._usingStore=t._requireFrontendAddress=t._requireAddress=t._getProvider=t._requireSigner=t._getBlockTimestamp=t._getContracts=void 0;var f=n(99),h=n(6),v=m(n(426)),j=m(n(427)),T=m(n(428)),x=m(n(429)),g=m(n(430)),O=m(n(431)),w=m(n(432)),_=n(181),S=n(283),k=n(453),D=v.default,L=b((y(a={},O.default.chainId,O.default),y(a,g.default.chainId,g.default),y(a,x.default.chainId,x.default),y(a,j.default.chainId,j.default),y(a,T.default.chainId,T.default),y(a,w.default.chainId,w.default),a),null!==D?y({},D.chainId,D):{}),E=function(e,t,n,a,i,r){var s=i.deploymentDate,o=i.totalStabilityPoolLQTYReward,u=i.liquidityMiningLQTYRewardRate,l=p(i,["deploymentDate","totalStabilityPoolLQTYReward","liquidityMiningLQTYRewardRate"]);if(r&&void 0!==r.useStore&&!M.includes(r.useStore))throw new Error("Invalid useStore value ".concat(r.useStore));return b(b({provider:e,signer:t,_contracts:n,_multicall:a,deploymentDate:new Date(s),totalStabilityPoolLQTYReward:h.Decimal.from(o),liquidityMiningLQTYRewardRate:h.Decimal.from(u)},l),r)};t._getContracts=function(e){return e._contracts};var A=function(e){return e._multicall},C=function(e){return e.timestamp};t._getBlockTimestamp=function(e){var n,a,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"latest";return null!==(a=null===(n=A(e))||void 0===n?void 0:n.getCurrentBlockTimestamp({blockTag:i}).then(_.numberify))&&void 0!==a?a:t._getProvider(e).getBlock(i).then(C)};t._requireSigner=function(e){var t;return null!==(t=e.signer)&&void 0!==t?t:_.panic(new Error("Must be connected through a Signer"))};t._getProvider=function(e){return e.provider};t._requireAddress=function(e,t){var n,a;return null!==(a=null!==(n=null===t||void 0===t?void 0:t.from)&&void 0!==n?n:e.userAddress)&&void 0!==a?a:_.panic(new Error("A user address is required"))};t._requireFrontendAddress=function(e){var t;return null!==(t=e.frontendTag)&&void 0!==t?t:_.panic(new Error("A frontend address is required"))};t._usingStore=function(e){return void 0!==e.useStore};var I=function(e){l(n,e);var t=c(n);function n(e){var a;return u(this,n),(a=t.call(this,"Unsupported network (chainId = ".concat(e,")"))).name="UnsupportedNetworkError",a.chainId=e,a}return n}(d(Error));t.UnsupportedNetworkError=I;var R=function(e){var t;return[f.Signer.isSigner(e)?null!==(t=e.provider)&&void 0!==t?t:_.panic(new Error("Signer must have a Provider")):e,f.Signer.isSigner(e)?e:void 0]};t._connectToDeployment=function(e,t,n){return E.apply(void 0,o(R(t)).concat([S._connectToContracts(t,e),void 0,e,n]))};var M=["blockPolled"];function P(e,t,n,a){var i,r=null!==(i=L[n])&&void 0!==i?i:_.panic(new I(n));return E(e,t,S._connectToContracts(null!==t&&void 0!==t?t:e,r),k._connectToMulticall(null!==t&&void 0!==t?t:e,n),r,a)}t._connectByChainId=P;var B=function(){var e=s(i.mark((function e(t,n){var a,s,o,u;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=R(t),s=r(a,2),o=s[0],!(u=s[1])){e.next=12;break}if(void 0===(null===n||void 0===n?void 0:n.userAddress)){e.next=4;break}throw new Error("Can't override userAddress when connecting through Signer");case 4:return e.t0=b,e.t1=b({},n),e.t2={},e.next=9,u.getAddress();case 9:e.t3=e.sent,e.t4={userAddress:e.t3},n=(0,e.t0)(e.t1,e.t2,e.t4);case 12:return e.t5=P,e.t6=o,e.t7=u,e.next=17,o.getNetwork();case 17:return e.t8=e.sent.chainId,e.t9=n,e.abrupt("return",(0,e.t5)(e.t6,e.t7,e.t8,e.t9));case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();t._connect=B},126:function(e,t,n){"use strict";var a=n(65),i=n(48),r=n(55),s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Percent=t.Difference=t.Decimal=void 0;var o=s(n(151)),u=n(49),l=function(e){return p.pow(e)},c=18,d=u.BigNumber.from(1),p=u.BigNumber.from(10),y=l(c),b=/^[0-9]*(\.[0-9]*)?(e[-+]?[0-9]+)?$/,m=/0*$/,f=["","K","M","B","T"],h=function(e,t){return e.mul(t).add(v.HALF.hex).div(y)},v=function(){function e(t){if(i(this,e),t.isNegative())throw new Error("negatives not supported by Decimal");this._bigNumber=t}return r(e,[{key:"hex",get:function(){return this._bigNumber.toHexString()}},{key:"bigNumber",get:function(){return this._bigNumber.toString()}},{key:"_toStringWithAutomaticPrecision",value:function(){var e=this._bigNumber.div(y),t=this._bigNumber.mod(y);if(t.isZero())return e.toString();var n=t.toString().padStart(c,"0").replace(m,"");return e.toString()+"."+n}},{key:"_roundUp",value:function(e){var t=l(17-e).mul(5);return this._bigNumber.add(t)}},{key:"_toStringWithPrecision",value:function(e){if(e<0)throw new Error("precision must not be negative");var t=e<c?this._roundUp(e):this._bigNumber,n=t.div(y),a=t.mod(y);if(0===e)return n.toString();var i=a.toString().padStart(c,"0").substr(0,e);return n.toString()+"."+i}},{key:"toString",value:function(e){return this.infinite?"\u221e":void 0!==e?this._toStringWithPrecision(e):this._toStringWithAutomaticPrecision()}},{key:"prettify",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,t=this.toString(e).split("."),n=a(t,2),i=n[0],r=n[1],s=i.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,");return void 0!==r?s+"."+r:s}},{key:"shorten",value:function(){var t=this.toString(0).length,n=Math.min(Math.floor((t-1)/3),f.length-1),a=Math.max(3*(n+1)-t,0);return this.div(new e(l(c+3*n))).prettify(a)+f[n]}},{key:"add",value:function(t){return new e(this._bigNumber.add(e.from(t)._bigNumber))}},{key:"sub",value:function(t){return new e(this._bigNumber.sub(e.from(t)._bigNumber))}},{key:"mul",value:function(t){return new e(this._bigNumber.mul(e.from(t)._bigNumber).div(y))}},{key:"div",value:function(t){return(t=e.from(t)).isZero?e.INFINITY:new e(this._bigNumber.mul(y).div(t._bigNumber))}},{key:"_divCeil",value:function(t){return(t=e.from(t)).isZero?e.INFINITY:new e(this._bigNumber.mul(y).add(t._bigNumber.sub(d)).div(t._bigNumber))}},{key:"mulDiv",value:function(t,n){return t=e.from(t),(n=e.from(n)).isZero?e.INFINITY:new e(this._bigNumber.mul(t._bigNumber).div(n._bigNumber))}},{key:"pow",value:function(t){if(o.default(Number.isInteger(t)),o.default(0<=t&&t<=4294967295),0===t)return e.ONE;if(1===t)return this;for(var n=this._bigNumber,a=y;t>1;t>>>=1)1&t&&(a=h(n,a)),n=h(n,n);return new e(h(n,a))}},{key:"isZero",get:function(){return this._bigNumber.isZero()}},{key:"zero",get:function(){if(this.isZero)return this}},{key:"nonZero",get:function(){if(!this.isZero)return this}},{key:"infinite",get:function(){if(this.eq(e.INFINITY))return this}},{key:"finite",get:function(){if(!this.eq(e.INFINITY))return this}},{key:"absoluteValue",get:function(){return this}},{key:"lt",value:function(t){return this._bigNumber.lt(e.from(t)._bigNumber)}},{key:"eq",value:function(t){return this._bigNumber.eq(e.from(t)._bigNumber)}},{key:"gt",value:function(t){return this._bigNumber.gt(e.from(t)._bigNumber)}},{key:"gte",value:function(t){return this._bigNumber.gte(e.from(t)._bigNumber)}},{key:"lte",value:function(t){return this._bigNumber.lte(e.from(t)._bigNumber)}}],[{key:"fromBigNumberString",value:function(t){return new e(u.BigNumber.from(t))}},{key:"_fromString",value:function(t){if(!t||!t.match(b))throw new Error('bad decimal format: "'.concat(t,'"'));if(t.includes("e")){var n=t.split("e"),i=a(n,2),r=i[0],s=i[1];return s.startsWith("-")?new e(e._fromString(r)._bigNumber.div(p.pow(u.BigNumber.from(s.substr(1))))):(s.startsWith("+")&&(s=s.substr(1)),new e(e._fromString(r)._bigNumber.mul(p.pow(u.BigNumber.from(s)))))}if(!t.includes("."))return new e(u.BigNumber.from(t).mul(y));var o=t.split("."),l=a(o,2),d=l[0],m=l[1];return m.length<c?m+="0".repeat(c-m.length):m=m.substr(0,c),new e(u.BigNumber.from(d||0).mul(y).add(m))}},{key:"from",value:function(t){switch(typeof t){case"object":if(t instanceof e)return t;throw new Error("invalid Decimalish value");case"string":return e._fromString(t);case"number":return e._fromString(t.toString());default:throw new Error("invalid Decimalish value")}}},{key:"min",value:function(t,n){return t=e.from(t),n=e.from(n),t.lt(n)?t:n}},{key:"max",value:function(t,n){return t=e.from(t),n=e.from(n),t.gt(n)?t:n}}]),e}();t.Decimal=v,v.INFINITY=v.fromBigNumberString("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),v.ZERO=v.from(0),v.HALF=v.from(.5),v.ONE=v.from(1);var j=function(){function e(t){i(this,e),this._number=t}return r(e,[{key:"toString",value:function(e){return this._number?this._number.sign+this._number.absoluteValue.toString(e):"N/A"}},{key:"prettify",value:function(e){return this._number?this._number.sign+this._number.absoluteValue.prettify(e):this.toString()}},{key:"mul",value:function(t){return new e(this._number&&{sign:this._number.sign,absoluteValue:this._number.absoluteValue.mul(t)})}},{key:"nonZero",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.nonZero)&&this}},{key:"positive",get:function(){var e;return"+"===(null===(e=this._number)||void 0===e?void 0:e.sign)?this:void 0}},{key:"negative",get:function(){var e;return"-"===(null===(e=this._number)||void 0===e?void 0:e.sign)?this:void 0}},{key:"absoluteValue",get:function(){var e;return null===(e=this._number)||void 0===e?void 0:e.absoluteValue}},{key:"infinite",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.infinite)&&this}},{key:"finite",get:function(){var e;return(null===(e=this._number)||void 0===e?void 0:e.absoluteValue.finite)&&this}}],[{key:"between",value:function(t,n){return void 0===t||void 0===n?new e(void 0):(t=v.from(t),n=v.from(n),t.infinite&&n.infinite?new e(void 0):t.infinite?new e({sign:"+",absoluteValue:t}):n.infinite?new e({sign:"-",absoluteValue:n}):t.gt(n)?new e({sign:"+",absoluteValue:v.from(t).sub(n)}):n.gt(t)?new e({sign:"-",absoluteValue:v.from(n).sub(t)}):new e({sign:"",absoluteValue:v.ZERO}))}}]),e}();t.Difference=j;var T=function(){function e(t){i(this,e),this._percent=t.infinite||t.mul&&t.mul(100)||t}return r(e,[{key:"nonZeroish",value:function(e){var t,n="0.".concat("0".repeat(e),"5");if(null===(t=this._percent.absoluteValue)||void 0===t?void 0:t.gte(n))return this}},{key:"toString",value:function(e){return this._percent.toString(e)+(this._percent.absoluteValue&&!this._percent.infinite?"%":"")}},{key:"prettify",value:function(){var e,t;return(null===(e=this._percent.absoluteValue)||void 0===e?void 0:e.gte("1000"))?this.toString(0):(null===(t=this._percent.absoluteValue)||void 0===t?void 0:t.gte("10"))?this.toString(1):this.toString(2)}}]),e}();t.Percent=T},163:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(393),t),i(n(277),t),i(n(282),t)},165:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.UnsupportedNetworkError=t._connectByChainId=void 0;var r=n(125);Object.defineProperty(t,"_connectByChainId",{enumerable:!0,get:function(){return r._connectByChainId}}),Object.defineProperty(t,"UnsupportedNetworkError",{enumerable:!0,get:function(){return r.UnsupportedNetworkError}}),i(n(454),t),i(n(284),t),i(n(455),t),i(n(285),t),i(n(286),t),i(n(287),t),i(n(458),t)},181:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.promiseAllValues=t.panic=t.decimalify=t.numberify=void 0;var a=n(6);t.numberify=function(e){return e.toNumber()};t.decimalify=function(e){return a.Decimal.fromBigNumberString(e.toHexString())};t.panic=function(e){throw e};t.promiseAllValues=function(e){var t=Object.keys(e);return Promise.all(Object.values(e)).then((function(e){return Object.fromEntries(e.map((function(e,n){return[t[n],e]})))}))}},20:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(296),t),i(n(233),t),i(n(491),t),i(n(492),t)},226:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MINIMUM_REDEMPTION_RATE=t.MAXIMUM_BORROWING_RATE=t.MINIMUM_BORROWING_RATE=t.LUSD_MINIMUM_DEBT=t.LUSD_MINIMUM_NET_DEBT=t.LUSD_LIQUIDATION_RESERVE=t.MINIMUM_COLLATERAL_RATIO=t.CRITICAL_COLLATERAL_RATIO=void 0;var a=n(126);t.CRITICAL_COLLATERAL_RATIO=a.Decimal.from(1.5),t.MINIMUM_COLLATERAL_RATIO=a.Decimal.from(1.1),t.LUSD_LIQUIDATION_RESERVE=a.Decimal.from(200),t.LUSD_MINIMUM_NET_DEBT=a.Decimal.from(1800),t.LUSD_MINIMUM_DEBT=t.LUSD_LIQUIDATION_RESERVE.add(t.LUSD_MINIMUM_NET_DEBT),t.MINIMUM_BORROWING_RATE=a.Decimal.from(.005),t.MAXIMUM_BORROWING_RATE=a.Decimal.from(.05),t.MINIMUM_REDEMPTION_RATE=a.Decimal.from(.005)},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquityStore=void 0;var a=n(1),i=n(296);t.useLiquityStore=function(){var e=a.useContext(i.LiquityStoreContext);if(!e)throw new Error("You must provide a LiquityStore via LiquityStoreProvider");return e}},277:function(e,t,n){"use strict";var a=n(5),i=n(79),r=n(65),s=n(150),o=n(48),u=n(55),l=n(273),c=n(220),d=n(123),p=n(82),y=n(83);Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketAugmentedWeb3Provider=t.WebSocketAugmented=t.isWebSocketAugmentedProvider=void 0;var b=n(112),m=n(2),f=n(282),h=[];t.isWebSocketAugmentedProvider=function(e){return h.some((function(t){return e instanceof t}))};var v=function(e){return"string"===typeof e&&32===m.hexDataLength(e)},j=function(e){return new Promise((function(t){return setTimeout(t,e)}))},T=function(e){return function(t){return function(n,a){var i=a.isActive;e(n).then((function(e){null!==e&&i()&&t(e)}))}}},x=function(e){return function(t,n){e(t)}},g=function(e){return function(t,n){var a=n.removeMe;e(t),a()}};t.WebSocketAugmented=function(e){var t=function(e){p(n,e);var t=y(n);function n(){var e;return o(this,n),(e=t.apply(this,arguments))._seenBlock=0,e._blockListenerScheduled=!1,e._blockListeners=new Map,e._blockListener=e._onBlock.bind(l(e)),e}return u(n,[{key:"openWebSocket",value:function(e,t){this._wsProvider=new f.WebSocketProvider(e,t),this._wsProvider.onClose=this._onWebSocketClose.bind(this),this._wsParams=[e,t],this._switchover()}},{key:"_onWebSocketClose",value:function(){var e=this;this.closeWebSocket(),console.warn("WebSocketProvider disconnected. Retrying in 10 seconds."),this._reconnectTimerId=setTimeout((function(){return e.openWebSocket.apply(e,s(e._wsParams))}),1e4)}},{key:"closeWebSocket",value:function(){this._wsProvider&&(this._wsProvider.onClose=null,this._wsProvider.close(1e3),this._wsProvider=void 0,this._switchover(),void 0!==this._reconnectTimerId&&(clearTimeout(this._reconnectTimerId),this._reconnectTimerId=void 0))}},{key:"_switchover",value:function(){this._blockListeners.size>0&&(this._wsProvider&&c(d(n.prototype),"off",this).call(this,"block",this._blockListener),this._startBlockEvents())}},{key:"_onBlock",value:function(e){var t=this;this._seenBlock=e,this._blockListenerScheduled||(this._blockListenerScheduled=!0,setTimeout((function(){t._blockListenerScheduled=!1,s(t._blockListeners).forEach((function(e){return(0,r(e,2)[1])(t._seenBlock)}))}),50))}},{key:"_retrySeenBlock",value:function(){var e=i(a.mark((function e(t,n){var i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0;case 1:return e.prev=1,e.next=4,t();case 4:return i=e.sent,e.abrupt("return",i);case 9:if(e.prev=9,e.t0=e.catch(1),this._seenBlock===n&&("object"===typeof(a=e.t0)&&"string"===typeof a.message&&(a.message.includes("header not found")||a.message.includes("request is not supported because your node is running with state pruning")))){e.next=13;break}throw e.t0;case 13:return e.next=15,j(200);case 15:e.next=1;break;case 18:case"end":return e.stop()}var a}),e,this,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"call",value:function(){var e=i(a.mark((function e(t,i){var r,s,o=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i;case 2:return r=e.sent,s=function(){var e;return(null===(e=o._wsProvider)||void 0===e?void 0:e.isReady)?o._wsProvider.call(t,r):c(d(n.prototype),"call",o).call(o,t,r)},e.abrupt("return",r===this._seenBlock?this._retrySeenBlock(s,this._seenBlock):s());case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=i(a.mark((function e(t,i){var r,s,o=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i;case 2:return r=e.sent,s=function(){var e;return(null===(e=o._wsProvider)||void 0===e?void 0:e.isReady)?o._wsProvider.getBalance(t,r):c(d(n.prototype),"getBalance",o).call(o,t,r)},e.abrupt("return",r===this._seenBlock?this._retrySeenBlock(s,this._seenBlock):s());case 5:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_startBlockEvents",value:function(){this._wsProvider?(console.log("Listening for new blocks on WebSocketProvider"),this._wsProvider.on("block",this._blockListener)):(console.log("Listening for new blocks on basic Provider"),c(d(n.prototype),"on",this).call(this,"block",this._blockListener))}},{key:"_stopBlockEvents",value:function(){this._wsProvider?this._wsProvider.off("block",this._blockListener):c(d(n.prototype),"off",this).call(this,"block",this._blockListener)}},{key:"_wrap",value:function(e,t){var n=this;return[e,function(a){return t(function(e){return function(t){setTimeout((function(){e(t)}),0)}}(e))(a,{isActive:function(){return n._blockListeners.has(e)},removeMe:function(){return n._blockListeners.delete(e)}})}]}},{key:"on",value:function(e,t){if(v(e)){var a=this._getTransactionReceiptFromLatest.bind(this,e),i=this._wrap(t,T(a)),o=r(i,2)[1];return o(void 0),this._addBlockListener(t,o)}return"block"===e?this._addBlockListener.apply(this,s(this._wrap(t,x))):c(d(n.prototype),"on",this).call(this,e,t)}},{key:"_addBlockListener",value:function(e,t){return this._blockListeners.has(e)||(this._blockListeners.set(e,t),1===this._blockListeners.size&&this._startBlockEvents()),this}},{key:"once",value:function(e,t){if(v(e)){var a=this._getTransactionReceiptFromLatest.bind(this,e),i=this._wrap(t,(u=T(a),l=g,function(e){return function(t,n){u((function(t){return l(e)(t,n)}))(t,n)}})),o=r(i,2)[1];return o(void 0),this._addBlockListener(t,o)}return"block"===e?this._addBlockListener.apply(this,s(this._wrap(t,g))):c(d(n.prototype),"once",this).call(this,e,t);var u,l}},{key:"off",value:function(e,t){return v(e)||"block"===e?this._removeBlockListener(t):c(d(n.prototype),"off",this).call(this,e,t)}},{key:"_removeBlockListener",value:function(e){return this._blockListeners.has(e)&&(this._blockListeners.delete(e),0===this._blockListeners.size&&this._stopBlockEvents()),this}},{key:"getTransaction",value:function(){var e=i(a.mark((function e(t){var i,r,o,u,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=[c(d(n.prototype),"getTransaction",this).call(this,t)].concat(s((null===(i=this._wsProvider)||void 0===i?void 0:i.isReady)?[this._wsProvider.getTransaction(t)]:[])),e.next=3,Promise.race(o);case 3:if(null===(u=e.sent)||void 0===u){e.next=8;break}e.t1=u,e.next=11;break;case 8:return e.next=10,Promise.all(o);case 10:e.t1=e.sent.find((function(e){return null!==e}));case 11:if(e.t2=r=e.t1,e.t0=null!==e.t2,!e.t0){e.next=15;break}e.t0=void 0!==r;case 15:if(!e.t0){e.next=19;break}e.t3=r,e.next=20;break;case 19:e.t3=null;case 20:return l=e.t3,e.abrupt("return",l);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTransactionReceipt",value:function(e){var t;return(null===(t=this._wsProvider)||void 0===t?void 0:t.isReady)?this._wsProvider.getTransactionReceipt(e):c(d(n.prototype),"getTransactionReceipt",this).call(this,e)}},{key:"getTransactionCount",value:function(e,t){var a;return(null===(a=this._wsProvider)||void 0===a?void 0:a.isReady)?this._wsProvider.getTransactionCount(e,t):c(d(n.prototype),"getTransactionCount",this).call(this,e,t)}},{key:"getBlock",value:function(e){var t;return(null===(t=this._wsProvider)||void 0===t?void 0:t.isReady)?this._wsProvider.getBlock(e):c(d(n.prototype),"getBlock",this).call(this,e)}},{key:"getBlockWithTransactions",value:function(e){var t;return(null===(t=this._wsProvider)||void 0===t?void 0:t.isReady)?this._wsProvider.getBlockWithTransactions(e):c(d(n.prototype),"getBlockWithTransactions",this).call(this,e)}},{key:"_blockContainsTx",value:function(){var e=i(a.mark((function e(t,n){var i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=null;case 1:if(i){e.next=9;break}return e.next=4,j(200);case 4:return e.next=6,this.getBlock(t);case 6:i=e.sent,e.next=1;break;case 9:return e.abrupt("return",i.transactions.some((function(e){return e===n})));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getTransactionReceiptFromLatest",value:function(){var e=i(a.mark((function e(t,n){var i;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:t=e.sent,0;case 4:return e.next=6,this.getTransactionReceipt(t);case 6:if(i=e.sent,e.t1=void 0===n,e.t1){e.next=15;break}if(e.t2=null===i,!e.t2){e.next=14;break}return e.next=13,this._blockContainsTx(n,t);case 13:e.t2=!e.sent;case 14:e.t1=e.t2;case 15:if(e.t0=e.t1,e.t0){e.next=18;break}e.t0=null!==i&&i.blockNumber+i.confirmations-1>=n;case 18:if(!e.t0){e.next=21;break}return e.abrupt("return",i);case 21:return e.next=23,j(200);case 23:e.next=4;break;case 26:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"waitForTransaction",value:function(){var e=i(a.mark((function e(t,i,r){var s,o,u=this;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===r){e.next=2;break}return e.abrupt("return",c(d(n.prototype),"waitForTransaction",this).call(this,t,i,r));case 2:s=void 0;case 3:return e.next=5,this._getTransactionReceiptFromLatest(t,s);case 5:if(null===(o=e.sent)||!(void 0===i||o.confirmations>=i)){e.next=8;break}return e.abrupt("return",o);case 8:return e.next=10,new Promise((function(e){return u.once("block",e)}));case 10:s=e.sent;case 11:e.next=3;break;case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()}]),n}(e);return h.push(t),t},t.WebSocketAugmentedWeb3Provider=t.WebSocketAugmented(b.Web3Provider)},282:function(e,t,n){"use strict";var a=n(5),i=n(79),r=n(48),s=n(55),o=n(82),u=n(83);Object.defineProperty(t,"__esModule",{value:!0}),t.WebSocketProvider=void 0;var l=function(e){o(n,e);var t=u(n);function n(){return r(this,n),t.apply(this,arguments)}return s(n,[{key:"isReady",get:function(){return this._websocket.readyState===WebSocket.OPEN}},{key:"onClose",set:function(e){this._websocket.onclose=e}},{key:"close",value:function(e){this._websocket.close(e)}},{key:"detectNetwork",value:function(){var e=i(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.network);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),n}(n(112).WebSocketProvider);t.WebSocketProvider=l},283:function(e,t,n){"use strict";var a=n(65),i=n(48),r=n(55),s=n(82),o=n(83),u=n(5),l=n(85),c=n(79),d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t._connectToContracts=t._uniTokenIsMock=t._priceFeedIsTestnet=t._LiquityContract=void 0;var p=n(88),y=d(n(433)),b=d(n(434)),m=d(n(435)),f=d(n(436)),h=d(n(437)),v=d(n(438)),j=d(n(439)),T=d(n(440)),x=d(n(441)),g=d(n(442)),O=d(n(443)),w=d(n(444)),_=d(n(445)),S=d(n(446)),k=d(n(447)),D=d(n(448)),L=d(n(449)),E=d(n(450)),A=d(n(451)),C=d(n(452)),I=function(e){s(n,e);var t=o(n);function n(e,a,r){var s,o,d;return i(this,n),(s=t.call(this,e,a,r)).estimateAndPopulate=(o=s.estimateGas,d=s.populateTransaction,Object.fromEntries(Object.keys(o).map((function(e){return[e,function(){var t=c(u.mark((function t(n,a){var i,r,s,c,p=arguments;return u.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(i=p.length,r=new Array(i>2?i-2:0),s=2;s<i;s++)r[s-2]=p[s];if(void 0!==n.gasLimit){t.next=6;break}return t.next=4,o[e].apply(o,r.concat([n]));case 4:c=t.sent,n=l(l({},n),{},{gasLimit:a(c)});case 6:return t.abrupt("return",d[e].apply(d,r.concat([n])));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()]})))),s}return r(n,[{key:"extractEvents",value:function(e,t){var n=this;return e.filter((function(e){return e.address===n.address})).map((function(e){return n.interface.parseLog(e)})).filter((function(e){return e.name===t}))}}]),n}(p.Contract);t._LiquityContract=I;t._priceFeedIsTestnet=function(e){return"setPrice"in e};t._uniTokenIsMock=function(e){return"mint"in e};t._connectToContracts=function(e,t){var n,i,r,s,o=t.addresses,u=t._priceFeedIsTestnet,l=t._uniTokenIsMock,c=(n=u,i=l,{activePool:y.default,borrowerOperations:b.default,troveManager:m.default,lusdToken:f.default,communityIssuance:v.default,defaultPool:j.default,lqtyToken:T.default,hintHelpers:x.default,lockupContractFactory:g.default,lqtyStaking:O.default,multiTroveGetter:w.default,priceFeed:n?S.default:_.default,sortedTroves:k.default,stabilityPool:D.default,gasPool:L.default,collSurplusPool:h.default,unipool:E.default,uniToken:i?C.default:A.default});return r=o,s=function(t,n){return new I(t,c[n],e)},Object.fromEntries(Object.entries(r).map((function(e){var t=a(e,2),n=t[0],i=t[1];return[n,s(i,n)]})))}},284:function(e,t,n){"use strict";var a=n(5),i=n(85),r=n(65),s=n(79),o=n(48),u=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.ReadableEthersLiquity=void 0;var l,c=n(6),d=n(181),p=n(125),y=n(285),b=c.Decimal.from("0.999037758833783000"),m=c.Decimal.from(2);!function(e){e[e.nonExistent=0]="nonExistent",e[e.active=1]="active",e[e.closedByOwner=2]="closedByOwner",e[e.closedByLiquidation=3]="closedByLiquidation",e[e.closedByRedemption=4]="closedByRedemption"}(l||(l={}));var f=function(e){return e===l.nonExistent?"nonExistent":e===l.active?"open":e===l.closedByOwner?"closedByOwner":e===l.closedByLiquidation?"closedByLiquidation":e===l.closedByRedemption?"closedByRedemption":d.panic(new Error("invalid backendStatus ".concat(e)))},h=function(e){return new Date(1e3*e)},v=["ascendingCollateralRatio","descendingCollateralRatio"],j=function(e,t){if(void 0!==e[t]){if(!Number.isInteger(e[t]))throw new Error("".concat(t," must be an integer"));if(e[t]<0)throw new Error("".concat(t," must not be negative"))}},T=function(){function e(t){o(this,e),this.connection=t}return u(e,[{key:"hasStore",value:function(){return!1}},{key:"getTotalRedistributed",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,y;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.troveManager,e.next=3,Promise.all([s.L_ETH(i({},t)).then(d.decimalify),s.L_LUSDDebt(i({},t)).then(d.decimalify)]);case 3:return o=e.sent,u=r(o,2),l=u[0],y=u[1],e.abrupt("return",new c.Trove(l,y));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTroveBeforeRedistribution",value:function(){var e=s(a.mark((function e(t,n){var s,o,u,y,b,m;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=p._requireAddress(this.connection)),s=p._getContracts(this.connection),o=s.troveManager,e.next=4,Promise.all([o.Troves(t,i({},n)),o.rewardSnapshots(t,i({},n))]);case 4:if(u=e.sent,y=r(u,2),b=y[0],m=y[1],b.status!==l.active){e.next=12;break}return e.abrupt("return",new c.TroveWithPendingRedistribution(t,f(b.status),d.decimalify(b.coll),d.decimalify(b.debt),d.decimalify(b.stake),new c.Trove(d.decimalify(m.ETH),d.decimalify(m.LUSDDebt))));case 12:return e.abrupt("return",new c.TroveWithPendingRedistribution(t,f(b.status)));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTrove",value:function(){var e=s(a.mark((function e(t,n){var i,s,o,u;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this.getTroveBeforeRedistribution(t,n),this.getTotalRedistributed(n)]);case 2:return i=e.sent,s=r(i,2),o=s[0],u=s[1],e.abrupt("return",o.applyRedistribution(u));case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNumberOfTroves",value:function(){var e=s(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),r=n.troveManager,e.next=3,r.getTroveOwnersCount(i({},t));case 3:return e.abrupt("return",e.sent.toNumber());case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(e){return p._getContracts(this.connection).priceFeed.callStatic.fetchPrice(i({},e)).then(d.decimalify)}},{key:"_getActivePool",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,y;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.activePool,e.next=3,Promise.all([s.getETH(i({},t)),s.getLUSDDebt(i({},t))].map((function(e){return e.then(d.decimalify)})));case 3:return o=e.sent,u=r(o,2),l=u[0],y=u[1],e.abrupt("return",new c.Trove(l,y));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getDefaultPool",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,y;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.defaultPool,e.next=3,Promise.all([s.getETH(i({},t)),s.getLUSDDebt(i({},t))].map((function(e){return e.then(d.decimalify)})));case 3:return o=e.sent,u=r(o,2),l=u[0],y=u[1],e.abrupt("return",new c.Trove(l,y));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=s(a.mark((function e(t){var n,i,s,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getActivePool(t),this._getDefaultPool(t)]);case 2:return n=e.sent,i=r(n,2),s=i[0],o=i[1],e.abrupt("return",s.add(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStabilityDeposit",value:function(){var e=s(a.mark((function e(t,n){var s,o,u,l,y,b,m,f,h,v;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=p._requireAddress(this.connection)),s=p._getContracts(this.connection),o=s.stabilityPool,e.next=4,Promise.all([o.deposits(t,i({},n)),o.getCompoundedLUSDDeposit(t,i({},n)),o.getDepositorETHGain(t,i({},n)),o.getDepositorLQTYGain(t,i({},n))]);case 4:return u=e.sent,l=r(u,4),y=l[0],b=y.frontEndTag,m=y.initialValue,f=l[1],h=l[2],v=l[3],e.abrupt("return",new c.StabilityDeposit(d.decimalify(m),d.decimalify(f),d.decimalify(h),d.decimalify(v),b));case 13:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRemainingStabilityPoolLQTYReward",value:function(){var e=s(a.mark((function e(t){var n,r,s,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),r=n.communityIssuance,s=this.connection.totalStabilityPoolLQTYReward,e.t0=d,e.next=5,r.totalLQTYIssued(i({},t));case 5:return e.t1=e.sent,o=e.t0.decimalify.call(e.t0,e.t1),e.abrupt("return",s.sub(o));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLUSDInStabilityPool",value:function(e){return p._getContracts(this.connection).stabilityPool.getTotalLUSDDeposits(i({},e)).then(d.decimalify)}},{key:"getLUSDBalance",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).lusdToken.balanceOf(e,i({},t)).then(d.decimalify)}},{key:"getLQTYBalance",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).lqtyToken.balanceOf(e,i({},t)).then(d.decimalify)}},{key:"getUniTokenBalance",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).uniToken.balanceOf(e,i({},t)).then(d.decimalify)}},{key:"getUniTokenAllowance",value:function(e,t){null!==e&&void 0!==e||(e=p._requireAddress(this.connection));var n=p._getContracts(this.connection),a=n.uniToken,r=n.unipool;return a.allowance(e,r.address,i({},t)).then(d.decimalify)}},{key:"_getRemainingLiquidityMiningLQTYRewardCalculator",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,c,y,b;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.unipool,e.next=3,Promise.all([s.totalSupply(i({},t)),s.rewardRate(i({},t)).then(d.decimalify),s.periodFinish(i({},t)).then(d.numberify),s.lastUpdateTime(i({},t)).then(d.numberify)]);case 3:return o=e.sent,u=r(o,4),l=u[0],c=u[1],y=u[2],b=u[3],e.abrupt("return",(function(e){return c.mul(Math.max(0,y-(l.isZero()?b:e)))}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRemainingLiquidityMiningLQTYReward",value:function(){var e=s(a.mark((function e(t){var n,i,s,o;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getRemainingLiquidityMiningLQTYRewardCalculator(t),this._getBlockTimestamp(null===t||void 0===t?void 0:t.blockTag)]);case 2:return n=e.sent,i=r(n,2),s=i[0],o=i[1],e.abrupt("return",s(o));case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningStake",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).unipool.balanceOf(e,i({},t)).then(d.decimalify)}},{key:"getTotalStakedUniTokens",value:function(e){return p._getContracts(this.connection).unipool.totalSupply(i({},e)).then(d.decimalify)}},{key:"getLiquidityMiningLQTYReward",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).unipool.earned(e,i({},t)).then(d.decimalify)}},{key:"getCollateralSurplusBalance",value:function(e,t){return null!==e&&void 0!==e||(e=p._requireAddress(this.connection)),p._getContracts(this.connection).collSurplusPool.getCollateral(e,i({},t)).then(d.decimalify)}},{key:"getTroves",value:function(){var e=s(a.mark((function e(t,n){var s,o,u,l,c,d,y,b,m;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=p._getContracts(this.connection),l=u.multiTroveGetter,j(t,"first"),j(t,"startingAt"),v.includes(t.sortedBy)){e.next=5;break}throw new Error("sortedBy must be one of: ".concat(v.map((function(e){return'"'.concat(e,'"')})).join(", ")));case 5:return e.next=7,Promise.all([t.beforeRedistribution?void 0:this.getTotalRedistributed(i({},n)),l.getMultipleSortedTroves("descendingCollateralRatio"===t.sortedBy?null!==(s=t.startingAt)&&void 0!==s?s:0:-((null!==(o=t.startingAt)&&void 0!==o?o:0)+1),t.first,i({},n))]);case 7:if(c=e.sent,d=r(c,2),y=d[0],b=d[1],m=x(b),!y){e.next=16;break}return e.abrupt("return",m.map((function(e){return e.applyRedistribution(y)})));case 16:return e.abrupt("return",m);case 17:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getBlockTimestamp",value:function(e){return p._getBlockTimestamp(this.connection,e)}},{key:"_getFeesFactory",value:function(){var e=s(a.mark((function e(t){var n,s,o,u,l,y;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),s=n.troveManager,e.next=3,Promise.all([s.lastFeeOperationTime(i({},t)),s.baseRate(i({},t)).then(d.decimalify)]);case 3:return o=e.sent,u=r(o,2),l=u[0],y=u[1],e.abrupt("return",(function(e,t){return new c.Fees(y,b,m,h(l.toNumber()),h(e),t)}));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFees",value:function(){var e=s(a.mark((function e(t){var n,i,s,o,u,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getFeesFactory(t),this.getTotal(t),this.getPrice(t),this._getBlockTimestamp(null===t||void 0===t?void 0:t.blockTag)]);case 2:return n=e.sent,i=r(n,4),s=i[0],o=i[1],u=i[2],l=i[3],e.abrupt("return",s(l,o.collateralRatioIsBelowCritical(u)));case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLQTYStake",value:function(){var e=s(a.mark((function e(t,n){var s,o,u,l,y,b,m;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=p._requireAddress(this.connection)),s=p._getContracts(this.connection),o=s.lqtyStaking,e.next=4,Promise.all([o.stakes(t,i({},n)),o.getPendingETHGain(t,i({},n)),o.getPendingLUSDGain(t,i({},n))].map((function(e){return e.then(d.decimalify)})));case 4:return u=e.sent,l=r(u,3),y=l[0],b=l[1],m=l[2],e.abrupt("return",new c.LQTYStake(y,b,m));case 10:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTotalStakedLQTY",value:function(){var e=s(a.mark((function e(t){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p._getContracts(this.connection),r=n.lqtyStaking,e.abrupt("return",r.totalLQTYStaked(i({},t)).then(d.decimalify));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFrontendStatus",value:function(){var e=s(a.mark((function e(t,n){var r,s,o,u,l;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return null!==t&&void 0!==t||(t=p._requireFrontendAddress(this.connection)),r=p._getContracts(this.connection),s=r.stabilityPool,e.next=4,s.frontEnds(t,i({},n));case 4:return o=e.sent,u=o.registered,l=o.kickbackRate,e.abrupt("return",u?{status:"registered",kickbackRate:d.decimalify(l)}:{status:"unregistered"});case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}],[{key:"_from",value:function(t){var n=new e(t);return"blockPolled"===t.useStore?new g(n):n}},{key:"connect",value:function(){var t=s(a.mark((function t(n,i){return a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,p._connect(n,i);case 3:return t.t1=t.sent,t.abrupt("return",t.t0._from.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();t.ReadableEthersLiquity=T;var x=function(e){return e.map((function(e){return new c.TroveWithPendingRedistribution(e.owner,"open",d.decimalify(e.coll),d.decimalify(e.debt),d.decimalify(e.stake),new c.Trove(d.decimalify(e.snapshotETH),d.decimalify(e.snapshotLUSDDebt)))}))},g=function(){function e(t){o(this,e);var n=new y.BlockPolledLiquityStore(t);this.store=n,this.connection=t.connection,this._readable=t}return u(e,[{key:"_blockHit",value:function(e){return!e||void 0===e.blockTag||e.blockTag===this.store.state.blockTag}},{key:"_userHit",value:function(e,t){return this._blockHit(t)&&(void 0===e||e===this.store.connection.userAddress)}},{key:"_frontendHit",value:function(e,t){return this._blockHit(t)&&(void 0===e||e===this.store.connection.frontendTag)}},{key:"hasStore",value:function(e){return void 0===e||"blockPolled"===e}},{key:"getTotalRedistributed",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.totalRedistributed:this._readable.getTotalRedistributed(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTroveBeforeRedistribution",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.troveBeforeRedistribution:this._readable.getTroveBeforeRedistribution(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTrove",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.trove:this._readable.getTrove(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getNumberOfTroves",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.numberOfTroves:this._readable.getNumberOfTroves(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.price:this._readable.getPrice(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.total:this._readable.getTotal(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getStabilityDeposit",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.stabilityDeposit:this._readable.getStabilityDeposit(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRemainingStabilityPoolLQTYReward",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.remainingStabilityPoolLQTYReward:this._readable.getRemainingStabilityPoolLQTYReward(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLUSDInStabilityPool",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.lusdInStabilityPool:this._readable.getLUSDInStabilityPool(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLUSDBalance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.lusdBalance:this._readable.getLUSDBalance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getLQTYBalance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.lqtyBalance:this._readable.getLQTYBalance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUniTokenBalance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.uniTokenBalance:this._readable.getUniTokenBalance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getUniTokenAllowance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.uniTokenAllowance:this._readable.getUniTokenAllowance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getRemainingLiquidityMiningLQTYReward",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.remainingLiquidityMiningLQTYReward:this._readable.getRemainingLiquidityMiningLQTYReward(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningStake",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.liquidityMiningStake:this._readable.getLiquidityMiningStake(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTotalStakedUniTokens",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.totalStakedUniTokens:this._readable.getTotalStakedUniTokens(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningLQTYReward",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.liquidityMiningLQTYReward:this._readable.getLiquidityMiningLQTYReward(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getCollateralSurplusBalance",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.collateralSurplusBalance:this._readable.getCollateralSurplusBalance(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_getBlockTimestamp",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit({blockTag:t})?this.store.state.blockTimestamp:this._readable._getBlockTimestamp(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_getFeesFactory",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state._feesFactory:this._readable._getFeesFactory(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFees",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.fees:this._readable.getFees(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLQTYStake",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._userHit(t,n)?this.store.state.lqtyStake:this._readable.getLQTYStake(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTotalStakedLQTY",value:function(){var e=s(a.mark((function e(t){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._blockHit(t)?this.store.state.totalStakedLQTY:this._readable.getTotalStakedLQTY(t));case 1:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFrontendStatus",value:function(){var e=s(a.mark((function e(t,n){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._frontendHit(t,n)?this.store.state.frontend:this._readable.getFrontendStatus(t,n));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getTroves",value:function(e,t){return this._readable.getTroves(e,t)}},{key:"_getActivePool",value:function(){throw new Error("Method not implemented.")}},{key:"_getDefaultPool",value:function(){throw new Error("Method not implemented.")}},{key:"_getRemainingLiquidityMiningLQTYRewardCalculator",value:function(){throw new Error("Method not implemented.")}}]),e}()},285:function(e,t,n){"use strict";var a=n(150),i=n(85),r=n(180),s=n(5),o=n(79),u=n(48),l=n(55),c=n(82),d=n(83);Object.defineProperty(t,"__esModule",{value:!0}),t.BlockPolledLiquityStore=void 0;var p=n(67),y=n(6),b=n(181),m=n(125),f=function(e){c(n,e);var t=d(n);function n(e){var a;return u(this,n),(a=t.call(this)).connection=e.connection,a._readable=e,a._provider=m._getProvider(e.connection),a}return l(n,[{key:"_getRiskiestTroveBeforeRedistribution",value:function(){var e=o(s.mark((function e(t){var n;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._readable.getTroves({first:1,sortedBy:"ascendingCollateralRatio",beforeRedistribution:!0},t);case 2:if(0!==(n=e.sent).length){e.next=5;break}return e.abrupt("return",new y.TroveWithPendingRedistribution(p.AddressZero,"nonExistent"));case 5:return e.abrupt("return",n[0]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_get",value:function(){var e=o(s.mark((function e(t){var n,a,o,u,l,c,d,m;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.connection,a=n.userAddress,o=n.frontendTag,e.next=3,b.promiseAllValues(i({blockTimestamp:this._readable._getBlockTimestamp(t),_feesFactory:this._readable._getFeesFactory({blockTag:t}),calculateRemainingLQTY:this._readable._getRemainingLiquidityMiningLQTYRewardCalculator({blockTag:t}),price:this._readable.getPrice({blockTag:t}),numberOfTroves:this._readable.getNumberOfTroves({blockTag:t}),totalRedistributed:this._readable.getTotalRedistributed({blockTag:t}),total:this._readable.getTotal({blockTag:t}),lusdInStabilityPool:this._readable.getLUSDInStabilityPool({blockTag:t}),totalStakedLQTY:this._readable.getTotalStakedLQTY({blockTag:t}),_riskiestTroveBeforeRedistribution:this._getRiskiestTroveBeforeRedistribution({blockTag:t}),totalStakedUniTokens:this._readable.getTotalStakedUniTokens({blockTag:t}),remainingStabilityPoolLQTYReward:this._readable.getRemainingStabilityPoolLQTYReward({blockTag:t}),frontend:o?this._readable.getFrontendStatus(o,{blockTag:t}):{status:"unregistered"}},a?{accountBalance:this._provider.getBalance(a,t).then(b.decimalify),lusdBalance:this._readable.getLUSDBalance(a,{blockTag:t}),lqtyBalance:this._readable.getLQTYBalance(a,{blockTag:t}),uniTokenBalance:this._readable.getUniTokenBalance(a,{blockTag:t}),uniTokenAllowance:this._readable.getUniTokenAllowance(a,{blockTag:t}),liquidityMiningStake:this._readable.getLiquidityMiningStake(a,{blockTag:t}),liquidityMiningLQTYReward:this._readable.getLiquidityMiningLQTYReward(a,{blockTag:t}),collateralSurplusBalance:this._readable.getCollateralSurplusBalance(a,{blockTag:t}),troveBeforeRedistribution:this._readable.getTroveBeforeRedistribution(a,{blockTag:t}),stabilityDeposit:this._readable.getStabilityDeposit(a,{blockTag:t}),lqtyStake:this._readable.getLQTYStake(a,{blockTag:t}),ownFrontend:this._readable.getFrontendStatus(a,{blockTag:t})}:{accountBalance:y.Decimal.ZERO,lusdBalance:y.Decimal.ZERO,lqtyBalance:y.Decimal.ZERO,uniTokenBalance:y.Decimal.ZERO,uniTokenAllowance:y.Decimal.ZERO,liquidityMiningStake:y.Decimal.ZERO,liquidityMiningLQTYReward:y.Decimal.ZERO,collateralSurplusBalance:y.Decimal.ZERO,troveBeforeRedistribution:new y.TroveWithPendingRedistribution(p.AddressZero,"nonExistent"),stabilityDeposit:new y.StabilityDeposit(y.Decimal.ZERO,y.Decimal.ZERO,y.Decimal.ZERO,y.Decimal.ZERO,p.AddressZero),lqtyStake:new y.LQTYStake,ownFrontend:{status:"unregistered"}}));case 3:return u=e.sent,l=u.blockTimestamp,c=u._feesFactory,d=u.calculateRemainingLQTY,m=r(u,["blockTimestamp","_feesFactory","calculateRemainingLQTY"]),e.abrupt("return",[i(i({},m),{},{_feesInNormalMode:c(l,!1),remainingLiquidityMiningLQTYReward:d(l)}),{blockTag:t,blockTimestamp:l,_feesFactory:c}]);case 9:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_doStart",value:function(){var e=this;this._get().then((function(t){e._loaded||e._load.apply(e,a(t))}));var t=function(){var t=o(s.mark((function t(n){var i;return s.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._get(n);case 2:i=t.sent,e._loaded?e._update.apply(e,a(i)):e._load.apply(e,a(i));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return this._provider.on("block",t),function(){e._provider.off("block",t)}}},{key:"_reduceExtra",value:function(e,t){var n,a,i;return{blockTag:null!==(n=t.blockTag)&&void 0!==n?n:e.blockTag,blockTimestamp:null!==(a=t.blockTimestamp)&&void 0!==a?a:e.blockTimestamp,_feesFactory:null!==(i=t._feesFactory)&&void 0!==i?i:e._feesFactory}}}]),n}(y.LiquityStore);t.BlockPolledLiquityStore=f},286:function(e,t,n){"use strict";var a=n(150),i=n(180),r=n(456),s=n(85),o=n(65),u=n(79),l=n(55),c=n(48),d=n(82),p=n(83),y=n(224),b=n(5),m=b.mark(P),f=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.PopulatableEthersLiquity=t.PopulatedEthersRedemption=t.PopulatedEthersLiquityTransaction=t.SentEthersLiquityTransaction=t.EthersTransactionCancelledError=t._RawErrorReason=t._redeemMaxIterations=void 0;var h=f(n(151)),v=n(67),j=n(4),T=n(6),x=n(125),g=n(181),O=n(283),w=n(457),_=function(e,t){return(null===t||void 0===t?void 0:t.gt(e))?t:e};t._redeemMaxIterations=70;var S,k=T.Decimal.from(.005),D=T.Decimal.from(.001),L=function(){},E=function(e,t){return function(n){return e(t(n))}},A=function(e){return e},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;return function(t){return t.add(1e4+1414*Math.ceil(Math.log2(e+1)))}},I=function(e){return e.add(8e4)},R=function(e){return e.add(5e4)},M=function(e){return e.add(2e4)};function P(e){var t;return b.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:h.default(Number.isInteger(e)&&e>0);case 1:if(!e){n.next=8;break}return t=Math.min(e,2500),n.next=5,t;case 5:e-=t,n.next=1;break;case 8:case"end":return n.stop()}}),m)}!function(e){e.TRANSACTION_FAILED="transaction failed",e.TRANSACTION_CANCELLED="cancelled",e.TRANSACTION_REPLACED="replaced",e.TRANSACTION_REPRICED="repriced"}(S=t._RawErrorReason||(t._RawErrorReason={}));var B=[S.TRANSACTION_CANCELLED,S.TRANSACTION_REPLACED,S.TRANSACTION_REPRICED],U=function(e,t){return t in e},N=function(e){return U(e,"code")&&e.code===j.ErrorCode.TRANSACTION_REPLACED&&U(e,"reason")&&B.includes(e.reason)},F=function(e){d(n,e);var t=p(n);function n(e){var a;return c(this,n),h.default(e.reason!==S.TRANSACTION_REPRICED),(a=t.call(this,"Transaction ".concat(e.reason))).name="TransactionCancelledError",a.rawReplacementReceipt=e.receipt,a.rawError=e,a}return n}(y(Error));t.EthersTransactionCancelledError=F;var q=function(){function e(t,n,a){c(this,e),this.rawSentTransaction=t,this._connection=n,this._parse=a}return l(e,[{key:"_receiptFrom",value:function(e){var t=this;return e?e.status?T._successfulReceipt(e,this._parse(e),(function(){return w.logsToString(e,x._getContracts(t._connection))})):T._failedReceipt(e):T._pendingReceipt}},{key:"_waitForRawReceipt",value:function(){var e=u(b.mark((function e(t){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.rawSentTransaction.wait(t);case 3:return e.abrupt("return",e.sent);case 6:if(e.prev=6,e.t0=e.catch(0),!(e.t0 instanceof Error)){e.next=17;break}if(n=e.t0,!U(n,"code")||n.code!==j.ErrorCode.CALL_EXCEPTION||!U(n,"reason")||n.reason!==S.TRANSACTION_FAILED){e.next=11;break}return e.abrupt("return",e.t0.receipt);case 11:if(!N(e.t0)){e.next=17;break}if(!e.t0.cancelled){e.next=16;break}throw new F(e.t0);case 16:return e.abrupt("return",e.t0.receipt);case 17:throw e.t0;case 18:case"end":return e.stop()}var n}),e,this,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getReceipt",value:function(){var e=u(b.mark((function e(){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this._waitForRawReceipt(0);case 3:return e.t1=e.sent,e.abrupt("return",e.t0._receiptFrom.call(e.t0,e.t1));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"waitForReceipt",value:function(){var e=u(b.mark((function e(){var t;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=this,e.next=3,this._waitForRawReceipt();case 3:return e.t1=e.sent,t=e.t0._receiptFrom.call(e.t0,e.t1),h.default("pending"!==t.status),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.SentEthersLiquityTransaction=q;var Y=function(e,t){var n,a;if(void 0===e)return{maxBorrowingRate:null!==(n=null===t||void 0===t?void 0:t.add(k))&&void 0!==n?n:T.Decimal.ZERO,borrowingFeeDecayToleranceMinutes:10};if("number"===typeof e||"string"===typeof e||e instanceof T.Decimal)return{maxBorrowingRate:T.Decimal.from(e),borrowingFeeDecayToleranceMinutes:10};var i=e.maxBorrowingRate,r=e.borrowingFeeDecayToleranceMinutes;return{maxBorrowingRate:void 0!==i?T.Decimal.from(i):null!==(a=null===t||void 0===t?void 0:t.add(k))&&void 0!==a?a:T.Decimal.ZERO,borrowingFeeDecayToleranceMinutes:null!==r&&void 0!==r?r:10}},G=function(){function e(t,n,a,i){c(this,e),this.rawPopulatedTransaction=t,this._connection=n,this._parse=a,void 0!==i&&(this.gasHeadroom=i)}return l(e,[{key:"send",value:function(){var e=u(b.mark((function e(){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=q,e.next=3,x._requireSigner(this._connection).sendTransaction(this.rawPopulatedTransaction);case 3:return e.t1=e.sent,e.t2=this._connection,e.t3=this._parse,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3));case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();t.PopulatedEthersLiquityTransaction=G;var Q=function(e){d(n,e);var t=p(n);function n(e,a,i,r,s){var o;c(this,n);var u=x._getContracts(a).troveManager;return(o=t.call(this,e,a,(function(e){var t=e.logs;return u.extractEvents(t,"Redemption").map((function(e){var t=e.args,n=t._ETHSent,a=t._ETHFee,i=t._actualLUSDAmount,r=t._attemptedLUSDAmount;return{attemptedLUSDAmount:g.decimalify(r),actualLUSDAmount:g.decimalify(i),collateralTaken:g.decimalify(n),fee:g.decimalify(a)}}))[0]}))).attemptedLUSDAmount=i,o.redeemableLUSDAmount=r,o.isTruncated=r.lt(i),o._increaseAmountByMinimumNetDebt=s,o}return l(n,[{key:"increaseAmountByMinimumNetDebt",value:function(e){if(!this._increaseAmountByMinimumNetDebt)throw new Error("PopulatedEthersRedemption: increaseAmountByMinimumNetDebt() can only be called when amount is truncated");return this._increaseAmountByMinimumNetDebt(e)}}]),n}(G);t.PopulatedEthersRedemption=Q;var W=function(){function e(t){c(this,e),this._readable=t}return l(e,[{key:"_wrapSimpleTransaction",value:function(e){return new G(e,this._readable.connection,L)}},{key:"_wrapTroveChangeWithFees",value:function(e,t,n){var a=x._getContracts(this._readable.connection).borrowerOperations;return new G(t,this._readable.connection,(function(t){var n=t.logs,i=a.extractEvents(n,"TroveUpdated").map((function(e){var t=e.args,n=t._coll,a=t._debt;return new T.Trove(g.decimalify(n),g.decimalify(a))})),r=o(i,1)[0],s=a.extractEvents(n,"LUSDBorrowingFeePaid").map((function(e){var t=e.args._LUSDFee;return g.decimalify(t)})),u=o(s,1)[0];return{params:e,newTrove:r,fee:u}}),n)}},{key:"_wrapTroveClosure",value:function(){var e=u(b.mark((function e(t){var n,a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x._getContracts(this._readable.connection),a=n.activePool,i=n.lusdToken,e.abrupt("return",new G(t,this._readable.connection,(function(e){var t=e.logs,n=e.from,r=i.extractEvents(t,"Transfer").filter((function(e){var t=e.args,a=t.from,i=t.to;return a===n&&i===v.AddressZero})).map((function(e){var t=e.args.value;return g.decimalify(t)})),s=o(r,1)[0],u=a.extractEvents(t,"EtherSent").filter((function(e){return e.args._to===n})).map((function(e){var t=e.args._amount;return g.decimalify(t)})),l=o(u,1)[0];return{params:s.nonZero?{withdrawCollateral:l,repayLUSD:s}:{withdrawCollateral:l}}})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wrapLiquidation",value:function(e){var t=x._getContracts(this._readable.connection).troveManager;return new G(e,this._readable.connection,(function(e){var n=e.logs,a=t.extractEvents(n,"TroveLiquidated").map((function(e){return e.args._borrower})),i=t.extractEvents(n,"Liquidation").map((function(e){var t=e.args,n=t._LUSDGasCompensation,a=t._collGasCompensation,i=t._liquidatedColl,r=t._liquidatedDebt;return{collateralGasCompensation:g.decimalify(a),lusdGasCompensation:g.decimalify(n),totalLiquidated:new T.Trove(g.decimalify(i),g.decimalify(r))}})),r=o(i,1)[0];return s({liquidatedAddresses:a},r)}))}},{key:"_extractStabilityPoolGainsWithdrawalDetails",value:function(e){var t=x._getContracts(this._readable.connection).stabilityPool,n=t.extractEvents(e,"UserDepositChanged").map((function(e){var t=e.args._newDeposit;return g.decimalify(t)})),a=o(n,1)[0],i=t.extractEvents(e,"ETHGainWithdrawn").map((function(e){var t=e.args,n=t._ETH,a=t._LUSDLoss;return[g.decimalify(n),g.decimalify(a)]})),r=o(i,1),s=o(r[0],2),u=s[0],l=s[1],c=t.extractEvents(e,"LQTYPaidToDepositor").map((function(e){var t=e.args._LQTY;return g.decimalify(t)}));return{lusdLoss:l,newLUSDDeposit:a,collateralGain:u,lqtyReward:o(c,1)[0]}}},{key:"_wrapStabilityPoolGainsWithdrawal",value:function(e){var t=this;return new G(e,this._readable.connection,(function(e){var n=e.logs;return t._extractStabilityPoolGainsWithdrawalDetails(n)}))}},{key:"_wrapStabilityDepositTopup",value:function(e,t){var n=this;return new G(t,this._readable.connection,(function(t){var a=t.logs;return s(s({},n._extractStabilityPoolGainsWithdrawalDetails(a)),{},{change:e})}))}},{key:"_wrapStabilityDepositWithdrawal",value:function(){var e=u(b.mark((function e(t){var n,a,i,r=this;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x._getContracts(this._readable.connection),a=n.stabilityPool,i=n.lusdToken,e.abrupt("return",new G(t,this._readable.connection,(function(e){var t=e.logs,n=e.from,u=r._extractStabilityPoolGainsWithdrawalDetails(t),l=i.extractEvents(t,"Transfer").filter((function(e){var t=e.args,i=t.from,r=t.to;return i===a.address&&r===n})).map((function(e){var t=e.args.value;return g.decimalify(t)})),c=o(l,1)[0];return s(s({},u),{},{change:{withdrawLUSD:c,withdrawAllLUSD:u.newLUSDDeposit.isZero}})})));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"_wrapCollateralGainTransfer",value:function(e){var t=this,n=x._getContracts(this._readable.connection).borrowerOperations;return new G(e,this._readable.connection,(function(e){var a=e.logs,i=n.extractEvents(a,"TroveUpdated").map((function(e){var t=e.args,n=t._coll,a=t._debt;return new T.Trove(g.decimalify(n),g.decimalify(a))})),r=o(i,1)[0];return s(s({},t._extractStabilityPoolGainsWithdrawalDetails(a)),{},{newTrove:r})}))}},{key:"_findHintsForNominalCollateralRatio",value:function(){var e=u(b.mark((function e(t,n){var s,u,l,c,d,p,y,m,f,h,j,T,g,O,w,_,S,k;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=x._getContracts(this._readable.connection),u=s.sortedTroves,l=s.hintHelpers,e.next=3,this._readable.getNumberOfTroves();case 3:if(c=e.sent){e.next=6;break}return e.abrupt("return",[v.AddressZero,v.AddressZero]);case 6:if(!t.infinite){e.next=12;break}return e.t0=v.AddressZero,e.next=10,u.getFirst();case 10:return e.t1=e.sent,e.abrupt("return",[e.t0,e.t1]);case 12:return d=Math.ceil(10*Math.sqrt(c)),p=P(d),y=r(p),m=y[0],f=y.slice(1),h=function(e,n){var r=e.latestRandomSeed,s=e.results;return l.getApproxHint(t.hex,n,r).then((function(e){var t=e.latestRandomSeed,n=i(e,["latestRandomSeed"]);return{latestRandomSeed:t,results:[].concat(a(s),[n])}}))},e.next=17,f.reduce((function(e,t){return e.then((function(e){return h(e,t)}))}),h({latestRandomSeed:Math.floor(Math.random()*Number.MAX_SAFE_INTEGER),results:[]},m));case 17:return j=e.sent,T=j.results,g=T.reduce((function(e,t){return e.diff.lt(t.diff)?e:t})),O=g.hintAddress,e.next=22,u.findInsertPosition(t.hex,O,O);case 22:if(w=e.sent,_=o(w,2),S=_[0],k=_[1],!n){e.next=37;break}if(S!==n){e.next=33;break}return e.next=30,u.getPrev(S);case 30:S=e.sent,e.next=37;break;case 33:if(k!==n){e.next=37;break}return e.next=36,u.getNext(k);case 36:k=e.sent;case 37:return S===v.AddressZero?S=k:k===v.AddressZero&&(k=S),e.abrupt("return",[S,k]);case 39:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_findHints",value:function(){var e=u(b.mark((function e(t,n){return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t instanceof T.TroveWithPendingRedistribution)){e.next=2;break}throw new Error("Rewards must be applied to this Trove");case 2:return e.abrupt("return",this._findHintsForNominalCollateralRatio(t._nominalCollateralRatio,n));case 3:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_findRedemptionHints",value:function(){var e=u(b.mark((function e(n){var a,i,r,s,u,l,c,d,p,y,m;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.hintHelpers,e.next=3,this._readable.getPrice();case 3:return r=e.sent,e.next=6,i.getRedemptionHints(n.hex,r.hex,t._redeemMaxIterations);case 6:if(s=e.sent,u=s.firstRedemptionHint,l=s.partialRedemptionHintNICR,c=s.truncatedLUSDamount,!l.isZero()){e.next=14;break}e.t0=[v.AddressZero,v.AddressZero],e.next=17;break;case 14:return e.next=16,this._findHintsForNominalCollateralRatio(g.decimalify(l));case 16:e.t0=e.sent;case 17:return d=e.t0,p=o(d,2),y=p[0],m=p[1],e.abrupt("return",[g.decimalify(c),u,y,m,l]);case 22:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"openTrove",value:function(){var e=u(b.mark((function e(t,n,i){var r,u,l,c,d,p,y,m,f,h,v,j,g,O,w,S,k,D,L,E,A,R,M,P,B,U,N,F,q,G,Q,W,Z;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=x._getContracts(this._readable.connection),l=u.borrowerOperations,c=T._normalizeTroveCreation(t),d=c.depositCollateral,p=c.borrowLUSD,e.next=5,Promise.all([this._readable._getFeesFactory(),this._readable._getBlockTimestamp(),this._readable.getTotal(),this._readable.getPrice()]);case 5:return y=e.sent,m=o(y,4),f=m[0],h=m[1],v=m[2],j=m[3],g=v.collateralRatioIsBelowCritical(j),w=(O=function(e){return f(h+e,g).borrowingRate()})(0),S=T.Trove.create(c,w),e.next=17,this._findHints(S);case 17:if(k=e.sent,D=Y(n,w),L=D.maxBorrowingRate,E=D.borrowingFeeDecayToleranceMinutes,A=function(e){return[L.hex,e.hex].concat(a(k),[s({value:d.hex},i)])},void 0!==(null===i||void 0===i?void 0:i.gasLimit)){e.next=35;break}if(B=O(60*E),U=T.Trove.create(c,B),N=T.Trove.recreate(U,w),F=N.borrowLUSD,!U.debt.lt(T.LUSD_MINIMUM_DEBT)){e.next=26;break}throw new Error("Trove's debt might fall below ".concat(T.LUSD_MINIMUM_DEBT," ")+"within ".concat(E," minutes"));case 26:return e.next=28,Promise.all([(M=l.estimateGas).openTrove.apply(M,a(A(p))),(P=l.estimateGas).openTrove.apply(P,a(A(F)))]);case 28:q=e.sent,G=o(q,2),Q=G[0],W=G[1],Z=C(E)(_(I(Q),W)),R=Z.sub(Q).toNumber(),i=s(s({},i),{},{gasLimit:Z});case 35:return e.t0=this,e.t1=c,e.next=39,(r=l.populateTransaction).openTrove.apply(r,a(A(p)));case 39:return e.t2=e.sent,e.t3=R,e.abrupt("return",e.t0._wrapTroveChangeWithFees.call(e.t0,e.t1,e.t2,e.t3));case 42:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"closeTrove",value:function(){var e=u(b.mark((function e(t){var n,a;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x._getContracts(this._readable.connection),a=n.borrowerOperations,e.t0=this,e.next=4,a.estimateAndPopulate.closeTrove(s({},t),A);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapTroveClosure.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"depositCollateral",value:function(e,t){return this.adjustTrove({depositCollateral:e},void 0,t)}},{key:"withdrawCollateral",value:function(e,t){return this.adjustTrove({withdrawCollateral:e},void 0,t)}},{key:"borrowLUSD",value:function(e,t,n){return this.adjustTrove({borrowLUSD:e},t,n)}},{key:"repayLUSD",value:function(e,t){return this.adjustTrove({repayLUSD:e},void 0,t)}},{key:"adjustTrove",value:function(){var e=u(b.mark((function e(t,n,i){var r,u,l,c,d,p,y,m,f,h,v,j,O,w,S,k,D,L,E,A,R,M,P,B,U,N,F,q,G,Q,W,Z,H;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u=x._requireAddress(this._readable.connection,i),l=x._getContracts(this._readable.connection),c=l.borrowerOperations,d=T._normalizeTroveAdjustment(t),p=d.depositCollateral,y=d.withdrawCollateral,m=d.borrowLUSD,f=d.repayLUSD,e.next=6,Promise.all([this._readable.getTrove(u),m&&g.promiseAllValues({fees:this._readable._getFeesFactory(),blockTimestamp:this._readable._getBlockTimestamp(),total:this._readable.getTotal(),price:this._readable.getPrice()})]);case 6:return h=e.sent,v=o(h,2),j=v[0],O=v[1],S=(w=function(e){return null===O||void 0===O?void 0:O.fees(O.blockTimestamp+e,O.total.collateralRatioIsBelowCritical(O.price)).borrowingRate()})(0),k=j.adjust(d,S),e.next=15,this._findHints(k,u);case 15:if(D=e.sent,L=Y(n,S),E=L.maxBorrowingRate,A=L.borrowingFeeDecayToleranceMinutes,R=function(e){var t;return[E.hex,(null!==y&&void 0!==y?y:T.Decimal.ZERO).hex,(null!==(t=null!==e&&void 0!==e?e:f)&&void 0!==t?t:T.Decimal.ZERO).hex,!!e].concat(a(D),[s({value:null===p||void 0===p?void 0:p.hex},i)])},void 0!==(null===i||void 0===i?void 0:i.gasLimit)){e.next=34;break}if(U=w(60*A),N=j.adjust(d,U),F=j.adjustTo(N,S),q=F.borrowLUSD,!N.debt.lt(T.LUSD_MINIMUM_DEBT)){e.next=24;break}throw new Error("Trove's debt might fall below ".concat(T.LUSD_MINIMUM_DEBT," ")+"within ".concat(A," minutes"));case 24:return e.next=26,Promise.all([(P=c.estimateGas).adjustTrove.apply(P,a(R(m))),m&&(B=c.estimateGas).adjustTrove.apply(B,a(R(q)))]);case 26:G=e.sent,Q=o(G,2),W=Q[0],Z=Q[1],H=_(I(W),Z),m&&(H=C(A)(H)),M=H.sub(W).toNumber(),i=s(s({},i),{},{gasLimit:H});case 34:return e.t0=this,e.t1=d,e.next=38,(r=c.populateTransaction).adjustTrove.apply(r,a(R(m)));case 38:return e.t2=e.sent,e.t3=M,e.abrupt("return",e.t0._wrapTroveChangeWithFees.call(e.t0,e.t1,e.t2,e.t3));case 41:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"claimCollateralSurplus",value:function(){var e=u(b.mark((function e(t){var n,a;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x._getContracts(this._readable.connection),a=n.borrowerOperations,e.t0=this,e.next=4,a.estimateAndPopulate.claimCollateral(s({},t),A);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setPrice",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=x._getContracts(this._readable.connection),i=a.priceFeed,O._priceFeedIsTestnet(i)){e.next=3;break}throw new Error("setPrice() unavailable on this deployment of Liquity");case 3:return e.t0=this,e.next=6,i.estimateAndPopulate.setPrice(s({},n),A,T.Decimal.from(t).hex);case 6:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"liquidate",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=x._getContracts(this._readable.connection),i=a.troveManager,!Array.isArray(t)){e.next=9;break}return e.t0=this,e.next=5,i.estimateAndPopulate.batchLiquidateTroves(s({},n),R,t);case 5:return e.t1=e.sent,e.abrupt("return",e.t0._wrapLiquidation.call(e.t0,e.t1));case 9:return e.t2=this,e.next=12,i.estimateAndPopulate.liquidate(s({},n),R,t);case 12:return e.t3=e.sent,e.abrupt("return",e.t2._wrapLiquidation.call(e.t2,e.t3));case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"liquidateUpTo",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.troveManager,e.t0=this,e.next=4,i.estimateAndPopulate.liquidateTroves(s({},n),R,t);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapLiquidation.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"depositLUSDInStabilityPool",value:function(){var e=u(b.mark((function e(t,n,a){var i,r,o,u;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=x._getContracts(this._readable.connection),o=r.stabilityPool,u=T.Decimal.from(t),e.t0=this,e.t1={depositLUSD:u},e.next=6,o.estimateAndPopulate.provideToSP(s({},a),R,u.hex,null!==(i=null!==n&&void 0!==n?n:this._readable.connection.frontendTag)&&void 0!==i?i:v.AddressZero);case 6:return e.t2=e.sent,e.abrupt("return",e.t0._wrapStabilityDepositTopup.call(e.t0,e.t1,e.t2));case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"withdrawLUSDFromStabilityPool",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.stabilityPool,e.t0=this,e.next=4,i.estimateAndPopulate.withdrawFromSP(s({},n),R,T.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapStabilityDepositWithdrawal.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawGainsFromStabilityPool",value:function(){var e=u(b.mark((function e(t){var n,a;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x._getContracts(this._readable.connection),a=n.stabilityPool,e.t0=this,e.next=4,a.estimateAndPopulate.withdrawFromSP(s({},t),R,T.Decimal.ZERO.hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapStabilityPoolGainsWithdrawal.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"transferCollateralGainToTrove",value:function(){var e=u(b.mark((function e(t){var n,i,r,u,l,c,d,p,y;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x._requireAddress(this._readable.connection,t),r=x._getContracts(this._readable.connection),u=r.stabilityPool,e.next=4,Promise.all([this._readable.getTrove(i),this._readable.getStabilityDeposit(i)]);case 4:return l=e.sent,c=o(l,2),d=c[0],p=c[1],y=d.addCollateral(p.collateralGain),e.t0=this,e.t1=(n=u.estimateAndPopulate).withdrawETHGainToTrove,e.t2=n,e.t3=[s({},t),E(I,R)],e.t4=a,e.next=16,this._findHints(y,i);case 16:return e.t5=e.sent,e.t6=(0,e.t4)(e.t5),e.t7=e.t3.concat.call(e.t3,e.t6),e.next=21,e.t1.apply.call(e.t1,e.t2,e.t7);case 21:return e.t8=e.sent,e.abrupt("return",e.t0._wrapCollateralGainTransfer.call(e.t0,e.t8));case 23:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"sendLUSD",value:function(){var e=u(b.mark((function e(t,n,a){var i,r;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x._getContracts(this._readable.connection),r=i.lusdToken,e.t0=this,e.next=4,r.estimateAndPopulate.transfer(s({},a),A,t,T.Decimal.from(n).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"sendLQTY",value:function(){var e=u(b.mark((function e(t,n,a){var i,r;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=x._getContracts(this._readable.connection),r=i.lqtyToken,e.t0=this,e.next=4,r.estimateAndPopulate.transfer(s({},a),A,t,T.Decimal.from(n).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"redeemLUSD",value:function(){var e=u(b.mark((function e(n,i,l){var c,d,p,y,m,f,h,j,g,O,w,_,S,k=this;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=x._getContracts(this._readable.connection),d=c.troveManager,p=T.Decimal.from(n),e.next=4,Promise.all([this._readable.getFees(),this._readable.getTotal(),this._findRedemptionHints(p)]);case 4:if(y=e.sent,m=o(y,3),f=m[0],h=m[1],j=r(m[2]),g=j[0],O=j[1],w=j.slice(2),!g.isZero){e.next=14;break}throw new Error("redeemLUSD: amount too low to redeem (try at least ".concat(T.LUSD_MINIMUM_NET_DEBT,")"));case 14:return _=function(e){return T.Decimal.min(f.redemptionRate(e.div(h.debt)).add(D),T.Decimal.ONE)},S=function(){var e=u(b.mark((function e(n,i){var r,o,u,c,p=arguments;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=p.length>2&&void 0!==p[2]?p[2]:n,u=p.length>3&&void 0!==p[3]?p[3]:[v.AddressZero,v.AddressZero,0],c=void 0!==i?T.Decimal.from(i):_(o),e.t0=Q,e.next=6,(r=d.estimateAndPopulate).redeemCollateral.apply(r,[s({},l),C(),o.hex,O].concat(a(u),[t._redeemMaxIterations,c.hex]));case 6:return e.t1=e.sent,e.t2=k._readable.connection,e.t3=n,e.t4=o,e.t5=o.lt(n)?function(e){return S(o.add(T.LUSD_MINIMUM_NET_DEBT),null!==e&&void 0!==e?e:i)}:void 0,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4,e.t5));case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.abrupt("return",S(p,i,g,w));case 17:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"stakeLQTY",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.lqtyStaking,e.t0=this,e.next=4,i.estimateAndPopulate.stake(s({},n),A,T.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unstakeLQTY",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.lqtyStaking,e.t0=this,e.next=4,i.estimateAndPopulate.unstake(s({},n),A,T.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawGainsFromStaking",value:function(e){return this.unstakeLQTY(T.Decimal.ZERO,e)}},{key:"registerFrontend",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.stabilityPool,e.t0=this,e.next=4,i.estimateAndPopulate.registerFrontEnd(s({},n),A,T.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"_mintUniToken",value:function(){var e=u(b.mark((function e(t,n,a){var i,r;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n&&void 0!==n||(n=x._requireAddress(this._readable.connection,a)),i=x._getContracts(this._readable.connection),r=i.uniToken,O._uniTokenIsMock(r)){e.next=4;break}throw new Error("_mintUniToken() unavailable on this deployment of Liquity");case 4:return e.t0=this,e.next=7,r.estimateAndPopulate.mint(s({},a),A,n,T.Decimal.from(t).hex);case 7:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 9:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"approveUniTokens",value:function(){var e=u(b.mark((function e(t,n){var a,i,r;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.uniToken,r=a.unipool,e.t0=this,e.next=4,i.estimateAndPopulate.approve(s({},n),A,r.address,T.Decimal.from(null!==t&&void 0!==t?t:T.Decimal.INFINITY).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"stakeUniTokens",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.unipool,e.t0=this,e.next=4,i.estimateAndPopulate.stake(s({},n),M,T.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"unstakeUniTokens",value:function(){var e=u(b.mark((function e(t,n){var a,i;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=x._getContracts(this._readable.connection),i=a.unipool,e.t0=this,e.next=4,i.estimateAndPopulate.withdraw(s({},n),M,T.Decimal.from(t).hex);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"withdrawLQTYRewardFromLiquidityMining",value:function(){var e=u(b.mark((function e(t){var n,a;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x._getContracts(this._readable.connection),a=n.unipool,e.t0=this,e.next=4,a.estimateAndPopulate.claimReward(s({},t),M);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"exitLiquidityMining",value:function(){var e=u(b.mark((function e(t){var n,a;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=x._getContracts(this._readable.connection),a=n.unipool,e.t0=this,e.next=4,a.estimateAndPopulate.withdrawAndClaim(s({},t),M);case 4:return e.t1=e.sent,e.abrupt("return",e.t0._wrapSimpleTransaction.call(e.t0,e.t1));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t.PopulatableEthersLiquity=W},287:function(e,t,n){"use strict";var a=n(5),i=n(79),r=n(48),s=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.SendableEthersLiquity=void 0;var o=function(e){return e.send()},u=function(){function e(t){r(this,e),this._populate=t}return s(e,[{key:"openTrove",value:function(){var e=i(a.mark((function e(t,n,i){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this._populate.openTrove(t,n,i).then(o));case 1:case"end":return e.stop()}}),e,this)})));return function(t,n,a){return e.apply(this,arguments)}}()},{key:"closeTrove",value:function(e){return this._populate.closeTrove(e).then(o)}},{key:"adjustTrove",value:function(e,t,n){return this._populate.adjustTrove(e,t,n).then(o)}},{key:"depositCollateral",value:function(e,t){return this._populate.depositCollateral(e,t).then(o)}},{key:"withdrawCollateral",value:function(e,t){return this._populate.withdrawCollateral(e,t).then(o)}},{key:"borrowLUSD",value:function(e,t,n){return this._populate.borrowLUSD(e,t,n).then(o)}},{key:"repayLUSD",value:function(e,t){return this._populate.repayLUSD(e,t).then(o)}},{key:"setPrice",value:function(e,t){return this._populate.setPrice(e,t).then(o)}},{key:"liquidate",value:function(e,t){return this._populate.liquidate(e,t).then(o)}},{key:"liquidateUpTo",value:function(e,t){return this._populate.liquidateUpTo(e,t).then(o)}},{key:"depositLUSDInStabilityPool",value:function(e,t,n){return this._populate.depositLUSDInStabilityPool(e,t,n).then(o)}},{key:"withdrawLUSDFromStabilityPool",value:function(e,t){return this._populate.withdrawLUSDFromStabilityPool(e,t).then(o)}},{key:"withdrawGainsFromStabilityPool",value:function(e){return this._populate.withdrawGainsFromStabilityPool(e).then(o)}},{key:"transferCollateralGainToTrove",value:function(e){return this._populate.transferCollateralGainToTrove(e).then(o)}},{key:"sendLUSD",value:function(e,t,n){return this._populate.sendLUSD(e,t,n).then(o)}},{key:"sendLQTY",value:function(e,t,n){return this._populate.sendLQTY(e,t,n).then(o)}},{key:"redeemLUSD",value:function(e,t,n){return this._populate.redeemLUSD(e,t,n).then(o)}},{key:"claimCollateralSurplus",value:function(e){return this._populate.claimCollateralSurplus(e).then(o)}},{key:"stakeLQTY",value:function(e,t){return this._populate.stakeLQTY(e,t).then(o)}},{key:"unstakeLQTY",value:function(e,t){return this._populate.unstakeLQTY(e,t).then(o)}},{key:"withdrawGainsFromStaking",value:function(e){return this._populate.withdrawGainsFromStaking(e).then(o)}},{key:"registerFrontend",value:function(e,t){return this._populate.registerFrontend(e,t).then(o)}},{key:"_mintUniToken",value:function(e,t,n){return this._populate._mintUniToken(e,t,n).then(o)}},{key:"approveUniTokens",value:function(e,t){return this._populate.approveUniTokens(e,t).then(o)}},{key:"stakeUniTokens",value:function(e,t){return this._populate.stakeUniTokens(e,t).then(o)}},{key:"unstakeUniTokens",value:function(e,t){return this._populate.unstakeUniTokens(e,t).then(o)}},{key:"withdrawLQTYRewardFromLiquidityMining",value:function(e){return this._populate.withdrawLQTYRewardFromLiquidityMining(e).then(o)}},{key:"exitLiquidityMining",value:function(e){return this._populate.exitLiquidityMining(e).then(o)}}]),e}();t.SendableEthersLiquity=u},296:function(e,t,n){"use strict";var a=n(65),i=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),r=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&i(t,e,n);return r(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.LiquityStoreProvider=t.LiquityStoreContext=void 0;var o=s(n(1));t.LiquityStoreContext=o.createContext(void 0);t.LiquityStoreProvider=function(e){var n=e.store,i=e.loader,r=e.children,s=o.useState(),u=a(s,2),l=u[0],c=u[1];return o.useEffect((function(){n.onLoaded=function(){return c(n)};var e=n.start();return function(){n.onLoaded=void 0,c(void 0),e()}}),[n]),l?o.default.createElement(t.LiquityStoreContext.Provider,{value:l},r):o.default.createElement(o.default.Fragment,null,i)}},297:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.equals=void 0;var a=function(e,t){var n=Object.keys(e),a=Object.keys(t);return n.length===a.length&&n.every((function(n){return function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}(t,n)&&Object.is(e[n],t[n])}))},i=function(e){return null!==e&&"object"===typeof e};t.equals=function(e,t){return i(e)&&i(t)?a(e,t):Object.is(e,t)}},342:function(e,t,n){"use strict";(function(e){n.d(t,"a",(function(){return o}));var a=n(2),i=n(72),r=n(254),s=n(6);class o{constructor(e,t,n=100){this.url=void 0,this.id=0,this.wallet=void 0,this.funderWallet=void 0,this.ethAmount=void 0,this.haveFunded=!1,this.url=e,this.wallet=i.Wallet.createRandom(),this.funderWallet=new i.Wallet(t),this.ethAmount=s.Decimal.from(n)}findWallet(e){const t=[this.wallet,this.funderWallet].find((t=>t.address.toLowerCase()===e.toLowerCase()));if(!t)throw new Error(`Unknow account ${e}`);return t}async fund(){return this.send("eth_sendTransaction",[{from:this.funderWallet.address,to:this.wallet.address,value:this.ethAmount.hex,gas:Object(a.hexlify)(21e3)}])}async send(t,n){switch(this.haveFunded||(this.haveFunded=!0,await this.fund()),t){case"eth_accounts":case"eth_requestAccounts":return[this.wallet.address];case"eth_signTypedData_v4":{const t=this.findWallet(n[0]).privateKey.slice(2),a=e.from(t,"hex");return await Object(r.signTypedData)({privateKey:a,data:JSON.parse(n[1]),version:r.SignTypedDataVersion.V4})}case"eth_sendTransaction":return this.send("eth_sendRawTransaction",await Promise.all(n.map((async({from:e,nonce:t,gas:n,...a})=>(void 0===t&&(t=await this.send("eth_getTransactionCount",[e])),this.findWallet(e).signTransaction({from:e,nonce:t,...void 0!==n?{gasLimit:n}:{},...a}))))))}const a=await fetch(this.url,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({method:t,params:n,id:this.id++,jsonrpc:"2.0"})}),i=await a.json();if(i.error){const{message:e,...t}=i.error,n=new Error(`${e} ${JSON.stringify(t)}`);throw Object.assign(n,t)}return i.result}request({method:e,params:t}){return this.send(e,t)}}}).call(this,n(66).Buffer)},343:function(e,t){},366:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"LUSDTokenBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"domainSeparator","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"permitTypeHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_poolAddress","type":"address"},{"internalType":"address","name":"_receiver","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"returnFromPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"address","name":"_poolAddress","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendToPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stabilityPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')},392:function(e,t,n){},393:function(e,t,n){"use strict";var a=n(5),i=n(65),r=n(79),s=n(48),o=n(55),u=n(220),l=n(123),c=n(82),d=n(83);Object.defineProperty(t,"__esModule",{value:!0}),t.BatchedWebSocketAugmentedWeb3Provider=t.Batched=t.isBatchedProvider=void 0;var p=n(24),y=n(88),b=n(3),m=n(277),f={1:"0xeefBa1e63905eF1D7ACbA5a8513c70307C1cE441",3:"0x53C43764255c17BD724F74c4eF150724AC50a3ed",4:"0x42Ad527de7d4e9d9d011aC45B31D8551f8Fe9821",5:"0x77dCa2C955b15e9dE4dbBCf1246B4B85b651e50e",42:"0x2cc8688C5f75E365aaEEb4ea8D6a480405A48D2A"},h=[{type:"function",name:"aggregate",stateMutability:"nonpayable",constant:!1,payable:!1,inputs:[{components:[{name:"target",type:"address"},{name:"callData",type:"bytes"}],name:"calls",type:"tuple[]"}],outputs:[{name:"blockNumber",type:"uint256"},{name:"returnData",type:"bytes[]"}]},{type:"function",name:"getEthBalance",stateMutability:"view",constant:!0,payable:!1,inputs:[{name:"addr",type:"address"}],outputs:[{name:"balance",type:"uint256"}]}],v=function(e){return void 0===e.gasLimit&&void 0===e.gasPrice&&void 0===e.value},j=function(e,t){return e.to===t&&"string"===typeof e.data&&e.data.startsWith("0x252dba42")},T=[];t.isBatchedProvider=function(e){return T.some((function(t){return e instanceof t}))};t.Batched=function(e){var t=function(e){c(n,e);var t=d(n);function n(){var e;return s(this,n),(e=t.apply(this,arguments)).batchingDelayMs=10,e._chainId=0,e._batched={calls:[],callbacks:[]},e._numberOfBatchedCalls=0,e._numberOfActualCalls=0,e}return o(n,[{key:"chainId",get:function(){return this._chainId},set:function(e){if(this._multicall)throw new Error("can only set chainId once");(function(e){return e in f})(e)&&(this._multicall=new y.Contract(f[e],h,this)),this._chainId=e}},{key:"_dispatchCalls",value:function(){var e=r(a.mark((function e(){var t,r,s,o,c;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this._batched,r=t.calls,s=t.callbacks,o=t.blockTag,this._batched={calls:[],callbacks:[]},e.prev=2,!(r.length>1)){e.next=9;break}return e.next=6,this._multicall.callStatic.aggregate(r,{blockTag:o}).then((function(e){return e.returnData}));case 6:e.t0=e.sent,e.next=13;break;case 9:return e.next=11,u(l(n.prototype),"call",this).call(this,{to:r[0].target,data:r[0].callData},o);case 11:e.t1=e.sent,e.t0=[e.t1];case 13:c=e.t0,s.forEach((function(e,t){return(0,i(e,1)[0])(c[t])})),e.next=20;break;case 17:e.prev=17,e.t2=e.catch(2),s.forEach((function(t){return(0,i(t,2)[1])(e.t2)}));case 20:case"end":return e.stop()}}),e,this,[[2,17]])})));return function(){return e.apply(this,arguments)}}()},{key:"_enqueueCall",value:function(e){var t=this;return void 0!==this._timeoutId&&clearTimeout(this._timeoutId),this._batched.calls.push(e),this._timeoutId=setTimeout((function(){return t._dispatchCalls()}),this.batchingDelayMs),new Promise((function(e,n){return t._batched.callbacks.push([e,n])}))}},{key:"_alreadyBatchedCallsConflictWith",value:function(e){var t;return 0!==this._batched.calls.length&&(null!==e&&void 0!==e?e:"latest")!==(null!==(t=this._batched.blockTag)&&void 0!==t?t:"latest")}},{key:"call",value:function(){var e=r(a.mark((function e(t,r){var s,o,c,d,p;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._multicall){e.next=4;break}return e.abrupt("return",u(l(n.prototype),"call",this).call(this,t,r));case 4:s=(new Date).getTime(),void 0===this._timeOfLastRatioCheck?this._timeOfLastRatioCheck=s:s-this._timeOfLastRatioCheck>=1e4&&this._numberOfActualCalls&&(this._numberOfBatchedCalls=0,this._numberOfActualCalls=0,this._timeOfLastRatioCheck=s);case 6:return e.next=8,Promise.all([b.resolveProperties(t),r]);case 8:if(o=e.sent,c=i(o,2),d=c[0],p=c[1],!j(d,this._multicall.address)&&v(d)&&!this._alreadyBatchedCallsConflictWith(p)){e.next=17;break}return this._numberOfActualCalls++,e.abrupt("return",u(l(n.prototype),"call",this).call(this,d,p));case 17:return this._numberOfBatchedCalls++,0===this._batched.calls.length&&(this._batched.blockTag=p),e.abrupt("return",this._enqueueCall({target:d.to,callData:d.data}));case 20:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getBalance",value:function(){var e=r(a.mark((function e(t,r){var s,o,c,d,y,b,m;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([t,r]);case 2:if(s=e.sent,o=i(s,2),c=o[0],d=o[1],p.isAddress(c)&&this._multicall){e.next=8;break}return e.abrupt("return",u(l(n.prototype),"getBalance",this).call(this,c,r));case 8:return e.next=10,this._multicall.functions.getEthBalance(c,{blockTag:d});case 10:return y=e.sent,b=i(y,1),m=b[0],e.abrupt("return",m);case 14:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),n}(e);return T.push(t),t},t.BatchedWebSocketAugmentedWeb3Provider=t.Batched(m.WebSocketAugmentedWeb3Provider)},399:function(e,t){},415:function(e,t,n){"use strict";var a=n(220),i=n(123),r=n(82),s=n(83),o=n(48),u=n(55),l=n(85),c=n(65),d=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TroveWithPendingRedistribution=t.UserTrove=t._emptyTrove=t.Trove=t._normalizeTroveAdjustment=t._normalizeTroveCreation=void 0;var p=d(n(151)),y=n(126),b=n(226),m=function(e,t){return{type:"invalidCreation",invalidTrove:e,error:t}},f=function(e){return{type:"creation",params:e}},h=function(e){return{type:"closure",params:e}},v=function(e,t){return{type:"adjustment",params:e,setToZero:t}},j=function(e){return void 0!==e[1]},T=["depositCollateral","borrowLUSD"];var x=function(e){var t=c(e,2),n=t[0],a=t[1];return[n,y.Decimal.from(a)]},g=function(e){return!c(e,2)[1].isZero};t._normalizeTroveCreation=function(e){var t=Object.entries(e).filter(j);return function(e){var t=e.filter((function(e){var t=c(e,1)[0];return!T.includes(t)})).map((function(e){var t=c(e,1)[0];return"'".concat(t,"'")}));if(t.length>0)throw new Error("TroveCreationParams: property ".concat(t.join(", ")," not allowed"))}(t),function(e){var t=Object.fromEntries(e),n=T.filter((function(e){return!(e in t)})).map((function(e){return"'".concat(e,"'")}));if(n.length>0)throw new Error("TroveCreationParams: property ".concat(n.join(", ")," missing"));return t}(t.map(x))};var O=["depositCollateral","withdrawCollateral","borrowLUSD","repayLUSD"];var w=function(e){var t=Object.fromEntries(e),n=function(e){var t=e.depositCollateral,n=e.withdrawCollateral;if(void 0!==t&&void 0!==n)throw new Error("TroveAdjustmentParams: 'depositCollateral' and 'withdrawCollateral' can't be present at the same time");return void 0!==t?{depositCollateral:t}:void 0!==n?{withdrawCollateral:n}:void 0}(t),a=function(e){var t=e.borrowLUSD,n=e.repayLUSD;if(void 0!==t&&void 0!==n)throw new Error("TroveAdjustmentParams: 'borrowLUSD' and 'repayLUSD' can't be present at the same time");return void 0!==t?{borrowLUSD:t}:void 0!==n?{repayLUSD:n}:void 0}(t);if(void 0!==n&&void 0!==a)return l(l({},n),a);if(void 0!==n)return n;if(void 0!==a)return a;throw new Error("TroveAdjustmentParams: must include at least one non-zero parameter")};t._normalizeTroveAdjustment=function(e){var t=Object.entries(e).filter(j);!function(e){var t=e.filter((function(e){var t=c(e,1)[0];return!O.includes(t)})).map((function(e){var t=c(e,1)[0];return"'".concat(t,"'")}));if(t.length>0)throw new Error("TroveAdjustmentParams: property ".concat(t.join(", ")," not allowed"))}(t);var n=t.map(x).filter(g);return w(n)};var _=function(e,t){return t.mul(y.Decimal.ONE.add(e))},S=function(e,t){return t._divCeil(y.Decimal.ONE.add(e))},k=y.Decimal.from(100),D=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.Decimal.ZERO,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.Decimal.ZERO;o(this,e),this.collateral=t,this.debt=n}return u(e,[{key:"isEmpty",get:function(){return this.collateral.isZero&&this.debt.isZero}},{key:"netDebt",get:function(){if(this.debt.lt(b.LUSD_LIQUIDATION_RESERVE))throw new Error("netDebt should not be used when debt < ".concat(b.LUSD_LIQUIDATION_RESERVE));return this.debt.sub(b.LUSD_LIQUIDATION_RESERVE)}},{key:"_nominalCollateralRatio",get:function(){return this.collateral.mulDiv(k,this.debt)}},{key:"collateralRatio",value:function(e){return this.collateral.mulDiv(e,this.debt)}},{key:"collateralRatioIsBelowMinimum",value:function(e){return this.collateralRatio(e).lt(b.MINIMUM_COLLATERAL_RATIO)}},{key:"collateralRatioIsBelowCritical",value:function(e){return this.collateralRatio(e).lt(b.CRITICAL_COLLATERAL_RATIO)}},{key:"isOpenableInRecoveryMode",value:function(e){return this.collateralRatio(e).gte(b.CRITICAL_COLLATERAL_RATIO)}},{key:"toString",value:function(){return"{ collateral: ".concat(this.collateral,", debt: ").concat(this.debt," }")}},{key:"equals",value:function(e){return this.collateral.eq(e.collateral)&&this.debt.eq(e.debt)}},{key:"add",value:function(t){return new e(this.collateral.add(t.collateral),this.debt.add(t.debt))}},{key:"addCollateral",value:function(t){return new e(this.collateral.add(t),this.debt)}},{key:"addDebt",value:function(t){return new e(this.collateral,this.debt.add(t))}},{key:"subtract",value:function(t){var n=t.collateral,a=t.debt;return new e(this.collateral.gt(n)?this.collateral.sub(n):y.Decimal.ZERO,this.debt.gt(a)?this.debt.sub(a):y.Decimal.ZERO)}},{key:"subtractCollateral",value:function(t){return new e(this.collateral.gt(t)?this.collateral.sub(t):y.Decimal.ZERO,this.debt)}},{key:"subtractDebt",value:function(t){return new e(this.collateral,this.debt.gt(t)?this.debt.sub(t):y.Decimal.ZERO)}},{key:"multiply",value:function(t){return new e(this.collateral.mul(t),this.debt.mul(t))}},{key:"setCollateral",value:function(t){return new e(y.Decimal.from(t),this.debt)}},{key:"setDebt",value:function(t){return new e(this.collateral,y.Decimal.from(t))}},{key:"_debtChange",value:function(e,t){var n=e.debt;return n.gt(this.debt)?{borrowLUSD:S(t,n.sub(this.debt))}:{repayLUSD:this.debt.sub(n)}}},{key:"_collateralChange",value:function(e){var t=e.collateral;return t.gt(this.collateral)?{depositCollateral:t.sub(this.collateral)}:{withdrawCollateral:this.collateral.sub(t)}}},{key:"whatChanged",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.MINIMUM_BORROWING_RATE;if(!this.collateral.eq(e.collateral)||!this.debt.eq(e.debt))return this.isEmpty?e.debt.lt(b.LUSD_LIQUIDATION_RESERVE)?m(e,"missingLiquidationReserve"):f({depositCollateral:e.collateral,borrowLUSD:S(n,e.netDebt)}):e.isEmpty?h(this.netDebt.nonZero?{withdrawCollateral:this.collateral,repayLUSD:this.netDebt}:{withdrawCollateral:this.collateral}):this.collateral.eq(e.collateral)?v(this._debtChange(e,n),e.debt.zero&&"debt"):this.debt.eq(e.debt)?v(this._collateralChange(e),e.collateral.zero&&"collateral"):v(l(l({},this._debtChange(e,n)),this._collateralChange(e)),null!==(t=e.debt.zero&&"debt")&&void 0!==t?t:e.collateral.zero&&"collateral")}},{key:"apply",value:function(n){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:b.MINIMUM_BORROWING_RATE;if(!n)return this;switch(n.type){case"invalidCreation":if(!this.isEmpty)throw new Error("Can't create onto existing Trove");return n.invalidTrove;case"creation":if(!this.isEmpty)throw new Error("Can't create onto existing Trove");var i=n.params,r=i.depositCollateral,s=i.borrowLUSD;return new e(r,b.LUSD_LIQUIDATION_RESERVE.add(_(a,s)));case"closure":if(this.isEmpty)throw new Error("Can't close empty Trove");return t._emptyTrove;case"adjustment":var o=n.setToZero,u=n.params,l=u.depositCollateral,c=u.withdrawCollateral,d=u.borrowLUSD,p=u.repayLUSD,m=null!==c&&void 0!==c?c:y.Decimal.ZERO,f=null!==l&&void 0!==l?l:y.Decimal.ZERO,h=null!==p&&void 0!==p?p:y.Decimal.ZERO,v=d?_(a,d):y.Decimal.ZERO;return"collateral"===o?this.setCollateral(y.Decimal.ZERO).addDebt(v).subtractDebt(h):"debt"===o?this.setDebt(y.Decimal.ZERO).addCollateral(f).subtractCollateral(m):this.add(new e(f,v)).subtract(new e(m,h))}}},{key:"adjust",value:function(e,n){return this.apply(v(t._normalizeTroveAdjustment(e)),n)}},{key:"adjustTo",value:function(e,t){var n=this.whatChanged(e,t);return p.default("adjustment"===(null===n||void 0===n?void 0:n.type)),n.params}}],[{key:"create",value:function(e,n){return t._emptyTrove.apply(f(t._normalizeTroveCreation(e)),n)}},{key:"recreate",value:function(e,n){var a=t._emptyTrove.whatChanged(e,n);return p.default("creation"===(null===a||void 0===a?void 0:a.type)),a.params}}]),e}();t.Trove=D,t._emptyTrove=new D;var L=function(e){r(n,e);var t=s(n);function n(e,a,i,r){var s;return o(this,n),(s=t.call(this,i,r)).ownerAddress=e,s.status=a,s}return u(n,[{key:"equals",value:function(e){return a(i(n.prototype),"equals",this).call(this,e)&&this.ownerAddress===e.ownerAddress&&this.status===e.status}},{key:"toString",value:function(){return'{ ownerAddress: "'.concat(this.ownerAddress,'"')+", collateral: ".concat(this.collateral)+", debt: ".concat(this.debt)+', status: "'.concat(this.status,'" }')}}]),n}(D);t.UserTrove=L;var E=function(e){r(l,e);var n=s(l);function l(e,a,i,r){var s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:y.Decimal.ZERO,c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:t._emptyTrove;return o(this,l),(s=n.call(this,e,a,i,r)).stake=u,s.snapshotOfTotalRedistributed=c,s}return u(l,[{key:"applyRedistribution",value:function(e){var t=this.add(e.subtract(this.snapshotOfTotalRedistributed).multiply(this.stake));return new L(this.ownerAddress,this.status,t.collateral,t.debt)}},{key:"equals",value:function(e){return a(i(l.prototype),"equals",this).call(this,e)&&this.stake.eq(e.stake)&&this.snapshotOfTotalRedistributed.equals(e.snapshotOfTotalRedistributed)}}]),l}(L);t.TroveWithPendingRedistribution=E},416:function(e,t,n){"use strict";var a=n(48),i=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.StabilityDeposit=void 0;var r=n(126),s=function(){function e(t,n,i,r,s){if(a(this,e),this.initialLUSD=t,this.currentLUSD=n,this.collateralGain=i,this.lqtyReward=r,this.frontendTag=s,this.currentLUSD.gt(this.initialLUSD))throw new Error("currentLUSD can't be greater than initialLUSD")}return i(e,[{key:"isEmpty",get:function(){return this.initialLUSD.isZero&&this.currentLUSD.isZero&&this.collateralGain.isZero&&this.lqtyReward.isZero}},{key:"toString",value:function(){return"{ initialLUSD: ".concat(this.initialLUSD)+", currentLUSD: ".concat(this.currentLUSD)+", collateralGain: ".concat(this.collateralGain)+", lqtyReward: ".concat(this.lqtyReward)+', frontendTag: "'.concat(this.frontendTag,'" }')}},{key:"equals",value:function(e){return this.initialLUSD.eq(e.initialLUSD)&&this.currentLUSD.eq(e.currentLUSD)&&this.collateralGain.eq(e.collateralGain)&&this.lqtyReward.eq(e.lqtyReward)&&this.frontendTag===e.frontendTag}},{key:"whatChanged",value:function(e){return(e=r.Decimal.from(e)).lt(this.currentLUSD)?{withdrawLUSD:this.currentLUSD.sub(e),withdrawAllLUSD:e.isZero}:e.gt(this.currentLUSD)?{depositLUSD:e.sub(this.currentLUSD)}:void 0}},{key:"apply",value:function(e){return e?void 0!==e.withdrawLUSD?e.withdrawAllLUSD||this.currentLUSD.lte(e.withdrawLUSD)?r.Decimal.ZERO:this.currentLUSD.sub(e.withdrawLUSD):this.currentLUSD.add(e.depositLUSD):this.currentLUSD}}]),e}();t.StabilityDeposit=s},417:function(e,t,n){"use strict";var a=n(48),i=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.LQTYStake=void 0;var r=n(126),s=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Decimal.ZERO,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Decimal.ZERO,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Decimal.ZERO;a(this,e),this.stakedLQTY=t,this.collateralGain=n,this.lusdGain=i}return i(e,[{key:"isEmpty",get:function(){return this.stakedLQTY.isZero&&this.collateralGain.isZero&&this.lusdGain.isZero}},{key:"toString",value:function(){return"{ stakedLQTY: ".concat(this.stakedLQTY)+", collateralGain: ".concat(this.collateralGain)+", lusdGain: ".concat(this.lusdGain," }")}},{key:"equals",value:function(e){return this.stakedLQTY.eq(e.stakedLQTY)&&this.collateralGain.eq(e.collateralGain)&&this.lusdGain.eq(e.lusdGain)}},{key:"whatChanged",value:function(e){return(e=r.Decimal.from(e)).lt(this.stakedLQTY)?{unstakeLQTY:this.stakedLQTY.sub(e),unstakeAllLQTY:e.isZero}:e.gt(this.stakedLQTY)?{stakeLQTY:e.sub(this.stakedLQTY)}:void 0}},{key:"apply",value:function(e){return e?void 0!==e.unstakeLQTY?e.unstakeAllLQTY||this.stakedLQTY.lte(e.unstakeLQTY)?r.Decimal.ZERO:this.stakedLQTY.sub(e.unstakeLQTY):this.stakedLQTY.add(e.stakeLQTY):this.stakedLQTY}}]),e}();t.LQTYStake=s},418:function(e,t,n){"use strict";var a=n(48),i=n(55),r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.Fees=void 0;var s=r(n(151)),o=n(126),u=n(226),l=function(){function e(t,n,i,r,u,l){a(this,e),this._baseRateWithoutDecay=o.Decimal.from(t),this._minuteDecayFactor=o.Decimal.from(n),this._beta=o.Decimal.from(i),this._lastFeeOperation=r,this._timeOfLatestBlock=u,this._recoveryMode=l,s.default(this._minuteDecayFactor.lt(1))}return i(e,[{key:"_setRecoveryMode",value:function(t){return new e(this._baseRateWithoutDecay,this._minuteDecayFactor,this._beta,this._lastFeeOperation,this._timeOfLatestBlock,t)}},{key:"equals",value:function(e){return this._baseRateWithoutDecay.eq(e._baseRateWithoutDecay)&&this._minuteDecayFactor.eq(e._minuteDecayFactor)&&this._beta.eq(e._beta)&&this._lastFeeOperation.getTime()===e._lastFeeOperation.getTime()&&this._timeOfLatestBlock.getTime()===e._timeOfLatestBlock.getTime()&&this._recoveryMode===e._recoveryMode}},{key:"toString",value:function(){return"{ baseRateWithoutDecay: ".concat(this._baseRateWithoutDecay)+', lastFeeOperation: "'.concat(this._lastFeeOperation.toLocaleString(),'"')+", recoveryMode: ".concat(this._recoveryMode," } ")}},{key:"baseRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._timeOfLatestBlock,t=Math.max(e.getTime()-this._lastFeeOperation.getTime(),0),n=Math.floor(t/6e4);return this._minuteDecayFactor.pow(n).mul(this._baseRateWithoutDecay)}},{key:"borrowingRate",value:function(e){return this._recoveryMode?o.Decimal.ZERO:o.Decimal.min(u.MINIMUM_BORROWING_RATE.add(this.baseRate(e)),u.MAXIMUM_BORROWING_RATE)}},{key:"redemptionRate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.Decimal.ZERO,t=arguments.length>1?arguments[1]:void 0;e=o.Decimal.from(e);var n=this.baseRate(t);return e.nonZero&&(n=e.div(this._beta).add(n)),o.Decimal.min(u.MINIMUM_REDEMPTION_RATE.add(n),o.Decimal.ONE)}}]),e}();t.Fees=l},419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},420:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},421:function(e,t,n){"use strict";var a=n(48),i=n(82),r=n(83),s=n(224);Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionFailedError=void 0;var o=function(e){i(n,e);var t=r(n);function n(e,i,r){var s;return a(this,n),(s=t.call(this,i)).name=e,s.failedReceipt=r,s}return n}(s(Error));t.TransactionFailedError=o},422:function(e,t,n){"use strict";var a=n(85);Object.defineProperty(t,"__esModule",{value:!0}),t._successfulReceipt=t._failedReceipt=t._pendingReceipt=void 0,t._pendingReceipt={status:"pending"};t._failedReceipt=function(e){return{status:"failed",rawReceipt:e}};t._successfulReceipt=function(e,t,n){return a({status:"succeeded",rawReceipt:e,details:t},n?{toString:n}:{})}},423:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},424:function(e,t,n){"use strict";var a=n(150),i=n(48),r=n(55),s=n(65),o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.LiquityStore=void 0;var u=o(n(151)),l=function(e,t){return e===t},c=function(e,t){return e.eq(t)},d=function(e,t){return e.equals(t)},p=function(e,t){return"unregistered"===e.status?"unregistered"===t.status:"registered"===t.status&&e.kickbackRate.eq(t.kickbackRate)},y=function(e){return"unregistered"===e.status?'{ status: "unregistered" }':'{ status: "registered", kickbackRate: '.concat(e.kickbackRate," }")},b=function(){function e(){i(this,e),this.logging=!1,this._loaded=!1,this._listeners=new Set}return r(e,[{key:"state",get:function(){return Object.assign({},this._baseState,this._derivedState,this._extraState)}},{key:"start",value:function(){var e=this,t=this._doStart();return function(){t(),e._cancelUpdateIfScheduled()}}},{key:"_cancelUpdateIfScheduled",value:function(){void 0!==this._updateTimeoutId&&clearTimeout(this._updateTimeoutId)}},{key:"_scheduleUpdate",value:function(){var e=this;this._cancelUpdateIfScheduled(),this._updateTimeoutId=setTimeout((function(){e._updateTimeoutId=void 0,e._update()}),3e4)}},{key:"_logUpdate",value:function(e,t,n){return this.logging&&console.log("".concat(e," updated to ").concat(n?n(t):t)),t}},{key:"_updateIfChanged",value:function(e,t,n,a,i){return void 0===a||e(n,a)?n:this._logUpdate(t,a,i)}},{key:"_silentlyUpdateIfChanged",value:function(e,t,n){return void 0===n||e(t,n)?t:n}},{key:"_updateFees",value:function(e,t,n){return n&&!n.equals(t)?("".concat(n)!=="".concat(t)&&this._logUpdate(e,n),n):t}},{key:"_reduce",value:function(e,t){return{frontend:this._updateIfChanged(p,"frontend",e.frontend,t.frontend,y),ownFrontend:this._updateIfChanged(p,"ownFrontend",e.ownFrontend,t.ownFrontend,y),numberOfTroves:this._updateIfChanged(l,"numberOfTroves",e.numberOfTroves,t.numberOfTroves),accountBalance:this._updateIfChanged(c,"accountBalance",e.accountBalance,t.accountBalance),lusdBalance:this._updateIfChanged(c,"lusdBalance",e.lusdBalance,t.lusdBalance),lqtyBalance:this._updateIfChanged(c,"lqtyBalance",e.lqtyBalance,t.lqtyBalance),uniTokenBalance:this._updateIfChanged(c,"uniTokenBalance",e.uniTokenBalance,t.uniTokenBalance),uniTokenAllowance:this._updateIfChanged(c,"uniTokenAllowance",e.uniTokenAllowance,t.uniTokenAllowance),remainingLiquidityMiningLQTYReward:this._silentlyUpdateIfChanged(c,e.remainingLiquidityMiningLQTYReward,t.remainingLiquidityMiningLQTYReward),liquidityMiningStake:this._updateIfChanged(c,"liquidityMiningStake",e.liquidityMiningStake,t.liquidityMiningStake),totalStakedUniTokens:this._updateIfChanged(c,"totalStakedUniTokens",e.totalStakedUniTokens,t.totalStakedUniTokens),liquidityMiningLQTYReward:this._silentlyUpdateIfChanged(c,e.liquidityMiningLQTYReward,t.liquidityMiningLQTYReward),collateralSurplusBalance:this._updateIfChanged(c,"collateralSurplusBalance",e.collateralSurplusBalance,t.collateralSurplusBalance),price:this._updateIfChanged(c,"price",e.price,t.price),lusdInStabilityPool:this._updateIfChanged(c,"lusdInStabilityPool",e.lusdInStabilityPool,t.lusdInStabilityPool),total:this._updateIfChanged(d,"total",e.total,t.total),totalRedistributed:this._updateIfChanged(d,"totalRedistributed",e.totalRedistributed,t.totalRedistributed),troveBeforeRedistribution:this._updateIfChanged(d,"troveBeforeRedistribution",e.troveBeforeRedistribution,t.troveBeforeRedistribution),stabilityDeposit:this._updateIfChanged(d,"stabilityDeposit",e.stabilityDeposit,t.stabilityDeposit),remainingStabilityPoolLQTYReward:this._silentlyUpdateIfChanged(c,e.remainingStabilityPoolLQTYReward,t.remainingStabilityPoolLQTYReward),_feesInNormalMode:this._silentlyUpdateIfChanged(d,e._feesInNormalMode,t._feesInNormalMode),lqtyStake:this._updateIfChanged(d,"lqtyStake",e.lqtyStake,t.lqtyStake),totalStakedLQTY:this._updateIfChanged(c,"totalStakedLQTY",e.totalStakedLQTY,t.totalStakedLQTY),_riskiestTroveBeforeRedistribution:this._silentlyUpdateIfChanged(d,e._riskiestTroveBeforeRedistribution,t._riskiestTroveBeforeRedistribution)}}},{key:"_derive",value:function(e){var t=e.troveBeforeRedistribution,n=e.totalRedistributed,a=e._feesInNormalMode,i=e.total,r=e.price,s=e._riskiestTroveBeforeRedistribution,o=a._setRecoveryMode(i.collateralRatioIsBelowCritical(r));return{trove:t.applyRedistribution(n),fees:o,borrowingRate:o.borrowingRate(),redemptionRate:o.redemptionRate(),haveUndercollateralizedTroves:s.applyRedistribution(n).collateralRatioIsBelowMinimum(r)}}},{key:"_reduceDerived",value:function(e,t){return{fees:this._updateFees("fees",e.fees,t.fees),trove:this._updateIfChanged(d,"trove",e.trove,t.trove),borrowingRate:this._silentlyUpdateIfChanged(c,e.borrowingRate,t.borrowingRate),redemptionRate:this._silentlyUpdateIfChanged(c,e.redemptionRate,t.redemptionRate),haveUndercollateralizedTroves:this._updateIfChanged(l,"haveUndercollateralizedTroves",e.haveUndercollateralizedTroves,t.haveUndercollateralizedTroves)}}},{key:"_notify",value:function(e){var t=this;a(this._listeners).forEach((function(n){t._listeners.has(n)&&n(e)}))}},{key:"subscribe",value:function(e){var t,n=this,a=(t=e,function(){return t.apply(void 0,arguments)});return this._listeners.add(a),function(){n._listeners.delete(a)}}},{key:"_load",value:function(e,t){u.default(!this._loaded),this._baseState=e,this._derivedState=this._derive(e),this._extraState=t,this._loaded=!0,this._scheduleUpdate(),this.onLoaded&&this.onLoaded()}},{key:"_update",value:function(e,t){u.default(this._baseState&&this._derivedState);var n,a,i=this.state;e&&(this._baseState=this._reduce(this._baseState,e)),this._derivedState=this._reduceDerived(this._derivedState,this._derive(this._baseState)),t&&(u.default(this._extraState),this._extraState=this._reduceExtra(this._extraState,t)),this._scheduleUpdate(),this._notify({newState:this.state,oldState:i,stateChange:(n=this.state,a=i,Object.fromEntries(Object.entries(n).filter((function(e){var t=s(e,2),n=t[0];return t[1]!==a[n]}))))})}}]),e}();t.LiquityStore=b},425:function(e,t,n){"use strict";var a=n(85),i=n(180),r=n(65),s=n(5),o=n(79),u=n(48),l=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t._CachedReadableLiquity=void 0;var c=function(){function e(t,n){u(this,e),this._readable=t,this._cache=n}return l(e,[{key:"getTotalRedistributed",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotalRedistributed.apply(t,i))&&void 0!==a?a:(n=this._readable).getTotalRedistributed.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTroveBeforeRedistribution",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getTroveBeforeRedistribution.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getTroveBeforeRedistribution.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTrove",value:function(){var e=o(s.mark((function e(t){var n,a,i,o,u,l,c,d=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n=d.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=d[i];return e.next=3,Promise.all([this.getTroveBeforeRedistribution.apply(this,[t].concat(a)),this.getTotalRedistributed.apply(this,a)]);case 3:return o=e.sent,u=r(o,2),l=u[0],c=u[1],e.abrupt("return",l.applyRedistribution(c));case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getNumberOfTroves",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getNumberOfTroves.apply(t,i))&&void 0!==a?a:(n=this._readable).getNumberOfTroves.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getPrice",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getPrice.apply(t,i))&&void 0!==a?a:(n=this._readable).getPrice.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotal.apply(t,i))&&void 0!==a?a:(n=this._readable).getTotal.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getStabilityDeposit",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getStabilityDeposit.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getStabilityDeposit.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRemainingStabilityPoolLQTYReward",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getRemainingStabilityPoolLQTYReward.apply(t,i))&&void 0!==a?a:(n=this._readable).getRemainingStabilityPoolLQTYReward.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLUSDInStabilityPool",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getLUSDInStabilityPool.apply(t,i))&&void 0!==a?a:(n=this._readable).getLUSDInStabilityPool.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLUSDBalance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLUSDBalance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLUSDBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getLQTYBalance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLQTYBalance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLQTYBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUniTokenBalance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getUniTokenBalance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getUniTokenBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getUniTokenAllowance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getUniTokenAllowance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getUniTokenAllowance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getRemainingLiquidityMiningLQTYReward",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getRemainingLiquidityMiningLQTYReward.apply(t,i))&&void 0!==a?a:(n=this._readable).getRemainingLiquidityMiningLQTYReward.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningStake",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLiquidityMiningStake.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLiquidityMiningStake.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalStakedUniTokens",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotalStakedUniTokens.apply(t,i))&&void 0!==a?a:(n=this._readable).getTotalStakedUniTokens.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLiquidityMiningLQTYReward",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLiquidityMiningLQTYReward.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLiquidityMiningLQTYReward.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getCollateralSurplusBalance",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getCollateralSurplusBalance.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getCollateralSurplusBalance.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTroves",value:function(){var e=o(s.mark((function e(t){var n,o,u,l,c,d,p,y,b,m,f,h,v=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(l=t.beforeRedistribution,c=i(t,["beforeRedistribution"]),d=v.length,p=new Array(d>1?d-1:0),y=1;y<d;y++)p[y-1]=v[y];return e.next=4,Promise.all([l?void 0:this.getTotalRedistributed.apply(this,p),null!==(u=(n=this._cache).getTroves.apply(n,[a({beforeRedistribution:!0},c)].concat(p)))&&void 0!==u?u:(o=this._readable).getTroves.apply(o,[a({beforeRedistribution:!0},c)].concat(p))]);case 4:if(b=e.sent,m=r(b,2),f=m[0],h=m[1],!f){e.next=12;break}return e.abrupt("return",h.map((function(e){return e.applyRedistribution(f)})));case 12:return e.abrupt("return",h);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getFees",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getFees.apply(t,i))&&void 0!==a?a:(n=this._readable).getFees.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getLQTYStake",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getLQTYStake.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getLQTYStake.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotalStakedLQTY",value:function(){var e=o(s.mark((function e(){var t,n,a,i=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null!==(a=(t=this._cache).getTotalStakedLQTY.apply(t,i))&&void 0!==a?a:(n=this._readable).getTotalStakedLQTY.apply(n,i));case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getFrontendStatus",value:function(){var e=o(s.mark((function e(t){var n,a,i,r,o,u,l=arguments;return s.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(r=l.length,o=new Array(r>1?r-1:0),u=1;u<r;u++)o[u-1]=l[u];return e.abrupt("return",null!==(i=(n=this._cache).getFrontendStatus.apply(n,[t].concat(o)))&&void 0!==i?i:(a=this._readable).getFrontendStatus.apply(a,[t].concat(o)));case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();t._CachedReadableLiquity=c},426:function(e){e.exports=JSON.parse("null")},427:function(e){e.exports=JSON.parse('{"chainId":5,"version":"e2f7dc41994854e0b1e1287f73c55894cc501740","deploymentDate":1676620200000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":false,"_uniTokenIsMock":true,"_isDev":false,"startBlock":8506292,"addresses":{"activePool":"0x7426EFda9B17992B3F7cE3680D5D128E1F876C05","borrowerOperations":"0x94f0835Aa7cEe67fF122419BeE52b82Abe637a16","troveManager":"0x6412c93AB383B87Af7c5E673fb3a295c8977A3Ed","collSurplusPool":"0x82869137C51e0DC1Bf3aeE5bc1f0B73EADfEBB25","communityIssuance":"0x65188ae9dDE4A59b73796Eb26AE33a3D5fe9b84d","defaultPool":"0x63a7c03b921f5A59D9f583A34585bC6eFc832b59","hintHelpers":"0x7151f3828948B8824C677DA8daf7BD13014c1187","lockupContractFactory":"0xA401f217DB7d84432C98272F637E9d450c6D16f2","lqtyStaking":"0x02dD2a33d0bBF40343CD09941F275978b1cd4ab9","priceFeed":"0x8c2706b7bF86576F16Db7C099F5a62E7Ce8F0661","sortedTroves":"0x8C2C33247A691a98d05B60c2D7448687b6C56a86","stabilityPool":"0x99Fda92878c1d2f1e0971D1937C50CC578A33E3D","gasPool":"0x25fE5Ed43aD2370f31414AC9De11E028A699a40e","unipool":"0xDA7Aa96fC750B456a63af90D894063009e26f6ba","lusdToken":"0x76ea225E132609D387464e11ce5EFA1764A3799B","lqtyToken":"0x220aa3EE61009E33F84901021A271B197e925df2","multiTroveGetter":"0x64e8Bc7b037E61c0d2dd53ae7Fc4faF1E6429a19","uniToken":"0x94F5C9f75857De515bce1181CEdB3c463E3654C0"}}')},428:function(e){e.exports=JSON.parse('{"chainId":42,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617374516000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":false,"_uniTokenIsMock":false,"_isDev":false,"startBlock":24134777,"addresses":{"activePool":"0x2FEB8CC8eD32117D1F39168543f29c30fdf10105","borrowerOperations":"0xA289111CC4b306E3F5F15c654D4c318B3dA51813","troveManager":"0x5EBeC1ecc36a760A54E35d474F889EfB9E7eD2aD","collSurplusPool":"0x1Ce340cC663BDbda54ccb6055da4064C0B7f68cd","communityIssuance":"0x7baD384C67302df52Ee78Acc3581c9d9c51F9527","defaultPool":"0x706431F2252ba2e5A9a6F7EEFE5CB4902acc23E7","hintHelpers":"0xEEBfA9A488E9d83cd1a49b838c14D9231F5F2fCb","lockupContractFactory":"0xc34B9083Bf5b5794eFD202A8c3B51A5577e087c1","lqtyStaking":"0x82b7384e360DD3f16ed23D15921BB7a878a08b87","priceFeed":"0xbA49275F8F890E7296F64b3e81F1Ada656030150","sortedTroves":"0x91656701b33eca6425A239930FccAA842D0E2031","stabilityPool":"0x04d630Bff6dea193Fd644dEcfC460db249854a02","gasPool":"0xd97E194C0659F0d7b051EdF3E317BF4F7A675770","unipool":"0xeed1782CaD8bad6eD2072C85e4c5821e67cCf1E1","lusdToken":"0x0b02b94638daa719290b5214825dA625af08A02F","lqtyToken":"0xd8FABEa5752D52Ee0dEbF6c90948F5446694EE7c","multiTroveGetter":"0x9c5977268592E964784EFF50043BFFC035B6b0C7","uniToken":"0x6E14b68E16e4211C06bcc8527D6b92A43AA47806"}}')},429:function(e){e.exports=JSON.parse('{"chainId":4,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617355618000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":false,"_uniTokenIsMock":false,"_isDev":false,"startBlock":8341450,"addresses":{"activePool":"0xbA49275F8F890E7296F64b3e81F1Ada656030150","borrowerOperations":"0x91656701b33eca6425A239930FccAA842D0E2031","troveManager":"0x04d630Bff6dea193Fd644dEcfC460db249854a02","collSurplusPool":"0xd97E194C0659F0d7b051EdF3E317BF4F7A675770","communityIssuance":"0xeed1782CaD8bad6eD2072C85e4c5821e67cCf1E1","defaultPool":"0x0b02b94638daa719290b5214825dA625af08A02F","hintHelpers":"0xd8FABEa5752D52Ee0dEbF6c90948F5446694EE7c","lockupContractFactory":"0x9c5977268592E964784EFF50043BFFC035B6b0C7","lqtyStaking":"0x988749E04e5B0863Da4E0Fdb1EaD85C1FA59fCe3","priceFeed":"0x692Cd2D9Df7EFD91Ccd17F9eEFD72BAEE0584DB9","sortedTroves":"0xac064890c6343F67450ba7aB97df6De38A8D7da8","stabilityPool":"0xB8eb11f9eFF55378dfB692296C32DF020f5CC7fF","gasPool":"0xbbb26b40c1B32ba1F342DAbC65234516dd29BB44","unipool":"0x866b252Acff4c45d6978032865aFb9923D11992A","lusdToken":"0x9C5AE6852622ddE455B6Fca4C1551FC0352531a3","lqtyToken":"0xF74dcAbeA0954AeB6903c8a71d41e468a6B77357","multiTroveGetter":"0x1bE036A6A82b4b774757a48a1bb79653f89eD9fD","uniToken":"0x36A5ec67B9C25D765186FBAd2735f1746bd894D8"}}')},430:function(e){e.exports=JSON.parse('{"chainId":3,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617356113000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":true,"_uniTokenIsMock":false,"_isDev":false,"startBlock":9961294,"addresses":{"activePool":"0x8bE79B54Bff7754B57294077c2B5017AF9f57dC2","borrowerOperations":"0xfe9049E677C5773dd72ac7E19c38c68aB0891744","troveManager":"0xcd89b25a565Ad0895c551DAe040c2b5F9Eb11D64","collSurplusPool":"0x7426EFda9B17992B3F7cE3680D5D128E1F876C05","communityIssuance":"0x94f0835Aa7cEe67fF122419BeE52b82Abe637a16","defaultPool":"0x6412c93AB383B87Af7c5E673fb3a295c8977A3Ed","hintHelpers":"0x82869137C51e0DC1Bf3aeE5bc1f0B73EADfEBB25","lockupContractFactory":"0x65188ae9dDE4A59b73796Eb26AE33a3D5fe9b84d","lqtyStaking":"0x63a7c03b921f5A59D9f583A34585bC6eFc832b59","priceFeed":"0x7151f3828948B8824C677DA8daf7BD13014c1187","sortedTroves":"0xA401f217DB7d84432C98272F637E9d450c6D16f2","stabilityPool":"0x02dD2a33d0bBF40343CD09941F275978b1cd4ab9","gasPool":"0x8c2706b7bF86576F16Db7C099F5a62E7Ce8F0661","unipool":"0x8C2C33247A691a98d05B60c2D7448687b6C56a86","lusdToken":"0x99Fda92878c1d2f1e0971D1937C50CC578A33E3D","lqtyToken":"0x25fE5Ed43aD2370f31414AC9De11E028A699a40e","multiTroveGetter":"0xDA7Aa96fC750B456a63af90D894063009e26f6ba","uniToken":"0x14E87Db22A5a402a0A1461FAE94fade1976AAaF7"}}')},431:function(e){e.exports=JSON.parse('{"chainId":1,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1617611590000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.367430922986478542","_priceFeedIsTestnet":false,"_uniTokenIsMock":false,"_isDev":false,"startBlock":12178551,"addresses":{"activePool":"0xDf9Eb223bAFBE5c5271415C75aeCD68C21fE3D7F","borrowerOperations":"0x24179CD81c9e782A4096035f7eC97fB8B783e007","troveManager":"0xA39739EF8b0231DbFA0DcdA07d7e29faAbCf4bb2","collSurplusPool":"0x3D32e8b97Ed5881324241Cf03b2DA5E2EBcE5521","communityIssuance":"0xD8c9D9071123a059C6E0A945cF0e0c82b508d816","defaultPool":"0x896a3F03176f05CFbb4f006BfCd8723F2B0D741C","hintHelpers":"0xE84251b93D9524E0d2e621Ba7dc7cb3579F997C0","lockupContractFactory":"0x2eBeF24dA09489218Ba2BECb01867F6DaAeDcD4B","lqtyStaking":"0x4f9Fbb3f1E99B56e0Fe2892e623Ed36A76Fc605d","priceFeed":"0x4c517D4e2C851CA76d7eC94B805269Df0f2201De","sortedTroves":"0x8FdD3fbFEb32b28fb73555518f8b361bCeA741A6","stabilityPool":"0x66017D22b0f8556afDd19FC67041899Eb65a21bb","gasPool":"0x9555b042F969E561855e5F28cB1230819149A8d9","unipool":"0xd37a77E71ddF3373a79BE2eBB76B6c4808bDF0d5","lusdToken":"0x5f98805A4E8be255a32880FDeC7F6728C6568bA0","lqtyToken":"0x6DEA81C8171D0bA574754EF6F8b412F2Ed88c54D","multiTroveGetter":"0xFc92d0E9Fa35df17E3A6d9F40716ca2cE749922B","uniToken":"0xF20EF17b889b437C151eB5bA15A47bFc62bfF469"}}')},432:function(e){e.exports=JSON.parse('{"chainId":1337802,"version":"5174ecd0da4842157aba989499200d690b7e374f","deploymentDate":1648542144000,"bootstrapPeriod":1209600,"totalStabilityPoolLQTYReward":"32000000","liquidityMiningLQTYRewardRate":"0.257201646090534979","_priceFeedIsTestnet":true,"_uniTokenIsMock":true,"_isDev":false,"startBlock":146577,"addresses":{"activePool":"0xE7d135D2B43EF53D5f644F4A4F39F639174dfFb5","borrowerOperations":"0x98695e9bf7DEb6113a6e5d5920d032bD721Fee6E","troveManager":"0x6645E03DA2a711f780af7cCE1019Cb9a9135C898","collSurplusPool":"0x69E686BBF16f6C04aC2fb49AA0d2f78Ff9f37596","communityIssuance":"0x86F51bB9F0A3Ee1d5CfDD2df6e6282170a02Bb59","defaultPool":"0x480cB1864e570221ABcADd3316D947864D3F264B","hintHelpers":"0x00248273044d46E690e3234cDdd480C5290b325c","lockupContractFactory":"0xc27b50C919B36C1b4C7fA0a74AA65E28C92d87Fc","lqtyStaking":"0xb21a1c4F84A772397FEfb43CAa5a91947F786E1f","priceFeed":"0x92167BE3A0D4c95055342a2fe0bC910f76dE34aC","sortedTroves":"0xAe6b0165E406CAB9FEAa503314DFB19Ed1Ea777a","stabilityPool":"0x8716B3C98A33D0FF1a922063D1D67B7e40feB80f","gasPool":"0x24c925a2570E17718256fe1416dC45837A60b847","unipool":"0x2585B38EFeeB31E4a041686Ef78D925871cD957b","lusdToken":"0xF47816aa488Ae548ECE5D3051Fb8F5411e774f8B","lqtyToken":"0x8CeA94Affd1B7ae5d623A2287403bB33f7Cb83f6","multiTroveGetter":"0x59BC9902e0b2c8831E55eF9ee8678e377643c468","uniToken":"0x7b6c5109F353236294123B0a55896b760708008c"}}')},433:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"}],"name":"ActivePoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_LUSDDebt","type":"uint256"}],"name":"ActivePoolLUSDDebtUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"ETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"LUSDBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"decreaseLUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"increaseLUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stabilityPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},434:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_collSurplusPoolAddress","type":"address"}],"name":"CollSurplusPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_gasPoolAddress","type":"address"}],"name":"GasPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"LQTYStakingAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_LUSDFee","type":"uint256"}],"name":"LUSDBorrowingFeePaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lusdTokenAddress","type":"address"}],"name":"LUSDTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"arrayIndex","type":"uint256"}],"name":"TroveCreated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"stake","type":"uint256"},{"indexed":false,"internalType":"enum BorrowerOperations.BorrowerOperation","name":"operation","type":"uint8"}],"name":"TroveUpdated","type":"event"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"addColl","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_collWithdrawal","type":"uint256"},{"internalType":"uint256","name":"_LUSDChange","type":"uint256"},{"internalType":"bool","name":"_isDebtIncrease","type":"bool"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"adjustTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"claimCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"closeTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_debt","type":"uint256"}],"name":"getCompositeDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyStaking","outputs":[{"internalType":"contract ILQTYStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyStakingAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lusdToken","outputs":[{"internalType":"contract ILUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"moveETHGainToTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_LUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"openTrove","outputs":[],"stateMutability":"payable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"repayLUSD","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_gasPoolAddress","type":"address"},{"internalType":"address","name":"_collSurplusPoolAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_lusdTokenAddress","type":"address"},{"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_collWithdrawal","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawColl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"},{"internalType":"uint256","name":"_LUSDAmount","type":"uint256"},{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawLUSD","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},435:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_baseRate","type":"uint256"}],"name":"BaseRateUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_collSurplusPoolAddress","type":"address"}],"name":"CollSurplusPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_defaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_gasPoolAddress","type":"address"}],"name":"GasPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"LQTYStakingAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_L_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_L_LUSDDebt","type":"uint256"}],"name":"LTermsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newLUSDTokenAddress","type":"address"}],"name":"LUSDTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastFeeOpTime","type":"uint256"}],"name":"LastFeeOpTimeUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_liquidatedDebt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_liquidatedColl","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_collGasCompensation","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_LUSDGasCompensation","type":"uint256"}],"name":"Liquidation","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_attemptedLUSDAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_actualLUSDAmount","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ETHSent","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_ETHFee","type":"uint256"}],"name":"Redemption","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalStakesSnapshot","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_totalCollateralSnapshot","type":"uint256"}],"name":"SystemSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newTotalStakes","type":"uint256"}],"name":"TotalStakesUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newIndex","type":"uint256"}],"name":"TroveIndexUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"enum TroveManager.TroveManagerOperation","name":"_operation","type":"uint8"}],"name":"TroveLiquidated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_L_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_L_LUSDDebt","type":"uint256"}],"name":"TroveSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_borrower","type":"address"},{"indexed":false,"internalType":"uint256","name":"_debt","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_coll","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_stake","type":"uint256"},{"indexed":false,"internalType":"enum TroveManager.TroveManagerOperation","name":"_operation","type":"uint8"}],"name":"TroveUpdated","type":"event"},{"inputs":[],"name":"BETA","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BOOTSTRAP_PERIOD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"L_ETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"L_LUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_BORROWING_FEE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MINUTE_DECAY_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"REDEMPTION_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_MINUTE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"TroveOwners","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"Troves","outputs":[{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"stake","type":"uint256"},{"internalType":"enum TroveManager.Status","name":"status","type":"uint8"},{"internalType":"uint128","name":"arrayIndex","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"addTroveOwnerToArray","outputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"applyPendingRewards","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"baseRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address[]","name":"_troveArray","type":"address[]"}],"name":"batchLiquidateTroves","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"checkRecoveryMode","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"closeTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decayBaseRateFromBorrowing","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_collDecrease","type":"uint256"}],"name":"decreaseTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_debtDecrease","type":"uint256"}],"name":"decreaseTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDDebt","type":"uint256"}],"name":"getBorrowingFee","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDDebt","type":"uint256"}],"name":"getBorrowingFeeWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBorrowingRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getBorrowingRateWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"getCurrentICR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getEntireDebtAndColl","outputs":[{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"pendingLUSDDebtReward","type":"uint256"},{"internalType":"uint256","name":"pendingETHReward","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getNominalICR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getPendingETHReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getPendingLUSDDebtReward","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ETHDrawn","type":"uint256"}],"name":"getRedemptionFeeWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRedemptionRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getRedemptionRateWithDecay","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"getTCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_index","type":"uint256"}],"name":"getTroveFromTroveOwnersArray","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTroveOwnersCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveStake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"getTroveStatus","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"hasPendingRewards","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_collIncrease","type":"uint256"}],"name":"increaseTroveColl","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_debtIncrease","type":"uint256"}],"name":"increaseTroveDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastETHError_Redistribution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastFeeOperationTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastLUSDDebtError_Redistribution","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"liquidate","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_n","type":"uint256"}],"name":"liquidateTroves","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lqtyStaking","outputs":[{"internalType":"contract ILQTYStaking","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyToken","outputs":[{"internalType":"contract ILQTYToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lusdToken","outputs":[{"internalType":"contract ILUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDamount","type":"uint256"},{"internalType":"address","name":"_firstRedemptionHint","type":"address"},{"internalType":"address","name":"_upperPartialRedemptionHint","type":"address"},{"internalType":"address","name":"_lowerPartialRedemptionHint","type":"address"},{"internalType":"uint256","name":"_partialRedemptionHintNICR","type":"uint256"},{"internalType":"uint256","name":"_maxIterations","type":"uint256"},{"internalType":"uint256","name":"_maxFeePercentage","type":"uint256"}],"name":"redeemCollateral","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"removeStake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"rewardSnapshots","outputs":[{"internalType":"uint256","name":"ETH","type":"uint256"},{"internalType":"uint256","name":"LUSDDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_defaultPoolAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_gasPoolAddress","type":"address"},{"internalType":"address","name":"_collSurplusPoolAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_lusdTokenAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_lqtyTokenAddress","type":"address"},{"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"},{"internalType":"uint256","name":"_num","type":"uint256"}],"name":"setTroveStatus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"stabilityPool","outputs":[{"internalType":"contract IStabilityPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalCollateralSnapshot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalStakesSnapshot","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"updateStakeAndTotalStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrower","type":"address"}],"name":"updateTroveRewardSnapshots","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},436:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_user","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"LUSDTokenBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"domainSeparator","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"permitTypeHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_poolAddress","type":"address"},{"internalType":"address","name":"_receiver","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"returnFromPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"address","name":"_poolAddress","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendToPool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stabilityPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')},437:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_account","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"CollBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"accountSurplus","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"name":"claimColl","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"}],"name":"getCollateral","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},438:function(e){e.exports=JSON.parse('[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalLQTYIssued","type":"uint256"}],"name":"TotalLQTYIssuedUpdated","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ISSUANCE_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LQTYSupplyCap","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_MINUTE","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"deploymentTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"issueLQTY","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lqtyToken","outputs":[{"internalType":"contract ILQTYToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_account","type":"address"},{"internalType":"uint256","name":"_LQTYamount","type":"uint256"}],"name":"sendLQTY","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_lqtyTokenAddress","type":"address"},{"internalType":"address","name":"_stabilityPoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"stabilityPoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalLQTYIssued","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"}]')},439:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"}],"name":"DefaultPoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_LUSDDebt","type":"uint256"}],"name":"DefaultPoolLUSDDebtUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"ETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"LUSDBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newStabilityPoolAddress","type":"address"}],"name":"StabilityPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"decreaseLUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLUSDDebt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"increaseLUSDDebt","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendETHToActivePool","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"stateMutability":"payable","type":"receive"}]')},440:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_communityIssuanceAddress","type":"address"},{"internalType":"address","name":"_lqtyStakingAddress","type":"address"},{"internalType":"address","name":"_lockupFactoryAddress","type":"address"},{"internalType":"address","name":"_bountyAddress","type":"address"},{"internalType":"address","name":"_lpRewardsAddress","type":"address"},{"internalType":"address","name":"_multisigAddress","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_communityIssuanceAddress","type":"address"}],"name":"CommunityIssuanceAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyStakingAddress","type":"address"}],"name":"LQTYStakingAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lockupContractFactoryAddress","type":"address"}],"name":"LockupContractFactoryAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[],"name":"ONE_YEAR_IN_SECONDS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"communityIssuanceAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"domainSeparator","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getDeploymentStartTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLpRewardsEntitlement","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"lockupContractFactory","outputs":[{"internalType":"contract ILockupContractFactory","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyStakingAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"multisigAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"nonces","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"},{"internalType":"uint256","name":"deadline","type":"uint256"},{"internalType":"uint8","name":"v","type":"uint8"},{"internalType":"bytes32","name":"r","type":"bytes32"},{"internalType":"bytes32","name":"s","type":"bytes32"}],"name":"permit","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"permitTypeHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_sender","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"sendToLQTYStaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"version","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"}]')},441:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_coll","type":"uint256"},{"internalType":"uint256","name":"_debt","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"}],"name":"computeCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[{"internalType":"uint256","name":"_coll","type":"uint256"},{"internalType":"uint256","name":"_debt","type":"uint256"}],"name":"computeNominalCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"pure","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_CR","type":"uint256"},{"internalType":"uint256","name":"_numTrials","type":"uint256"},{"internalType":"uint256","name":"_inputRandomSeed","type":"uint256"}],"name":"getApproxHint","outputs":[{"internalType":"address","name":"hintAddress","type":"address"},{"internalType":"uint256","name":"diff","type":"uint256"},{"internalType":"uint256","name":"latestRandomSeed","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDamount","type":"uint256"},{"internalType":"uint256","name":"_price","type":"uint256"},{"internalType":"uint256","name":"_maxIterations","type":"uint256"}],"name":"getRedemptionHints","outputs":[{"internalType":"address","name":"firstRedemptionHint","type":"address"},{"internalType":"uint256","name":"partialRedemptionHintNICR","type":"uint256"},{"internalType":"uint256","name":"truncatedLUSDamount","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},442:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lockupContractAddress","type":"address"},{"indexed":false,"internalType":"address","name":"_beneficiary","type":"address"},{"indexed":false,"internalType":"uint256","name":"_unlockTime","type":"uint256"},{"indexed":false,"internalType":"address","name":"_deployer","type":"address"}],"name":"LockupContractDeployedThroughFactory","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SECONDS_IN_ONE_YEAR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_beneficiary","type":"address"},{"internalType":"uint256","name":"_unlockTime","type":"uint256"}],"name":"deployLockupContract","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_contractAddress","type":"address"}],"name":"isRegisteredLockup","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"lockupContractToDeployer","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyTokenAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"setLQTYTokenAddress","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},443:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"ActivePoolAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_account","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_F_ETH","type":"uint256"}],"name":"F_ETHUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_F_LUSD","type":"uint256"}],"name":"F_LUSDUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lusdTokenAddress","type":"address"}],"name":"LUSDTokenAddressSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"newStake","type":"uint256"}],"name":"StakeChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"_F_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_F_LUSD","type":"uint256"}],"name":"StakerSnapshotsUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"staker","type":"address"},{"indexed":false,"internalType":"uint256","name":"LUSDGain","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"ETHGain","type":"uint256"}],"name":"StakingGainsWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_totalLQTYStaked","type":"uint256"}],"name":"TotalLQTYStakedUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManager","type":"address"}],"name":"TroveManagerAddressSet","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"F_ETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"F_LUSD","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePoolAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getPendingETHGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_user","type":"address"}],"name":"getPendingLUSDGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_ETHFee","type":"uint256"}],"name":"increaseF_ETH","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LUSDFee","type":"uint256"}],"name":"increaseF_LUSD","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyToken","outputs":[{"internalType":"contract ILQTYToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lusdToken","outputs":[{"internalType":"contract ILUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_lqtyTokenAddress","type":"address"},{"internalType":"address","name":"_lusdTokenAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"snapshots","outputs":[{"internalType":"uint256","name":"F_ETH_Snapshot","type":"uint256"},{"internalType":"uint256","name":"F_LUSD_Snapshot","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LQTYamount","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"stakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalLQTYStaked","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManagerAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_LQTYamount","type":"uint256"}],"name":"unstake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},444:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"contract TroveManager","name":"_troveManager","type":"address"},{"internalType":"contract ISortedTroves","name":"_sortedTroves","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"int256","name":"_startIdx","type":"int256"},{"internalType":"uint256","name":"_count","type":"uint256"}],"name":"getMultipleSortedTroves","outputs":[{"components":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"debt","type":"uint256"},{"internalType":"uint256","name":"coll","type":"uint256"},{"internalType":"uint256","name":"stake","type":"uint256"},{"internalType":"uint256","name":"snapshotETH","type":"uint256"},{"internalType":"uint256","name":"snapshotLUSDDebt","type":"uint256"}],"internalType":"struct MultiTroveGetter.CombinedTroveData[]","name":"_troves","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract TroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},445:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastGoodPrice","type":"uint256"}],"name":"LastGoodPriceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"enum PriceFeed.Status","name":"newStatus","type":"uint8"}],"name":"PriceFeedStatusChanged","type":"event"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"ETHUSD_TELLOR_REQ_ID","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_PRICE_DEVIATION_FROM_PREVIOUS_ROUND","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MAX_PRICE_DIFFERENCE_BETWEEN_ORACLES","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TARGET_DIGITS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TELLOR_DIGITS","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"TIMEOUT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"fetchPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastGoodPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceAggregator","outputs":[{"internalType":"contract AggregatorV3Interface","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_priceAggregatorAddress","type":"address"},{"internalType":"address","name":"_tellorCallerAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"status","outputs":[{"internalType":"enum PriceFeed.Status","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"tellorCaller","outputs":[{"internalType":"contract ITellorCaller","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},446:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_lastGoodPrice","type":"uint256"}],"name":"LastGoodPriceUpdated","type":"event"},{"inputs":[],"name":"fetchPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"getPrice","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"price","type":"uint256"}],"name":"setPrice","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},447:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_id","type":"address"},{"indexed":false,"internalType":"uint256","name":"_NICR","type":"uint256"}],"name":"NodeAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_id","type":"address"}],"name":"NodeRemoved","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_sortedDoublyLLAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_troveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperationsAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"contains","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"data","outputs":[{"internalType":"address","name":"head","type":"address"},{"internalType":"address","name":"tail","type":"address"},{"internalType":"uint256","name":"maxSize","type":"uint256"},{"internalType":"uint256","name":"size","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"findInsertPosition","outputs":[{"internalType":"address","name":"","type":"address"},{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getFirst","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getLast","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getMaxSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"getNext","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"getPrev","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getSize","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"},{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"insert","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"isEmpty","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isFull","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"},{"internalType":"uint256","name":"_newNICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"reInsert","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_id","type":"address"}],"name":"remove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_size","type":"uint256"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"}],"name":"setParams","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_NICR","type":"uint256"},{"internalType":"address","name":"_prevId","type":"address"},{"internalType":"address","name":"_nextId","type":"address"}],"name":"validInsertPosition","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"}]')},448:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newActivePoolAddress","type":"address"}],"name":"ActivePoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newBorrowerOperationsAddress","type":"address"}],"name":"BorrowerOperationsAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newCommunityIssuanceAddress","type":"address"}],"name":"CommunityIssuanceAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newDefaultPoolAddress","type":"address"}],"name":"DefaultPoolAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_S","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"}],"name":"DepositSnapshotUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_ETH","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_LUSDLoss","type":"uint256"}],"name":"ETHGainWithdrawn","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint128","name":"_currentEpoch","type":"uint128"}],"name":"EpochUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_to","type":"address"},{"indexed":false,"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"EtherSent","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_kickbackRate","type":"uint256"}],"name":"FrontEndRegistered","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"}],"name":"FrontEndSnapshotUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newFrontEndStake","type":"uint256"},{"indexed":false,"internalType":"address","name":"_depositor","type":"address"}],"name":"FrontEndStakeChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"}],"name":"FrontEndTagSet","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_G","type":"uint256"},{"indexed":false,"internalType":"uint128","name":"_epoch","type":"uint128"},{"indexed":false,"internalType":"uint128","name":"_scale","type":"uint128"}],"name":"G_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_LQTY","type":"uint256"}],"name":"LQTYPaidToDepositor","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_frontEnd","type":"address"},{"indexed":false,"internalType":"uint256","name":"_LQTY","type":"uint256"}],"name":"LQTYPaidToFrontEnd","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newLUSDTokenAddress","type":"address"}],"name":"LUSDTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_P","type":"uint256"}],"name":"P_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newPriceFeedAddress","type":"address"}],"name":"PriceFeedAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_S","type":"uint256"},{"indexed":false,"internalType":"uint128","name":"_epoch","type":"uint128"},{"indexed":false,"internalType":"uint128","name":"_scale","type":"uint128"}],"name":"S_Updated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint128","name":"_currentScale","type":"uint128"}],"name":"ScaleUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newSortedTrovesAddress","type":"address"}],"name":"SortedTrovesAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"StabilityPoolETHBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"_newBalance","type":"uint256"}],"name":"StabilityPoolLUSDBalanceUpdated","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_newTroveManagerAddress","type":"address"}],"name":"TroveManagerAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"_depositor","type":"address"},{"indexed":false,"internalType":"uint256","name":"_newDeposit","type":"uint256"}],"name":"UserDepositChanged","type":"event"},{"inputs":[],"name":"BORROWING_FEE_FLOOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"CCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"DECIMAL_PRECISION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"LUSD_GAS_COMPENSATION","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MCR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"MIN_NET_DEBT","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"P","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"PERCENT_DIVISOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"SCALE_FACTOR","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_100pct","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"activePool","outputs":[{"internalType":"contract IActivePool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"borrowerOperations","outputs":[{"internalType":"contract IBorrowerOperations","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"communityIssuance","outputs":[{"internalType":"contract ICommunityIssuance","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentEpoch","outputs":[{"internalType":"uint128","name":"","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"currentScale","outputs":[{"internalType":"uint128","name":"","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"defaultPool","outputs":[{"internalType":"contract IDefaultPool","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"depositSnapshots","outputs":[{"internalType":"uint256","name":"S","type":"uint256"},{"internalType":"uint256","name":"P","type":"uint256"},{"internalType":"uint256","name":"G","type":"uint256"},{"internalType":"uint128","name":"scale","type":"uint128"},{"internalType":"uint128","name":"epoch","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"deposits","outputs":[{"internalType":"uint256","name":"initialValue","type":"uint256"},{"internalType":"address","name":"frontEndTag","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint128","name":"","type":"uint128"},{"internalType":"uint128","name":"","type":"uint128"}],"name":"epochToScaleToG","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint128","name":"","type":"uint128"},{"internalType":"uint128","name":"","type":"uint128"}],"name":"epochToScaleToSum","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEndSnapshots","outputs":[{"internalType":"uint256","name":"S","type":"uint256"},{"internalType":"uint256","name":"P","type":"uint256"},{"internalType":"uint256","name":"G","type":"uint256"},{"internalType":"uint128","name":"scale","type":"uint128"},{"internalType":"uint128","name":"epoch","type":"uint128"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEndStakes","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"frontEnds","outputs":[{"internalType":"uint256","name":"kickbackRate","type":"uint256"},{"internalType":"bool","name":"registered","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_frontEnd","type":"address"}],"name":"getCompoundedFrontEndStake","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getCompoundedLUSDDeposit","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getDepositorETHGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_depositor","type":"address"}],"name":"getDepositorLQTYGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getETH","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemColl","outputs":[{"internalType":"uint256","name":"entireSystemColl","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getEntireSystemDebt","outputs":[{"internalType":"uint256","name":"entireSystemDebt","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_frontEnd","type":"address"}],"name":"getFrontEndLQTYGain","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalLUSDDeposits","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastETHError_Offset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastLQTYError","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastLUSDLossError_Offset","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lusdToken","outputs":[{"internalType":"contract ILUSDToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_debtToOffset","type":"uint256"},{"internalType":"uint256","name":"_collToAdd","type":"uint256"}],"name":"offset","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"priceFeed","outputs":[{"internalType":"contract IPriceFeed","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"address","name":"_frontEndTag","type":"address"}],"name":"provideToSP","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_kickbackRate","type":"uint256"}],"name":"registerFrontEnd","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_borrowerOperationsAddress","type":"address"},{"internalType":"address","name":"_troveManagerAddress","type":"address"},{"internalType":"address","name":"_activePoolAddress","type":"address"},{"internalType":"address","name":"_lusdTokenAddress","type":"address"},{"internalType":"address","name":"_sortedTrovesAddress","type":"address"},{"internalType":"address","name":"_priceFeedAddress","type":"address"},{"internalType":"address","name":"_communityIssuanceAddress","type":"address"}],"name":"setAddresses","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"sortedTroves","outputs":[{"internalType":"contract ISortedTroves","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"troveManager","outputs":[{"internalType":"contract ITroveManager","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_upperHint","type":"address"},{"internalType":"address","name":"_lowerHint","type":"address"}],"name":"withdrawETHGainToTrove","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"withdrawFromSP","outputs":[],"stateMutability":"nonpayable","type":"function"},{"stateMutability":"payable","type":"receive"}]')},449:function(e){e.exports=JSON.parse("[]")},450:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_lqtyTokenAddress","type":"address"}],"name":"LQTYTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardAdded","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"reward","type":"uint256"}],"name":"RewardPaid","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Staked","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"_uniTokenAddress","type":"address"}],"name":"UniTokenAddressChanged","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"user","type":"address"},{"indexed":false,"internalType":"uint256","name":"amount","type":"uint256"}],"name":"Withdrawn","type":"event"},{"inputs":[],"name":"NAME","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"claimReward","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"duration","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"earned","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isOwner","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastTimeRewardApplicable","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lastUpdateTime","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"lqtyToken","outputs":[{"internalType":"contract ILQTYToken","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"periodFinish","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardPerToken","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardPerTokenStored","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"rewardRate","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"rewards","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"_lqtyTokenAddress","type":"address"},{"internalType":"address","name":"_uniTokenAddress","type":"address"},{"internalType":"uint256","name":"_duration","type":"uint256"}],"name":"setParams","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"uniToken","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"userRewardPerTokenPaid","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"withdraw","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"withdrawAndClaim","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},451:function(e){e.exports=JSON.parse('[{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"}]')},452:function(e){e.exports=JSON.parse('[{"inputs":[{"internalType":"string","name":"name","type":"string"},{"internalType":"string","name":"symbol","type":"string"},{"internalType":"address","name":"initialAccount","type":"address"},{"internalType":"uint256","name":"initialBalance","type":"uint256"}],"stateMutability":"payable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"spender","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint256","name":"value","type":"uint256"}],"name":"Transfer","type":"event"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"}],"name":"allowance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"approve","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"approveInternal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"burn","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"decimals","outputs":[{"internalType":"uint8","name":"","type":"uint8"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"subtractedValue","type":"uint256"}],"name":"decreaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"spender","type":"address"},{"internalType":"uint256","name":"addedValue","type":"uint256"}],"name":"increaseAllowance","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"mint","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transfer","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"sender","type":"address"},{"internalType":"address","name":"recipient","type":"address"},{"internalType":"uint256","name":"amount","type":"uint256"}],"name":"transferFrom","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"value","type":"uint256"}],"name":"transferInternal","outputs":[],"stateMutability":"nonpayable","type":"function"}]')},453:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t._connectToMulticall=void 0;var a=n(88),i=[{constant:!0,inputs:[],name:"getCurrentBlockTimestamp",outputs:[{name:"timestamp",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"}],r={1:"0xeefba1e63905ef1d7acba5a8513c70307c1ce441",3:"0x53c43764255c17bd724f74c4ef150724ac50a3ed",4:"0x42ad527de7d4e9d9d011ac45b31d8551f8fe9821",5:"0x77dca2c955b15e9de4dbbcf1246b4b85b651e50e",42:"0x2cc8688c5f75e365aaeeb4ea8d6a480405a48d2a"};t._connectToMulticall=function(e,t){return function(e){return e in r}(t)?new a.Contract(r[t],i,e):void 0}},454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},455:function(e,t,n){"use strict";var a=n(48),i=n(55);Object.defineProperty(t,"__esModule",{value:!0}),t.ObservableEthersLiquity=void 0;var r=n(125),s=function(e){var t=void 0,n=0;return function(){var a,i=(a=arguments.length-1)<0||arguments.length<=a?void 0:arguments[a];void 0!==i.blockNumber&&i.blockNumber>n&&(n=i.blockNumber),void 0!==t&&clearTimeout(t),t=setTimeout((function(){e(n),t=void 0}),50)}},o=function(){function e(t){a(this,e),this._readable=t}return i(e,[{key:"watchTotalRedistributed",value:function(e){var t=this,n=r._getContracts(this._readable.connection),a=n.activePool,i=n.defaultPool,o=a.filters.EtherSent(),u=s((function(n){t._readable.getTotalRedistributed({blockTag:n}).then(e)})),l=function(e,t,n){e===i.address&&u(n)};return a.on(o,l),function(){a.removeListener(o,l)}}},{key:"watchTroveWithoutRewards",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=r._requireAddress(this._readable.connection));var a=r._getContracts(this._readable.connection),i=a.troveManager,o=a.borrowerOperations,u=i.filters.TroveUpdated(t),l=o.filters.TroveUpdated(t),c=s((function(a){n._readable.getTroveBeforeRedistribution(t,{blockTag:a}).then(e)}));return i.on(u,c),o.on(l,c),function(){i.removeListener(u,c),o.removeListener(l,c)}}},{key:"watchNumberOfTroves",value:function(e){var t=this,n=r._getContracts(this._readable.connection).troveManager,a=(0,n.filters.TroveUpdated)(),i=s((function(n){t._readable.getNumberOfTroves({blockTag:n}).then(e)}));return n.on(a,i),function(){n.removeListener(a,i)}}},{key:"watchPrice",value:function(e){throw new Error("Method not implemented.")}},{key:"watchTotal",value:function(e){var t=this,n=r._getContracts(this._readable.connection).troveManager,a=(0,n.filters.TroveUpdated)(),i=s((function(n){t._readable.getTotal({blockTag:n}).then(e)}));return n.on(a,i),function(){n.removeListener(a,i)}}},{key:"watchStabilityDeposit",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=r._requireAddress(this._readable.connection));var a=r._getContracts(this._readable.connection),i=a.activePool,o=a.stabilityPool,u=o.filters.UserDepositChanged,l=i.filters.EtherSent,c=u(t),d=l(),p=s((function(a){n._readable.getStabilityDeposit(t,{blockTag:a}).then(e)})),y=function(e,t,n){e===o.address&&p(n)};return o.on(c,p),i.on(d,y),function(){o.removeListener(c,p),i.removeListener(d,y)}}},{key:"watchLUSDInStabilityPool",value:function(e){var t=this,n=r._getContracts(this._readable.connection),a=n.lusdToken,i=n.stabilityPool,o=a.filters.Transfer,u=[o(i.address),o(null,i.address)],l=s((function(n){t._readable.getLUSDInStabilityPool({blockTag:n}).then(e)}));return u.forEach((function(e){return a.on(e,l)})),function(){return u.forEach((function(e){return a.removeListener(e,l)}))}}},{key:"watchLUSDBalance",value:function(e,t){var n=this;null!==t&&void 0!==t||(t=r._requireAddress(this._readable.connection));var a=r._getContracts(this._readable.connection).lusdToken,i=a.filters.Transfer,o=[i(t),i(null,t)],u=s((function(a){n._readable.getLUSDBalance(t,{blockTag:a}).then(e)}));return o.forEach((function(e){return a.on(e,u)})),function(){return o.forEach((function(e){return a.removeListener(e,u)}))}}}]),e}();t.ObservableEthersLiquity=o},457:function(e,t,n){"use strict";var a=n(225),i=n(85),r=n(65);Object.defineProperty(t,"__esModule",{value:!0}),t.logsToString=void 0;var s=n(49),o=n(67),u=n(6),l=function(e,t){var n=[],a=[];return e.forEach((function(e){var i=function(e,t){var n=e.address;if(n in t)try{return{address:n,logDescription:t[n].parseLog(e)}}catch(a){console.warn("Failed to parse log:"),console.warn(e),console.warn("Caught:"),console.warn(a)}}(e,t);i?n.push(i):a.push(e)})),[n,a]},c=s.BigNumber.from(10).pow(9),d=function(e,t){var n=Object.entries(e.args).filter((function(e){return!r(e,1)[0].match(/^[0-9]/)})).map((function(e){var n=r(e,2),a=n[0],i=n[1];return"".concat(a,": ").concat(function(e,t){return s.BigNumber.isBigNumber(e)?e.gte(c)?"".concat(u.Decimal.fromBigNumberString(e.toHexString()),"e18"):e.toString():"string"===typeof e?e===o.AddressZero?"address(0)":t&&e in t?t[e]:e:String(e)}(i,t))}));return"".concat(e.name,"({ ").concat(n.join(", ")," })")};t.logsToString=function(e,t){var n=t,s=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=r(e,2)[1];return[t.address,t.interface]})))}(n),o=function(e){return Object.fromEntries(Object.entries(e).map((function(e){var t=r(e,2),n=t[0];return[t[1].address,n]})))}(n),u=i(a({},e.from,"user"),o),c=l(e.logs,s),p=r(c,2),y=p[0],b=p[1];return b.length>0&&(console.warn("Warning: not all logs were parsed. Unparsed logs:"),console.warn(b)),y.length>0?"Logs of tx ".concat(e.transactionHash,":\n")+y.map((function(e){var t=e.address,n=e.logDescription;return"  ".concat(o[t],".").concat(d(n,u))})).join("\n"):"No logs were parsed in tx ".concat(e.transactionHash)}},458:function(e,t,n){"use strict";var a=n(55),i=n(5),r=n(79),s=n(48),o=n(82),u=n(83);Object.defineProperty(t,"__esModule",{value:!0}),t.EthersLiquity=t.EthersTransactionFailedError=void 0;var l=n(6),c=n(125),d=n(286),p=n(284),y=n(287),b=function(e){o(n,e);var t=u(n);function n(e,a){return s(this,n),t.call(this,"EthersTransactionFailedError",e,a)}return n}(l.TransactionFailedError);t.EthersTransactionFailedError=b;var m=function(){var e=r(i.mark((function e(t){var n;return i.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.waitForReceipt();case 2:if("succeeded"===(n=e.sent).status){e.next=5;break}throw new b("Transaction failed",n);case 5:return e.abrupt("return",n.details);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),f=function(){function e(t){s(this,e),this._readable=t,this.connection=t.connection,this.populate=new d.PopulatableEthersLiquity(t),this.send=new y.SendableEthersLiquity(this.populate)}return a(e,[{key:"hasStore",value:function(){return!1}},{key:"getTotalRedistributed",value:function(e){return this._readable.getTotalRedistributed(e)}},{key:"getTroveBeforeRedistribution",value:function(e,t){return this._readable.getTroveBeforeRedistribution(e,t)}},{key:"getTrove",value:function(e,t){return this._readable.getTrove(e,t)}},{key:"getNumberOfTroves",value:function(e){return this._readable.getNumberOfTroves(e)}},{key:"getPrice",value:function(e){return this._readable.getPrice(e)}},{key:"_getActivePool",value:function(e){return this._readable._getActivePool(e)}},{key:"_getDefaultPool",value:function(e){return this._readable._getDefaultPool(e)}},{key:"getTotal",value:function(e){return this._readable.getTotal(e)}},{key:"getStabilityDeposit",value:function(e,t){return this._readable.getStabilityDeposit(e,t)}},{key:"getRemainingStabilityPoolLQTYReward",value:function(e){return this._readable.getRemainingStabilityPoolLQTYReward(e)}},{key:"getLUSDInStabilityPool",value:function(e){return this._readable.getLUSDInStabilityPool(e)}},{key:"getLUSDBalance",value:function(e,t){return this._readable.getLUSDBalance(e,t)}},{key:"getLQTYBalance",value:function(e,t){return this._readable.getLQTYBalance(e,t)}},{key:"getUniTokenBalance",value:function(e,t){return this._readable.getUniTokenBalance(e,t)}},{key:"getUniTokenAllowance",value:function(e,t){return this._readable.getUniTokenAllowance(e,t)}},{key:"_getRemainingLiquidityMiningLQTYRewardCalculator",value:function(e){return this._readable._getRemainingLiquidityMiningLQTYRewardCalculator(e)}},{key:"getRemainingLiquidityMiningLQTYReward",value:function(e){return this._readable.getRemainingLiquidityMiningLQTYReward(e)}},{key:"getLiquidityMiningStake",value:function(e,t){return this._readable.getLiquidityMiningStake(e,t)}},{key:"getTotalStakedUniTokens",value:function(e){return this._readable.getTotalStakedUniTokens(e)}},{key:"getLiquidityMiningLQTYReward",value:function(e,t){return this._readable.getLiquidityMiningLQTYReward(e,t)}},{key:"getCollateralSurplusBalance",value:function(e,t){return this._readable.getCollateralSurplusBalance(e,t)}},{key:"getTroves",value:function(e,t){return this._readable.getTroves(e,t)}},{key:"_getBlockTimestamp",value:function(e){return this._readable._getBlockTimestamp(e)}},{key:"_getFeesFactory",value:function(e){return this._readable._getFeesFactory(e)}},{key:"getFees",value:function(e){return this._readable.getFees(e)}},{key:"getLQTYStake",value:function(e,t){return this._readable.getLQTYStake(e,t)}},{key:"getTotalStakedLQTY",value:function(e){return this._readable.getTotalStakedLQTY(e)}},{key:"getFrontendStatus",value:function(e,t){return this._readable.getFrontendStatus(e,t)}},{key:"openTrove",value:function(e,t,n){return this.send.openTrove(e,t,n).then(m)}},{key:"closeTrove",value:function(e){return this.send.closeTrove(e).then(m)}},{key:"adjustTrove",value:function(e,t,n){return this.send.adjustTrove(e,t,n).then(m)}},{key:"depositCollateral",value:function(e,t){return this.send.depositCollateral(e,t).then(m)}},{key:"withdrawCollateral",value:function(e,t){return this.send.withdrawCollateral(e,t).then(m)}},{key:"borrowLUSD",value:function(e,t,n){return this.send.borrowLUSD(e,t,n).then(m)}},{key:"repayLUSD",value:function(e,t){return this.send.repayLUSD(e,t).then(m)}},{key:"setPrice",value:function(e,t){return this.send.setPrice(e,t).then(m)}},{key:"liquidate",value:function(e,t){return this.send.liquidate(e,t).then(m)}},{key:"liquidateUpTo",value:function(e,t){return this.send.liquidateUpTo(e,t).then(m)}},{key:"depositLUSDInStabilityPool",value:function(e,t,n){return this.send.depositLUSDInStabilityPool(e,t,n).then(m)}},{key:"withdrawLUSDFromStabilityPool",value:function(e,t){return this.send.withdrawLUSDFromStabilityPool(e,t).then(m)}},{key:"withdrawGainsFromStabilityPool",value:function(e){return this.send.withdrawGainsFromStabilityPool(e).then(m)}},{key:"transferCollateralGainToTrove",value:function(e){return this.send.transferCollateralGainToTrove(e).then(m)}},{key:"sendLUSD",value:function(e,t,n){return this.send.sendLUSD(e,t,n).then(m)}},{key:"sendLQTY",value:function(e,t,n){return this.send.sendLQTY(e,t,n).then(m)}},{key:"redeemLUSD",value:function(e,t,n){return this.send.redeemLUSD(e,t,n).then(m)}},{key:"claimCollateralSurplus",value:function(e){return this.send.claimCollateralSurplus(e).then(m)}},{key:"stakeLQTY",value:function(e,t){return this.send.stakeLQTY(e,t).then(m)}},{key:"unstakeLQTY",value:function(e,t){return this.send.unstakeLQTY(e,t).then(m)}},{key:"withdrawGainsFromStaking",value:function(e){return this.send.withdrawGainsFromStaking(e).then(m)}},{key:"registerFrontend",value:function(e,t){return this.send.registerFrontend(e,t).then(m)}},{key:"_mintUniToken",value:function(e,t,n){return this.send._mintUniToken(e,t,n).then(m)}},{key:"approveUniTokens",value:function(e,t){return this.send.approveUniTokens(e,t).then(m)}},{key:"stakeUniTokens",value:function(e,t){return this.send.stakeUniTokens(e,t).then(m)}},{key:"unstakeUniTokens",value:function(e,t){return this.send.unstakeUniTokens(e,t).then(m)}},{key:"withdrawLQTYRewardFromLiquidityMining",value:function(e){return this.send.withdrawLQTYRewardFromLiquidityMining(e).then(m)}},{key:"exitLiquidityMining",value:function(e){return this.send.exitLiquidityMining(e).then(m)}}],[{key:"_from",value:function(t){return c._usingStore(t)?new h(p.ReadableEthersLiquity._from(t)):new e(p.ReadableEthersLiquity._from(t))}},{key:"connect",value:function(){var t=r(i.mark((function t(n,a){return i.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=e,t.next=3,c._connect(n,a);case 3:return t.t1=t.sent,t.abrupt("return",t.t0._from.call(t.t0,t.t1));case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()}]),e}();t.EthersLiquity=f;var h=function(e){o(n,e);var t=u(n);function n(e){var a;return s(this,n),(a=t.call(this,e)).store=e.store,a}return a(n,[{key:"hasStore",value:function(e){return void 0===e||e===this.connection.useStore}}]),n}(f)},486:function(e,t){},489:function(e,t){},491:function(e,t,n){"use strict";var a=n(85),i=n(65);Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquityReducer=void 0;var r=n(1),s=n(297),o=n(233);t.useLiquityReducer=function(e,t){var n=o.useLiquityStore(),u=r.useRef(n),l=r.useRef(t(n.state)),c=r.useReducer((function(){return{}}),{}),d=i(c,2)[1],p=r.useCallback((function(t){var n=e(l.current,t);s.equals(n,l.current)||(l.current=n,d())}),[e]);return r.useEffect((function(){return n.subscribe((function(e){return p(a({type:"updateStore"},e))}))}),[n,p]),u.current!==n&&(l.current=t(n.state),u.current=n),[l.current,p]}},492:function(e,t,n){"use strict";var a=n(65);Object.defineProperty(t,"__esModule",{value:!0}),t.useLiquitySelector=void 0;var i=n(1),r=n(297),s=n(233);t.useLiquitySelector=function(e){var t=s.useLiquityStore(),n=i.useReducer((function(){return{}}),{}),o=a(n,2)[1];return i.useEffect((function(){return t.subscribe((function(t){var n=t.newState,a=t.oldState;r.equals(e(n),e(a))||o()}))}),[t,e]),e(t.state)}},6:function(e,t,n){"use strict";var a=this&&this.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n),Object.defineProperty(e,a,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||a(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(226),t),i(n(126),t),i(n(415),t),i(n(416),t),i(n(417),t),i(n(418),t),i(n(419),t),i(n(420),t),i(n(421),t),i(n(422),t),i(n(423),t),i(n(424),t),i(n(425),t)},628:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"PENDING_BONDS",(function(){return Ye})),n.d(a,"BONDS",(function(){return Ge})),n.d(a,"NOT_BONDED_YET",(function(){return Qe})),n.d(a,"BONDS_NAVIGATION",(function(){return We})),n.d(a,"BOND_CREATED",(function(){return Ze})),n.d(a,"AVAILABLE_BONDS",(function(){return He})),n.d(a,"BOND_ASSET",(function(){return ze})),n.d(a,"BOND_NFT",(function(){return Ve})),n.d(a,"BREAK_EVEN_TIME",(function(){return Je})),n.d(a,"OPTIMUM_REBOND_TIME",(function(){return Ke})),n.d(a,"REBOND_RETURN",(function(){return $e})),n.d(a,"REBOND_TIME_ROI",(function(){return Xe})),n.d(a,"OPTIMUM_APY",(function(){return et})),n.d(a,"OPTIMUM_ACCRUAL",(function(){return tt})),n.d(a,"BOND_DEPOSIT",(function(){return nt})),n.d(a,"ACCRUED_AMOUNT",(function(){return at})),n.d(a,"MARKET_VALUE",(function(){return it})),n.d(a,"BOND_AGE",(function(){return rt})),n.d(a,"BOND_RETURN",(function(){return st})),n.d(a,"BOND_STATUS",(function(){return ot})),n.d(a,"PENDING_STATUS",(function(){return ut})),n.d(a,"CANCELLED_STATUS",(function(){return lt})),n.d(a,"CLAIMED_STATUS",(function(){return ct})),n.d(a,"CANCEL_BOND",(function(){return dt})),n.d(a,"CLAIM_BOND",(function(){return pt})),n.d(a,"BLUSD_MARKET_PRICE",(function(){return yt})),n.d(a,"BLUSD_FAIR_PRICE",(function(){return bt})),n.d(a,"TOTAL_BONDS_STATISTIC",(function(){return mt})),n.d(a,"PENDING_BONDS_STATISTIC",(function(){return ft})),n.d(a,"CANCELLED_BONDS_STATISTIC",(function(){return ht})),n.d(a,"CLAIMED_BONDS_STATISTIC",(function(){return vt})),n.d(a,"BLUSD_SUPPLY",(function(){return jt})),n.d(a,"BLUSD_FLOOR_PRICE",(function(){return Tt})),n.d(a,"BLUSD_WIND_DOWN_PRICE",(function(){return xt})),n.d(a,"BLUSD_APR",(function(){return gt})),n.d(a,"BLUSD_LP_APR",(function(){return Ot})),n.d(a,"BLUSD_YIELD_AMPLIFICATION",(function(){return wt})),n.d(a,"TREASURY_TOTAL",(function(){return _t})),n.d(a,"TREASURY_PENDING",(function(){return St})),n.d(a,"TREASURY_ACQUIRED",(function(){return kt})),n.d(a,"TREASURY_PERMANENT",(function(){return Dt})),n.d(a,"ESTIMATES_ONLY_NOTICE",(function(){return Lt})),n.d(a,"INFINITE_ESTIMATION",(function(){return Et}));var i=n(1),r=n.n(i),s=n(103),o=n.n(s),u=n(201),l=n.n(u),c=(n(392),n(68)),d=n(639),p=n(641),y=n(163),b=n(119),m=n(14),f=n(115),h=n(165),v=n(5),j=n.n(v),T=n(62),x=n(13),g=n(280),O=n(24),w={frontendTag:g.a};function _(e,t){return t in e}var S=function(e){var t=Object(x.a)({},w);if("object"===typeof e&&null!==e){if(_(e,"frontendTag")&&""!==e.frontendTag){var n=e.frontendTag;"string"===typeof n&&Object(O.isAddress)(n)?t.frontendTag=Object(O.getAddress)(n):(console.error("Malformed frontendTag:"),console.log(n))}if(_(e,"infuraApiKey")&&""!==e.infuraApiKey){var a=e.infuraApiKey;"string"===typeof a?t.infuraApiKey=a:(console.error("Malformed infuraApiKey:"),console.log(a))}if(_(e,"testnetOnly")){var i=e.testnetOnly;"boolean"===typeof i?t.testnetOnly=i:(console.error("Malformed testnetOnly:"),console.log(i))}}else console.error("Malformed config:"),console.log(e);return t},k=void 0,D=function(){var e=Object(T.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("config.json");case 3:if((t=e.sent).ok){e.next=6;break}throw new Error("Failed to fetch config.json (status ".concat(t.status,")"));case 6:return e.t0=S,e.next=9,t.json();case 9:return e.t1=e.sent,e.abrupt("return",(0,e.t0)(e.t1));case 13:return e.prev=13,e.t2=e.catch(0),console.error(e.t2),e.abrupt("return",Object(x.a)({},w));case 17:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(){return e.apply(this,arguments)}}(),L=function(){return k||(k=D()),k},E=n(0),A=Object(i.createContext)(void 0),C=["homestead","kovan","rinkeby","ropsten","goerli"],I=function(e){var t=e.children,n=e.loader,a=e.unsupportedNetworkFallback,r=e.unsupportedMainnetFallback,s=Object(c.b)(),o=s.library,u=s.account,l=s.chainId,d=Object(i.useState)(),p=Object(m.a)(d,2),v=p[0],j=p[1],T=Object(i.useMemo)((function(){if(v&&o&&u&&l)try{return Object(h._connectByChainId)(o,o.getSigner(u),l,{userAddress:u,frontendTag:v.frontendTag,useStore:"blockPolled"})}catch(e){}}),[v,o,u,l]);if(Object(i.useEffect)((function(){L().then(j)}),[]),Object(i.useEffect)((function(){if(v&&T){var e=T.provider,t=T.chainId;if(Object(y.isBatchedProvider)(e)&&e.chainId!==t&&(e.chainId=t),Object(y.isWebSocketAugmentedProvider)(e)){var n=Object(f.a)(t);return n.name&&C.includes(n.name)&&v.infuraApiKey?e.openWebSocket.apply(e,Object(b.a)(function(e,t){return["wss://".concat("homestead"===e?"mainnet":e,".infura.io/ws/v3/").concat(t),e]}(n.name,v.infuraApiKey))):T._isDev&&e.openWebSocket("ws://".concat(window.location.hostname,":8546"),t),function(){e.closeWebSocket()}}}}),[v,T]),!v||!o||!u||!l)return Object(E.jsx)(E.Fragment,{children:n});if(v.testnetOnly&&1===l)return Object(E.jsx)(E.Fragment,{children:r});if(!T)return a?Object(E.jsx)(E.Fragment,{children:a(l)}):null;var x=h.EthersLiquity._from(T);return x.store.logging=!0,Object(E.jsx)(A.Provider,{value:{config:v,account:u,provider:o,liquity:x},children:t})},R=function(){var e=Object(i.useContext)(A);if(!e)throw new Error("You must provide a LiquityContext via LiquityProvider");return e},M=new(n(369).a)({});var P=n(140),B=n(120),U=n(39),N=n(253),F=n(341);B.b.add(U.l,U.h,U.i,U.p,U.u,U.y,U.z,U.g,U.x,U.t,U.j,U.k,N.a,U.m,U.A,U.B,U.q,U.n,U.w,U.o,U.d,U.b,U.c,U.a,U.v,U.r,U.s,U.f,N.b,U.e);var q=function(e){switch(e){case"clipboard":return["far","clipboard"];case"question-circle":return["far","question-circle"];default:return e}},Y=function(e){var t=e.name,n=e.style,a=Object(P.a)(e,["name","style"]);return Object(E.jsx)(F.a,Object(x.a)({style:n,icon:q(t)},a))},G=function(e){switch(e){case"success":return Object(E.jsx)(Y,{name:"check-circle",color:"success","aria-label":"Success"});case"warning":return Object(E.jsx)(Y,{name:"exclamation-triangle",color:"warning","aria-label":"Warning"});case"danger":return Object(E.jsx)(Y,{name:"exclamation-triangle",color:"danger","aria-label":"Danger"});case"info":return Object(E.jsx)(Y,{name:"info-circle",color:"info","aria-label":"Info"})}return null},Q=function(e){var t=e.intent,n=e.title,a=e.icon,i=e.cancelLabel,r=e.onCancel,s=e.children;return Object(E.jsxs)(d.d,{sx:{p:0,borderRadius:"4px"},children:[t?Object(E.jsx)(d.b,{sx:{height:"4px",bg:t,borderRadius:"3px 3px 0 0"}}):null,Object(E.jsxs)(d.h,{sx:{justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"muted",p:[3,4],pb:3},children:[a||G(t),Object(E.jsx)(d.j,{as:"h1",sx:{textAlign:"center",fontSize:[2,3],px:[3,0]},children:n}),Object(E.jsx)(d.c,{variant:"icon",onClick:r,children:Object(E.jsx)(Y,{name:"times",size:"lg","aria-label":i||"Cancel"})})]}),s]})},W=function(e){var t=e.title,n=e.cancelLabel,a=e.onCancel,i=e.retryLabel,r=e.onRetry,s=e.children;return Object(E.jsxs)(Q,{intent:"danger",title:t,cancelLabel:n,onCancel:a,children:[Object(E.jsx)(d.b,{sx:{p:[3,4]},children:s}),Object(E.jsxs)(d.h,{sx:{p:[3,4],borderTop:1,borderColor:"muted",justifyContent:"flex-end",flexDirection:["column","row"],alignItems:"center"},children:[Object(E.jsx)(d.c,{variant:"danger",sx:{mr:[0,3],mb:[2,0],width:["100%","auto"]},onClick:a,children:n||"Cancel"}),Object(E.jsx)(d.c,{sx:{width:["100%","auto"]},onClick:r,children:i||"Retry"})]})]})},Z=function(e){var t=e.title,n=e.icon,a=e.waitReason,i=e.cancelLabel,r=e.onCancel,s=e.children;return Object(E.jsxs)(Q,{title:t,icon:n,cancelLabel:i,onCancel:r,children:[s,Object(E.jsx)(d.b,{sx:{px:[3,4],pb:[3,4]},children:Object(E.jsxs)(d.h,{sx:{flexDirection:["column","row"],bg:"muted",p:[3,4],alignItems:["center","auto"]},children:[Object(E.jsx)(d.s,{size:"3em",sx:{mr:[0,3],mb:[2,0]}}),Object(E.jsx)(d.h,{sx:{flexDirection:"column",alignItems:["center","flex-start"]},children:a})]})})]})},H=function(e){var t=e.title,n=e.icon,a=e.onCancel,i=e.children;return Object(E.jsx)(Z,{title:t,icon:n,waitReason:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(d.t,{sx:{fontWeight:"bold"},children:"Waiting for connection confirmation..."}),Object(E.jsx)(d.t,{children:"This won\u2019t cost you any Ether"})]}),cancelLabel:"Cancel connection",onCancel:a,children:Object(E.jsx)(d.b,{sx:{p:[3,4]},children:i})})},z=function(){return Object(E.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(E.jsx)("title",{children:"MetaMask extension icon"}),Object(E.jsx)("path",{d:"M8.49025 3.49976L1.49216 0.499756L0.492432 3.49976L2.49189 11.9998L21.4867 11.4998L23.4861 3.49976L21.9866 0.499756L15.4883 3.49976H8.49025Z",fill:"#763D16"}),Object(E.jsx)("path",{d:"M6.99048 11.9998H17.9875V18.9998H6.99048V11.9998Z",fill:"#333333"}),Object(E.jsx)("rect",{x:"7.99023",y:"16.9998",width:"5.99836",height:"3",fill:"#333333"}),Object(E.jsx)("path",{d:"M1.58124 10.6642C1.72755 10.8311 1.76935 11.0607 1.70665 11.2485L0.222731 15.8398C0.18093 15.9651 0.18093 16.0903 0.222731 16.1946L1.51854 20.6398C1.62304 20.9738 1.95745 21.1616 2.27095 21.0572L6.7227 19.8259C6.9108 19.7633 7.1198 19.8259 7.287 19.9511L8.06031 20.5772C8.08121 20.5981 8.08121 20.5981 8.10211 20.5981L10.0249 21.9338C10.1294 21.9964 10.2548 22.0381 10.3802 22.0381H13.5989C13.7243 22.0381 13.8497 21.9964 13.9542 21.9338L15.877 20.5981C15.8979 20.5981 15.8979 20.5772 15.9188 20.5772L16.6921 19.9511C16.8384 19.8259 17.0474 19.7842 17.2564 19.8259L21.7081 21.0572C22.0426 21.1407 22.377 20.9529 22.4606 20.6398L23.7564 16.1946C23.7982 16.0694 23.7982 15.9442 23.7564 15.8398L22.2725 11.2485C22.2098 11.0398 22.2516 10.8311 22.3979 10.6642L23.9863 3.54766C24.0072 3.44331 24.0072 3.33897 23.9654 3.23462L23.0249 0.417226C22.9204 0.0833133 22.5442 -0.0836433 22.2098 0.0415742L15.2709 2.6294C15.2082 2.65027 15.1246 2.67114 15.0619 2.67114H8.91722C8.83362 2.67114 8.77092 2.65027 8.70822 2.6294L1.76935 0.0415742C1.43494 -0.0836433 1.05874 0.0833133 0.954238 0.417226L0.0346286 3.23462C-0.00717182 3.3181 -0.00717182 3.44331 0.0137284 3.54766L1.58124 10.6642ZM13.996 14.2537L14.5185 13.1685C14.5812 13.0433 14.7484 12.9807 14.8738 13.0433L16.1278 13.6068C16.3577 13.7111 16.3368 14.0451 16.086 14.1285L14.3304 14.6503C14.1005 14.7129 13.8915 14.4833 13.996 14.2537ZM13.8915 6.71984C13.7661 6.61549 13.7661 6.40679 13.9124 6.32331L21.8126 0.918096C21.9381 0.834618 22.1262 0.876357 22.1889 1.04331L23.1712 3.73549C23.1921 3.77723 23.1921 3.81897 23.1712 3.88157L21.5618 10.0798C21.52 10.2051 21.3946 10.2677 21.2692 10.2259L16.922 9.05723C16.8802 9.05723 16.8593 9.03636 16.8384 9.01549L13.8915 6.71984ZM10.0667 19.5338L10.213 18.3233C10.213 18.2607 10.2548 18.1981 10.3175 18.1564L10.6101 17.9477C10.6519 17.9268 10.6937 17.9059 10.7355 17.9059H13.2018C13.2436 17.9059 13.3063 17.9268 13.3272 17.9477L13.6198 18.1564C13.6825 18.1981 13.7034 18.2607 13.7243 18.3233L13.8497 19.5338C13.8706 19.6798 13.7452 19.8051 13.6198 19.8051H10.2757C10.1712 19.8051 10.0667 19.6798 10.0667 19.5338ZM7.85131 13.6068L9.10532 13.0433C9.25162 12.9807 9.39792 13.0433 9.46062 13.1685L9.98313 14.2537C10.0876 14.4624 9.87863 14.692 9.64873 14.6294L7.87221 14.1077C7.64231 14.0451 7.62141 13.7111 7.85131 13.6068ZM0.807936 3.86071C0.787036 3.81897 0.807936 3.75636 0.807936 3.71462L1.79025 1.04331C1.85295 0.897226 2.04105 0.834618 2.16645 0.918096L10.0667 6.32331C10.213 6.42766 10.213 6.61549 10.0876 6.71984L7.1407 9.01549C7.1198 9.03636 7.078 9.05723 7.0571 9.05723L2.70986 10.2259C2.58445 10.2677 2.45905 10.2051 2.41725 10.0798L0.807936 3.86071Z",fill:"#F36D34"})]})},V=function(e){var t=e.children;return Object(E.jsx)(d.g,{variant:"modalOverlay",children:Object(E.jsx)(d.g,{variant:"modal",children:t})})},J=function(e,t){switch(t.type){case"startActivating":return{type:"activating",connector:t.connector};case"finishActivating":return{type:"active",connector:"inactive"===e.type?M:e.connector};case"fail":if("inactive"!==e.type)return{type:t.error.message.match(/user rejected/i)?"rejectedByUser":t.error.message.match(/already pending/i)?"alreadyPending":"failed",connector:e.connector};break;case"retry":if("inactive"!==e.type)return{type:"activating",connector:e.connector};break;case"cancel":case"deactivate":return{type:"inactive"}}return console.warn("Ignoring connectionReducer action:"),console.log(t),console.log("  in state:"),console.log(e),e},K=function(e){var t=e.children,n=e.loader,a=Object(c.b)(),r=a.activate,s=a.deactivate,o=a.active,u=a.error,l=function(){var e=Object(c.b)(),t=e.activate,n=e.active,a=Object(i.useState)(!1),r=Object(m.a)(a,2),s=r[0],o=r[1];return Object(i.useEffect)((function(){!function(){var e=Object(T.a)(j.a.mark((function e(){return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.isAuthorized();case 3:if(!e.sent){e.next=8;break}return e.next=6,t(M,void 0,!0);case 6:e.next=9;break;case 8:throw new Error("Unauthorized");case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),o(!0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}()()}),[t]),Object(i.useEffect)((function(){n&&o(!0)}),[n]),s}(),p=Object(i.useReducer)(J,{type:"inactive"}),y=Object(m.a)(p,2),b=y[0],f=y[1],h=function(){var e,t;return null!==(e=null===(t=window.ethereum)||void 0===t?void 0:t.isMetaMask)&&void 0!==e&&e}();return Object(i.useEffect)((function(){u&&(f({type:"fail",error:u}),s())}),[u,s]),Object(i.useEffect)((function(){f(o?{type:"finishActivating"}:{type:"deactivate"})}),[o]),l?"active"===b.type?Object(E.jsx)(E.Fragment,{children:t}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(d.h,{sx:{height:"100vh",justifyContent:"center",alignItems:"center"},children:Object(E.jsx)(d.c,{onClick:function(){f({type:"startActivating",connector:M}),r(M)},children:h?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(z,{}),Object(E.jsx)(d.b,{sx:{ml:2},children:"Connect to MetaMask"})]}):Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Y,{name:"plug",size:"lg"}),Object(E.jsx)(d.b,{sx:{ml:2},children:"Connect wallet"})]})})}),"failed"===b.type&&Object(E.jsx)(V,{children:Object(E.jsxs)(W,{title:h?"Failed to connect to MetaMask":"Failed to connect wallet",onCancel:function(){return f({type:"cancel"})},onRetry:function(){f({type:"retry"}),r(b.connector)},children:[Object(E.jsx)(d.b,{sx:{textAlign:"center"},children:"You might need to install MetaMask or use a different browser."}),Object(E.jsxs)(d.n,{sx:{lineHeight:3},href:"https://metamask.io/download.html",target:"_blank",children:["Learn more ",Object(E.jsx)(Y,{size:"xs",name:"external-link-alt"})]})]})}),"activating"===b.type&&Object(E.jsx)(V,{children:Object(E.jsx)(H,{title:h?"Confirm connection in MetaMask":"Confirm connection in your wallet",icon:h?Object(E.jsx)(z,{}):Object(E.jsx)(Y,{name:"wallet",size:"lg"}),onCancel:function(){return f({type:"cancel"})},children:Object(E.jsxs)(d.t,{sx:{textAlign:"center"},children:["Confirm the request that's just appeared.",h?Object(E.jsx)(E.Fragment,{children:" If you can't see a request, open your MetaMask extension via your browser."}):Object(E.jsx)(E.Fragment,{children:" If you can't see a request, you might have to open your wallet."})]})})}),"rejectedByUser"===b.type&&Object(E.jsx)(V,{children:Object(E.jsx)(W,{title:"Cancel connection?",onCancel:function(){return f({type:"cancel"})},onRetry:function(){f({type:"retry"}),r(b.connector)},children:Object(E.jsx)(d.t,{children:"To use Liquity, you need to connect your Ethereum account."})})}),"alreadyPending"===b.type&&Object(E.jsx)(V,{children:Object(E.jsx)(W,{title:"Connection already requested",onCancel:function(){return f({type:"cancel"})},onRetry:function(){f({type:"retry"}),r(b.connector)},children:Object(E.jsx)(d.t,{children:"Please check your wallet and accept the connection request before retrying."})})})]}):Object(E.jsx)(E.Fragment,{children:n})},$=n(2),X=n(161),ee=(n(289),n(211));const te=({link:e})=>Object(E.jsxs)(d.n,{href:e,target:"_blank",children:["Learn more ",Object(E.jsx)(Y,{size:"xs",name:"external-link-alt"})]}),ne=({children:e,message:t,placement:n="top",link:a})=>Object(E.jsx)(ee.a,{interactive:!0,placement:n,content:Object(E.jsxs)(d.d,{variant:"tooltip",children:[t,a&&Object(E.jsx)(d.b,{mt:1,children:Object(E.jsx)(te,{link:a})})]}),children:Object(E.jsx)("span",{children:e})});var ae=n(166),ie={strokeLinecap:"butt",pathColor:"white",trailColor:"rgba(255, 255, 255, 0.33)"},re={strokeWidth:10,styles:Object(ae.b)(Object(x.a)(Object(x.a)({},ie),{},{pathTransitionDuration:30}))},se={strokeWidth:10,styles:Object(ae.b)(Object(x.a)(Object(x.a)({},ie),{},{pathTransitionDuration:.75}))},oe=Object(i.memo)(ae.a,(function(e,t){return e.value===t.value})),ue=function(e){var t=e.state,n=Object(i.useState)(0),a=Object(m.a)(n,2),r=a[0],s=a[1];return Object(i.useEffect)((function(){"confirmed"===t?setTimeout((function(){return s(1)}),40):setTimeout((function(){return s(.67)}),20)}),[t]),"confirmed"===t?Object(E.jsx)(oe,Object(x.a)(Object(x.a)({},Object(x.a)({value:r,maxValue:1},se)),{},{children:Object(E.jsx)(Y,{name:"check",color:"white",size:"lg"})})):"failed"===t||"cancelled"===t?Object(E.jsx)(oe,Object(x.a)(Object(x.a)({value:0},Object(x.a)({maxValue:1},se)),{},{children:Object(E.jsx)(Y,{name:"times",color:"white",size:"lg"})})):Object(E.jsx)(oe,Object(x.a)(Object(x.a)({},Object(x.a)({value:r,maxValue:1},re)),{},{children:Object(E.jsx)(Y,{name:"cog",color:"white",size:"lg",spin:!0})}))},le=function(e){var t=e.state,n=e.message,a=e.style;return"idle"===t||"waitingForApproval"===t?null:Object(E.jsxs)(d.h,{sx:Object(x.a)({alignItems:"center",bg:"confirmed"===t?"success":"cancelled"===t?"warning":"failed"===t?"danger":"primary",p:3,pl:4,position:"fixed",width:"100vw",bottom:0,overflow:"hidden"},a),children:[Object(E.jsx)(d.b,{sx:{mr:3,width:"40px",height:"40px"},children:Object(E.jsx)(ue,{state:t})}),Object(E.jsx)(d.t,{sx:{fontSize:3,color:"white"},children:"waitingForConfirmation"===t?"Waiting for confirmation":"cancelled"===t?"Cancelled":"failed"===t?n||"Transaction failed. Please try again.":"Confirmed"})]})};const ce=r.a.createContext(void 0),de=({children:e})=>{const t=Object(i.useState)({type:"idle"});return Object(E.jsx)(ce.Provider,{value:t,children:e})},pe=()=>{const e=Object(i.useContext)(ce);if(!e)throw new Error("You must provide a TransactionContext via TransactionProvider");return e},ye=e=>{const[t]=pe();return"idle"!==t.type&&("string"===typeof e?t.id===e:t.id.match(e))?t:{type:"idle"}},be=(e,t)=>{const[n,a]=pe();return[Object(i.useCallback)((async()=>{a({type:"waitingForApproval",id:e});try{const n=await t();a({type:"waitingForConfirmation",id:e,tx:n})}catch(n){(e=>"object"===typeof e&&null!==e&&"message"in e&&"string"===typeof e.message)(n)&&n.message.includes("User denied transaction signature")?a({type:"cancelled",id:e}):(console.error(n),a({type:"failed",id:e,error:new Error("Failed to send transaction (try again)")}))}}),[t,e,a]),n]};function me({id:e,tooltip:t,tooltipPlacement:n,showFailure:a,requires:i,send:s,children:o}){var u;const[l,c]=be(e,s),d=r.a.Children.only(o),p=(i||[]).filter((([e])=>!e)).map((([,e])=>e));"waitingForApproval"!==c.type&&"waitingForConfirmation"!==c.type||p.push("You must wait for confirmation");const y="asChildText"===(a=p.length>0?null!==(u=a)&&void 0!==u?u:t?"asTooltip":"asChildText":void 0)?r.a.cloneElement(d,{disabled:!0,variant:"danger"},p[0]):"asTooltip"===a?r.a.cloneElement(d,{disabled:!0}):r.a.cloneElement(d,{onClick:l});return"asTooltip"===a&&(t=p[0]),t?Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(ne,{message:t,placement:n||"right",children:y})}):y}const fe=()=>{const{provider:e}=R(),[t,n]=pe(),a="idle"!==t.type?t.id:void 0,r="waitingForConfirmation"===t.type?t.tx:void 0;return Object(i.useEffect)((()=>{if(a&&r){let t=!1,i=!1;const s=r.rawSentTransaction.hash,o=async()=>{try{const o=await r.waitForReceipt();if(t)return;const{confirmations:u}=o.rawReceipt,l=o.rawReceipt.blockNumber+u-1;if(console.log(`Block #${l} ${u}-confirms tx ${s}`),console.log(`Finish monitoring tx ${s}`),i=!0,"succeeded"===o.status)console.log(`${o}`),n({type:"confirmedOneShot",id:a});else{const i=await(async(e,t)=>{try{const n=await e.call(t,t.blockNumber);if(Object($.hexDataLength)(n)%32===4&&"0x08c379a0"===Object($.hexDataSlice)(n,0,4))return X.b.decode(["string"],Object($.hexDataSlice)(n,4))[0]}catch{return}})(e,o.rawReceipt);if(t)return;console.error(`Tx ${s} failed`),i&&console.error(`Revert reason: ${i}`),n({type:"failed",id:a,error:new Error(i?`Reverted: ${i}`:"Failed")})}}catch(o){if(t)return;i=!0,o instanceof h.EthersTransactionCancelledError?(console.log(`Cancelled tx ${s}`),n({type:"cancelled",id:a})):(console.error(`Failed to get receipt for tx ${s}`),console.error(o),n({type:"failed",id:a,error:new Error("Failed")}))}};return console.log(`Start monitoring tx ${s}`),o(),()=>{i||(n({type:"idle"}),console.log(`Cancel monitoring tx ${s}`),t=!0)}}}),[e,a,r,n]),Object(i.useEffect)((()=>{if("confirmedOneShot"===t.type&&a)n({type:"confirmed",id:a});else if("confirmed"===t.type||"failed"===t.type||"cancelled"===t.type){let e=!1;return setTimeout((()=>{e||n({type:"idle"})}),5e3),()=>{e=!0}}}),[t.type,n,a]),"idle"===t.type||"waitingForApproval"===t.type?null:Object(E.jsx)(le,{state:t.type,message:"failed"===t.type?t.error.message:void 0})},he="#1542cd",ve={primary:he,secondary:"#745ddf",accent:"#2eb6ea",success:"#28c081",warning:"#fd9d28",danger:"#dc2c10",dangerHover:"#ff755f",info:he,invalid:"pink",text:"#293147",background:"white",muted:"#eaebed",highlight:"#efeffe"},je={display:"flex",alignItems:"center",justifyContent:"center",":enabled":{cursor:"pointer"}},Te={...je,px:"32px",py:"12px",color:"white",border:1,fontWeight:"bold",":disabled":{opacity:.5}},xe=(e,t)=>({color:e,borderColor:e,background:"none",":enabled:hover":{color:"background",bg:t,borderColor:t}}),ge={...je,padding:0,width:"40px",height:"40px",background:"none",":disabled":{color:"text",opacity:.25}},Oe=18.7167,we=[0,3,4],_e=[3,3,4],Se={position:"relative",mt:_e,border:1,boxShadow:[1,null,2]},ke={...Se,padding:3,borderColor:"rgba(122,199,240,0.4)",background:"linear-gradient(200deg, #d4d9fc, #cae9f9)",h2:{mb:2,fontSize:Oe}},De={display:"block",width:"auto",flexShrink:0,padding:2,fontSize:3},Le={...De,bg:"background",border:1,borderColor:"muted",borderRadius:0,boxShadow:[1,2]},Ee={position:"fixed",left:0,top:0,width:"100vw",height:"100vh"},Ae={background:`linear-gradient(90deg, ${ve.background}, ${ve.muted})`};var Ce={breakpoints:["48em","52em","64em"],space:[0,4,8,16,32,64,128,256,512],fonts:{body:["system-ui","-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"sans-serif"].join(", "),heading:"inherit",monospace:"Menlo, monospace"},fontSizes:[12,14,16,20,24,32,48,64,96],fontWeights:{body:400,heading:600,light:200,medium:500,bold:600},lineHeights:{body:1.5,heading:1.25},colors:ve,borders:[0,"1px solid","2px solid"],shadows:["0","0px 4px 8px rgba(41, 49, 71, 0.1)","0px 8px 16px rgba(41, 49, 71, 0.1)"],text:{address:{fontFamily:"monospace",fontSize:1}},buttons:{primary:{...Te,bg:"primary",borderColor:"primary",":enabled:hover":{bg:"secondary",borderColor:"secondary"}},outline:{...Te,...xe("primary","secondary")},cancel:{...Te,...xe("text","text"),opacity:.8},danger:{...Te,bg:"danger",borderColor:"danger",":enabled:hover":{bg:"dangerHover",borderColor:"dangerHover"}},icon:{...ge,color:"primary",":enabled:hover":{color:"accent"}},dangerIcon:{...ge,color:"danger",":enabled:hover":{color:"dangerHover"}},titleIcon:{...ge,color:"text",":enabled:hover":{color:"success"}},close:{cursor:"pointer"}},cards:{primary:{...Se,padding:0,borderColor:"muted",bg:"background","> h2":{display:"flex",justifyContent:"space-between",alignItems:"center",height:"56px",pl:3,py:2,pr:2,bg:"muted",fontSize:Oe}},info:{...ke,display:["none","block"]},infoPopup:{...ke,position:"fixed",top:0,right:3,left:3,mt:"72px",height:"80%",overflowY:"scroll"},tooltip:{fontWeight:"body",marginY:1,a:{color:"accent",":hover":{opacity:.8}}}},forms:{label:{...De},radioLabel:{mr:4,width:"unset",svg:{mr:1}},unit:{...Le,textAlign:"center",bg:"muted"},input:{...Le,flex:1},editor:{}},layout:{header:{display:"flex",justifyContent:"space-between",alignItems:"stretch",position:["fixed","relative"],top:0,zIndex:1,px:[2,"12px","12px",5],py:[2,"12px","12px"],...Ae,boxShadow:[1,"none"]},footer:{display:"flex",alignItems:"center",justifyContent:"center",mt:_e,px:3,minHeight:"72px",bg:"muted"},main:{width:"100%",maxWidth:"1280px",mx:"auto",mt:["40px",0],mb:["40px","40px"],px:we},columns:{display:"flex",flexWrap:"wrap",justifyItems:"center"},left:{pr:we,width:["100%","58%"]},right:{width:["100%","42%"]},actions:{justifyContent:"flex-end",mt:2,button:{ml:2}},disabledOverlay:{position:"absolute",left:0,top:0,width:"100%",height:"100%",bg:"rgba(255, 255, 255, 0.5)"},modalOverlay:{...Ee,bg:"rgba(0, 0, 0, 0.8)",display:"flex",justifyContent:"center",alignItems:"center"},modal:{padding:3,width:["100%","40em"]},infoOverlay:{...Ee,display:["block","none"],bg:"rgba(255, 255, 255, 0.8)"},infoMessage:{display:"flex",justifyContent:"center",m:3,alignItems:"center",minWidth:"128px"},sidenav:{display:["flex","none"],flexDirection:"column",p:0,m:0,borderColor:"muted",mr:"25vw",height:"100%",...Ae},badge:{border:0,borderRadius:3,p:1,px:2,backgroundColor:"muted",color:"slate",fontSize:1,fontWeight:"body"}},styles:{root:{fontFamily:"body",lineHeight:"body",fontWeight:"body",height:"100%","#root":{height:"100%"}},a:{color:"primary",":hover":{color:"accent"},textDecoration:"none",fontWeight:"bold"},progress:{color:ve.success}},links:{nav:{px:2,py:1,fontWeight:"medium",fontSize:2,textTransform:"uppercase",letterSpacing:"2px",width:["100%","auto"],mt:[3,"auto"]}}},Ie=n(342),Re=n(134),Me=n(50),Pe=n(72),Be=n(6),Ue=n(20),Ne="LUSD",Fe="LQTY",qe=function(e){return e.substr(0,6)+"..."+e.substr(-4)};const Ye={term:"Pending bonds",description:"Your active bonds which are accruing bLUSD and can be claimed or cancelled."},Ge={term:"Bonds",description:"List of your pending bonds and bonds you have claimed or cancelled in the past."},Qe={term:"You don't have any pending bonds.",description:"You can bond LUSD to obtain Boosted LUSD (bLUSD) - a yield-amplified version of LUSD."},We={term:"Bonds"},Ze={term:"Bond created",description:"The date you created your bond. The bLUSD accrual starts at 0 and increases over time."},He={term:"Available bonds",description:"The types of bonds you can create."},ze={term:"Asset",description:"The type of token accepted for bonding."},Ve={term:"NFT",description:"Bonds are represented as unique visual NFTs. The NFT image evolves when your bond is claimed or cancelled."},Je={term:"Break-even time",description:"Estimated time at which the bond will have accrued enough bLUSD to offset the LUSD cost of the bond, under current market prices."},Ke={term:"Rebond time",description:"Estimated optimum time to claim the bond, sell the bLUSD for LUSD, and then bond again, to maximize your return under current market prices."},$e={term:`${Ke.term} return`,description:`Estimated return from selling your accrued bLUSD to LUSD at the ${Ke.term}, minus the initial LUSD cost of the bond, under current market prices.`},Xe={term:`${Ke.term} ROI`,description:`Estimated ROI of selling your accrued bLUSD to LUSD at the ${Ke.term}, minus the initial LUSD cost of the bond, under current market prices.`},et={term:"Max APR",description:`Estimated APY of continuously bonding and claiming at the ${Ke.term}, under current market prices. Rebonding at other times could lead to a lower APY.`},tt={term:"Rebond accrual",description:`The required amount of bLUSD to accrue for the ${Ke.term}, under current market prices.`,link:"https://docs.chickenbonds.org/faq/economic-design#_44lrt4qpho3a"},nt={term:"Deposit",description:"The amount deposited into the bond, which can be fully recovered by cancelling the bond."},at={term:"Accruing",description:"The amount of bLUSD this bond has accrued so far."},it={term:"Accrued value",description:"Current market value of the accrued bLUSD. The bLUSD market price can fluctuate but will always be higher than the floor price under rational market conditions."},rt={term:"Age",description:"Time elapsed since the creation of the bond."},st={term:"Claim-now return",description:"Expected LUSD gained from claiming the bond now and selling the bLUSD for LUSD and deducting the initial cost of the bond, under current market prices.",link:"https://docs.chickenbonds.org/faq/economic-design#_44lrt4qpho3a"},ot={term:"Status",description:"One of three values: Pending, Cancelled, or Claimed."},ut={term:"Pending",description:"An active bond which is accruding bLUSD and can be cancelled or claimed."},lt={term:"Cancelled",description:"A bond which you cancelled."},ct={term:"Claimed",description:"A bond which you claimed."},dt={term:"Cancel bond",description:"A bond can be cancelled at any time to recover the initially deposited LUSD amount while forgoing the accrued bLUSD.",link:"https://docs.chickenbonds.org/faq/basic-usage#_rwpo6dhx26fq"},pt={term:"Claim bond",description:"A bond can be claimed at any time to forgo the initially deposited LUSD amount and gain the accrued bLUSD.",link:"https://docs.chickenbonds.org/faq/basic-usage#_2c022erjceom"},yt={term:"Market price",description:"The current price of bLUSD according to the bLUSD Curve pool."},bt={term:"Fair price",description:"An estimated range of the market price of bLUSD based on the current yield amplification. The lower bound excludes the Pending bucket, the upper bound factors all buckets.",link:"https://docs.chickenbonds.org/faq/economic-design#how-is-the-fair-price-calculated"},mt={term:"Total bonds",description:"The total number of bonds including: cancelled, claimed and pending."},ft={term:"Pending bonds",description:"The current number of active bonds in the system which are not yet claimed or cancelled."},ht={term:"Cancelled bonds",description:"The total number of bonds which were cancelled."},vt={term:"Claimed bonds",description:"The total number of bonds which were claimed."},jt={term:"Total supply",description:"The total amount of bLUSD in circulation. Not including pending bonds accrued bLUSD."},Tt={term:"Floor price",description:"The amount of LUSD that an arbitrageur could redeem bLUSD for thus creating a lower bound bLUSD market price.",link:"https://docs.chickenbonds.org/faq/economic-design#_c2c3valbf2bj-1"},xt={term:"Net asset value",description:"The protocol supports a graceful wind down mechanism for migration purposes, whereby Yearn Finance governance can trigger a special function which moves the Permanent bucket LUSD into the Reserve, thus enabling all bLUSD to be redeemed for a higher floor price.",link:"https://docs.chickenbonds.org/faq/potential-future-system-migration#what-is-the-wind-down-functionality"},gt={term:"bLUSD APR",description:"The APR of bLUSD, based on the yield generated from each bucket in the Treasury.",link:"https://docs.chickenbonds.org/faq/economic-design#_c2c3valbf2bj"},Ot={term:"LP APR",description:"The APR from providing liquidity to the bLUSD/LUSD-3CRV pool. A combination of LUSD rewards from Chicken-in fees and Curve rewards.",link:"https://docs.chickenbonds.org/faq/economic-design#_1qcmo1v5zahs"},wt={term:"Yield amplification",description:"The bLUSD token generates a yield which is a multiple of the Stability Pool yield. It is derived from the total protocol yield which is being diverted to the Reserve bucket.",link:"https://docs.chickenbonds.org/faq/economic-design#yield-amplification"},_t={term:"Total",description:"The total amount of LUSD held by the protocol within the three buckets (Pending, Reserve, Permanent).",link:"https://docs.chickenbonds.org/faq/technical-design#_ydtvzh456fiz"},St={term:"Pending",description:"Contains the deposited LUSD of the users while they bond. Pending bonds can be claimed or cancelled any time, moving the LUSD into the Reserve and Permanent buckets, or back to the bonder, respectively.",link:"https://docs.chickenbonds.org/faq/technical-design#_ydtvzh456fiz"},kt={term:"Reserve",description:"Contains a portion of the LUSD obtained from claimed bonds and captures the yield from the entire Treasury. It acts as a reserve backing the bLUSD supply. bLUSD can be redeemed for a pro-rata share of the LUSD held in the Reserve bucket.",link:"https://docs.chickenbonds.org/faq/technical-design#_ydtvzh456fiz"},Dt={term:"Permanent",description:"Contains a portion of the LUSD obtained from claimed bonds which contributes a permanent price premium over LUSD. The LUSD in this bucket is not redeemable.",link:"https://docs.chickenbonds.org/faq/technical-design#_ydtvzh456fiz"},Lt={description:"These metrics are estimations based on the current bLUSD market price",link:"https://docs.chickenbonds.org/faq/economic-design#_lnta1xbq350e"},Et={description:"The bLUSD market price premium is currently too low to make bonding profitable. Bonds will be profitable again if the premium returns. Buying bLUSD from the market currently generates a higher return than bonding.",link:"https://docs.chickenbonds.org/faq/basic-usage#what-should-the-market-price-be-in-order-for-bonding-to-be-profitable"},At=Object(i.createContext)(null),Ct=()=>{const e=Object(i.useContext)(At);if(null===e)throw new Error("You must add a <BondViewProvider> into the React tree");return e},It={PENDING:ut.term,CANCELLED:lt.term,CLAIMED:ct.term,NON_EXISTENT:"NON_EXISTENT"};var Rt=n(167),Mt=n(345);const Pt={BLUSD_AMM_ADDRESS:null,BLUSD_AMM_STAKING_ADDRESS:null,BLUSD_TOKEN_ADDRESS:null,BOND_NFT_ADDRESS:null,CHICKEN_BOND_MANAGER_ADDRESS:null,LUSD_OVERRIDE_ADDRESS:null,BLUSD_LP_ZAP_ADDRESS:null},Bt={1:Rt,5:Mt},Ut=Object(i.createContext)(void 0),Nt=()=>{const e=Object(i.useContext)(Ut);if(void 0===e)throw new Error("You must add a <BondAddressesProvider> into the React tree");return e},Ft=({children:e})=>{var t;const{chainId:n}=Object(c.b)(),a=void 0!==n&&null!==(t=Bt[n])&&void 0!==t?t:Pt;return Object(E.jsx)(Ut.Provider,{value:a,children:e})};var qt=function(e){return{accountBalance:e.accountBalance,lusdBalance:e.lusdBalance,lqtyBalance:e.lqtyBalance}},Yt=function(){var e=R().account,t=Object(Ue.useLiquitySelector)(qt),n=t.accountBalance,a=t.lusdBalance,i=t.lqtyBalance,r=Ct(),s=r.bLusdBalance,o=r.lusdBalance,u=null===Nt().LUSD_OVERRIDE_ADDRESS?a:o;return Object(E.jsxs)(d.b,{sx:{display:["none","flex"]},children:[Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(Y,{name:"user-circle",size:"lg"}),Object(E.jsxs)(d.h,{sx:{ml:3,mr:4,flexDirection:"column"},children:[Object(E.jsx)(d.j,{sx:{fontSize:1},children:"Connected as"}),Object(E.jsx)(d.t,{as:"span",sx:{fontSize:1},children:qe(e)})]})]}),Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(Y,{name:"wallet",size:"lg"}),[["ETH",n],[Ne,Be.Decimal.from(u||0)],[Fe,Be.Decimal.from(i)],["bLUSD",Be.Decimal.from(s||0)]].map((function(e,t){var n=Object(m.a)(e,2),a=n[0],i=n[1];return Object(E.jsxs)(d.h,{sx:{ml:3,flexDirection:"column"},children:[Object(E.jsx)(d.j,{sx:{fontSize:1},children:a}),Object(E.jsx)(d.t,{sx:{fontSize:1},children:i.prettify()})]},t)}))]})]})};const Gt=({link:e,placement:t="right",tooltip:n,size:a="1x"})=>Object(E.jsxs)(ne,{message:n,placement:t,link:e,children:["\xa0",Object(E.jsx)(Y,{name:"question-circle",size:a})]}),Qt=({lexicon:e,children:t})=>Object(E.jsxs)(d.h,{sx:{borderBottom:1,borderColor:"rgba(0, 0, 0, 0.1)"},children:[Object(E.jsxs)(d.h,{sx:{alignItems:"center",justifyContent:"flex-start",flex:1.2,fontWeight:200},children:[Object(E.jsx)(d.h,{children:e.term}),e.term&&Object(E.jsx)(Gt,{size:"xs",tooltip:e.description,link:e.link})]}),Object(E.jsx)(d.h,{sx:{justifyContent:"flex-end",flex:1,alignItems:"center"},children:t})]}),Wt={term:"Borrowing Fee",description:"The Borrowing Fee is a one-off fee charged as a percentage of the borrowed amount (in LUSD) and is part of a Trove's debt. The fee varies between 0.5% and 5% depending on LUSD redemption volumes."},Zt={term:"TVL",description:"The Total Value Locked (TVL) is the total value of Ether locked as collateral in the system, given in ETH and USD."},Ht={term:"Staked LQTY",description:"The total amount of LQTY that is staked for earning fee revenue."},zt={term:"Total Collateral Ratio",description:"The ratio of the Dollar value of the entire system collateral at the current ETH:USD price, to the entire system debt."},Vt={term:"Recovery Mode",description:"Recovery Mode is activated when the Total Collateral Ratio (TCR) falls below 150%. When active, your Trove can be liquidated if its collateral ratio is below the TCR. The maximum collateral you can lose from liquidation is capped at 110% of your Trove's debt. Operations are also restricted that would negatively impact the TCR."},Jt={term:"LUSD in Stability Pool",description:"The total LUSD currently held in the Stability Pool, expressed as an amount and a fraction of the LUSD supply."},Kt={term:"Kickback Rate",description:"A rate between 0 and 100% set by the Frontend Operator that determines the fraction of LQTY that will be paid out as a kickback to the Stability Providers using the frontend."},$t={term:"ETH"},Xt={term:"LUSD"},en={term:"LQTY"},tn={term:"Troves",description:"The total number of active Troves in the system."},nn={term:"LUSD supply",description:"The total LUSD minted by the Liquity Protocol."},an=({accountBalance:e,lusdBalance:t,lqtyBalance:n})=>({accountBalance:e,lusdBalance:t,lqtyBalance:n}),rn=()=>{const{accountBalance:e,lusdBalance:t,lqtyBalance:n}=Object(Ue.useLiquitySelector)(an);return Object(E.jsxs)(d.b,{sx:{mb:3},children:[Object(E.jsx)(d.j,{children:"My Account Balances"}),Object(E.jsx)(Qt,{lexicon:$t,children:e.prettify(4)}),Object(E.jsx)(Qt,{lexicon:Xt,children:t.prettify()}),Object(E.jsx)(Qt,{lexicon:en,children:n.prettify()})]})},sn=({children:e})=>(null===e||void 0===e?void 0:e.match(/[0-9a-f]{40}/))?Object(E.jsx)(d.n,{href:`https://github.com/liquity/dev/commit/${e}`,children:e.substr(0,7)}):Object(E.jsx)(E.Fragment,{children:"unknown"}),on=({numberOfTroves:e,price:t,total:n,lusdInStabilityPool:a,borrowingRate:i,redemptionRate:r,totalStakedLQTY:s,frontend:o})=>({numberOfTroves:e,price:t,total:n,lusdInStabilityPool:a,borrowingRate:i,redemptionRate:r,totalStakedLQTY:s,kickbackRate:"registered"===o.status?o.kickbackRate:null}),un=({variant:e="info",showBalances:t})=>{const{liquity:{connection:{version:n,deploymentDate:a,frontendTag:i}}}=R(),{numberOfTroves:r,price:s,lusdInStabilityPool:o,total:u,borrowingRate:l,totalStakedLQTY:c,kickbackRate:p}=Object(Ue.useLiquitySelector)(on),y=u.debt.nonZero&&new Be.Percent(o.div(u.debt)),b=new Be.Percent(u.collateralRatio(s)),m=new Be.Percent(l),f=i===g.a?"100":null===p||void 0===p?void 0:p.mul(100).prettify();return Object(E.jsxs)(d.d,{variant:e,children:[t&&Object(E.jsx)(rn,{}),Object(E.jsx)(d.j,{children:"Liquity statistics"}),Object(E.jsx)(d.j,{as:"h2",sx:{mt:3,fontWeight:"body"},children:"Protocol"}),Object(E.jsx)(Qt,{lexicon:Wt,children:m.toString(2)}),Object(E.jsxs)(Qt,{lexicon:Zt,children:[u.collateral.shorten()," ",Object(E.jsx)(d.t,{sx:{fontSize:1},children:"\xa0ETH"}),Object(E.jsxs)(d.t,{sx:{fontSize:1},children:["\xa0($",Be.Decimal.from(u.collateral.mul(s)).shorten(),")"]})]}),Object(E.jsx)(Qt,{lexicon:tn,children:Be.Decimal.from(r).prettify(0)}),Object(E.jsx)(Qt,{lexicon:nn,children:u.debt.shorten()}),y&&Object(E.jsxs)(Qt,{lexicon:Jt,children:[o.shorten(),Object(E.jsxs)(d.t,{sx:{fontSize:1},children:["\xa0(",y.toString(1),")"]})]}),Object(E.jsx)(Qt,{lexicon:Ht,children:c.shorten()}),Object(E.jsx)(Qt,{lexicon:zt,children:b.prettify()}),Object(E.jsx)(Qt,{lexicon:Vt,children:u.collateralRatioIsBelowCritical(s)?Object(E.jsx)(d.b,{color:"danger",children:"Yes"}):"No"}),Object(E.jsx)(d.j,{as:"h2",sx:{mt:3,fontWeight:"body"},children:"Frontend"}),f&&Object(E.jsxs)(Qt,{lexicon:Kt,children:[f,"%"]}),Object(E.jsxs)(d.b,{sx:{mt:3,opacity:.66},children:[Object(E.jsxs)(d.b,{sx:{fontSize:0},children:["Contracts version: ",Object(E.jsx)(sn,{children:n})]}),Object(E.jsxs)(d.b,{sx:{fontSize:0},children:["Deployed: ",a.toLocaleString()]}),Object(E.jsxs)(d.b,{sx:{fontSize:0},children:["Frontend version:"," ",Object(E.jsx)(sn,{children:"edb8cb9cfb41b24a324145e91e5103989a990866"})]})]})]})};var ln=function(e){return{total:e.total,price:e.price}},cn=function(){var e=Object(Ue.useLiquitySelector)(ln),t=e.price,n=e.total,a=Object(i.useState)(!1),r=Object(m.a)(a,2),s=r[0],o=r[1],u=Object(i.useRef)(null);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(d.c,{onClick:function(){return o(!s)},variant:"icon",sx:{position:"relative",display:["block","none"]},children:[Object(E.jsx)(Y,{name:"info-circle",size:"2x"}),n.collateralRatioIsBelowCritical(t)&&Object(E.jsx)(d.h,{sx:{position:"absolute",right:0,top:0,width:"100%",height:"100%",alignItems:"flex-start",justifyContent:"flex-end",pt:"2px",color:"danger"},children:Object(E.jsx)(Y,{name:"exclamation-circle",size:"xs"})})]}),s&&Object(E.jsx)(d.g,{variant:"infoOverlay",ref:u,onClick:function(e){e.target===u.current&&o(!1)},children:Object(E.jsx)(un,{variant:"infoPopup",showBalances:!0})})]})},dn=function(e){var t=e.height,n=Object(P.a)(e,["height"]);return Object(E.jsx)(d.b,Object(x.a)(Object(x.a)({sx:{lineHeight:0}},n),{},{children:Object(E.jsx)(d.k,{src:"./lusd-icon.png",sx:{height:t}})}))},pn=function(e){return Object(E.jsx)(Re.b,Object(x.a)({exact:!0},e))},yn=function(e){return Object(E.jsx)(d.o,Object(x.a)(Object(x.a)({},e),{},{as:pn}))},bn=function(){return new Date<new Date("2022-11-01")?Object(E.jsx)(d.a,{ml:1,sx:{fontSize:"12px"},children:"New"}):null},mn=function(){return Object(E.jsxs)(d.b,{as:"nav",sx:{display:["none","flex"],alignItems:"center",flex:1},children:[Object(E.jsxs)(d.h,{children:[Object(E.jsx)(yn,{to:"/",children:"Dashboard"}),Object(E.jsx)(yn,{to:"/bonds",children:Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(d.t,{children:"Bonds"}),Object(E.jsx)(bn,{})]})})]}),Object(E.jsx)(d.h,{sx:{justifyContent:"flex-end",mr:3,flex:1},children:Object(E.jsx)(yn,{sx:{fontSize:1},to:"/risky-troves",children:"Risky Troves"})})]})},fn=function(){var e=Object(i.useState)(!1),t=Object(m.a)(e,2),n=t[0],a=t[1],r=Object(i.useRef)(null);return n?Object(E.jsx)(d.g,{variant:"infoOverlay",ref:r,onClick:function(e){e.target===r.current&&a(!1)},children:Object(E.jsxs)(d.h,{variant:"layout.sidenav",children:[Object(E.jsx)(d.c,{sx:{position:"fixed",right:"25vw",m:2},variant:"icon",onClick:function(){return a(!1)},children:Object(E.jsx)(Y,{name:"times",size:"2x"})}),Object(E.jsx)(dn,{height:"32px",p:2}),Object(E.jsxs)(d.b,{as:"nav",sx:{m:3,mt:1,p:0},onClick:function(){return a(!1)},children:[Object(E.jsx)(yn,{to:"/",children:"Dashboard"}),Object(E.jsx)(yn,{to:"/bonds",children:"Bonds"}),Object(E.jsx)(yn,{to:"/risky-troves",children:"Risky Troves"})]})]})}):Object(E.jsx)(d.c,{sx:{display:["flex","none"]},variant:"icon",onClick:function(){return a(!0)},children:Object(E.jsx)(Y,{name:"bars",size:"lg"})})},hn=function(e){return{frontend:e.frontend}},vn=function(e){var t=e.children,n=R().config.frontendTag,a=Object(Ue.useLiquitySelector)(hn).frontend,i=n===g.a||"registered"===a.status;return Object(E.jsxs)(d.g,{variant:"header",children:[Object(E.jsxs)(d.h,{sx:{alignItems:"center",flex:1},children:[Object(E.jsx)(dn,{height:"32px"}),Object(E.jsx)(d.b,{sx:{mx:[2,3],width:"0px",height:"100%",borderLeft:["none","1px solid lightgrey"]}}),i&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(fn,{}),Object(E.jsx)(mn,{})]})]}),t]})},jn=function(e){var t=e.children;return Object(E.jsx)(d.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",mb:[2,3],p:3,border:1,borderRadius:"8px",borderColor:"accent",boxShadow:2,bg:"rgba(46, 182, 234, 0.05)"},children:Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(Y,{name:"info-circle",size:"lg"}),Object(E.jsx)(d.t,{sx:{ml:2},children:t})]})})},Tn=function(e){var t=e.children;return Object(E.jsx)(d.t,{sx:{fontWeight:"bold",whiteSpace:"nowrap"},children:t})};const xn=({sx:e,label:t,labelId:n,labelFor:a,children:i,infoIcon:r})=>Object(E.jsxs)(d.h,{sx:{alignItems:"stretch",position:"relative",width:"100%",...e},children:[Object(E.jsx)(d.m,{id:n,htmlFor:a,sx:{p:0,pl:3,pt:"12px",position:"absolute",fontSize:1,border:1,borderColor:"transparent"},children:Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[t,r&&r]})}),i]}),gn=({sx:e,value:t})=>Object(E.jsxs)(d.t,{sx:e,children:["(","++"===t?Object(E.jsx)(Y,{name:"angle-double-up"}):"--"===t?Object(E.jsx)(Y,{name:"angle-double-down"}):(null===t||void 0===t?void 0:t.startsWith("+"))?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Y,{name:"angle-up"})," ",t.substr(1)]}):(null===t||void 0===t?void 0:t.startsWith("-"))?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Y,{name:"angle-down"})," ",t.substr(1)]}):t,")"]}),On=({sx:e,inputId:t,labelledBy:n,amount:a,unit:i,color:r,pendingAmount:s,pendingColor:o,onClick:u,children:l})=>Object(E.jsxs)(d.h,{id:t,"aria-labelledby":n,onClick:u,sx:{justifyContent:"space-between",alignItems:"center",...u?{cursor:"text"}:{},...wn,...e},children:[a&&Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(d.t,{sx:{color:r,fontWeight:"medium"},children:a}),i&&Object(E.jsxs)(E.Fragment,{children:["\xa0",Object(E.jsx)(d.t,{sx:{fontWeight:"light",opacity:.8},children:i})]}),s&&Object(E.jsxs)(E.Fragment,{children:["\xa0",Object(E.jsx)(gn,{sx:{color:o,opacity:.8,fontSize:"0.666em"},value:s})]})]}),l]}),wn={flexGrow:1,mb:0,pl:3,pr:"11px",pb:0,pt:"28px",fontSize:3,border:1,borderColor:"transparent"},_n={flexGrow:1,mb:[2,3],pl:3,pr:"11px",pb:2,pt:"28px",fontSize:4,boxShadow:[1,2],border:1,borderColor:"muted"},Sn=({label:e,labelId:t,labelFor:n,infoIcon:a,amount:i,children:r,...s})=>Object(E.jsx)(xn,{label:e,labelId:t,labelFor:n,infoIcon:a,sx:{mt:[-2,-3],pb:[2,3]},children:i?Object(E.jsx)(On,{amount:i,...s,children:r}):r}),kn=({inputId:e,children:t,sx:n,...a})=>Object(E.jsx)(On,{sx:{..._n,boxShadow:0,...n},labelledBy:`${e}-label`,inputId:e,...a,children:t}),Dn=({inputId:e,label:t,amount:n,children:a,...i})=>Object(E.jsx)(xn,{labelId:`${e}-label`,label:t,children:n?Object(E.jsx)(kn,{inputId:e,amount:n,...i,children:a}):a}),Ln=({label:e,inputId:t,unit:n,amount:a,color:r,pendingAmount:s,pendingColor:o,editingState:u,editedAmount:l,setEditedAmount:c,maxAmount:p,maxedOut:y})=>{const[b,m]=u,[f,h]=Object(i.useState)(!1);return b===t?Object(E.jsx)(xn,{label:e,labelFor:t,unit:n,children:Object(E.jsx)(d.l,{autoFocus:!0,id:t,type:"number",step:"any",defaultValue:l,invalid:f,onChange:e=>{try{c(e.target.value),h(!1)}catch{h(!0)}},onBlur:()=>{m(void 0),h(!1)},variant:"editor",sx:{..._n,fontWeight:"medium",bg:f?"invalid":"background"}})}):Object(E.jsx)(xn,{labelId:`${t}-label`,label:e,unit:n,children:Object(E.jsx)(On,{sx:{..._n,bg:f?"invalid":"background"},labelledBy:`${t}-label`,onClick:()=>m(t),inputId:t,amount:a,unit:n,color:r,pendingAmount:s,pendingColor:o,invalid:f,children:p&&Object(E.jsx)(d.c,{sx:{fontSize:1,p:1,px:3},onClick:e=>{c(p),e.stopPropagation()},disabled:y,children:"max"})})})};var En=function(){return Object(E.jsx)(d.g,{variant:"disabledOverlay",sx:{p:"14px",display:"flex",justifyContent:"flex-end"},children:Object(E.jsx)(d.s,{size:"28px",sx:{color:"text"}})})},An=function(e){var t,n,a,i,r,s=e.value,o=e.change,u=new Be.Percent(null!==s&&void 0!==s?s:{toString:function(){return"N/A"}}),l=o&&new Be.Percent(o);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(d.h,{children:[Object(E.jsx)(d.b,{sx:{mt:[2,0],ml:3,mr:-2,fontSize:"24px"},children:Object(E.jsx)(Y,{name:"heartbeat"})}),Object(E.jsx)(Sn,{label:"Collateral ratio",inputId:"trove-collateral-ratio",amount:u.prettify(),color:(null===s||void 0===s?void 0:s.gt(Be.CRITICAL_COLLATERAL_RATIO))?"success":(null===s||void 0===s?void 0:s.gt(1.2))?"warning":(null===s||void 0===s?void 0:s.lte(1.2))?"danger":"muted",pendingAmount:(null===o||void 0===o||null===(t=o.positive)||void 0===t||null===(n=t.absoluteValue)||void 0===n?void 0:n.gt(10))?"++":(null===o||void 0===o||null===(a=o.negative)||void 0===a||null===(i=a.absoluteValue)||void 0===i?void 0:i.gt(10))?"--":null===l||void 0===l||null===(r=l.nonZeroish(2))||void 0===r?void 0:r.prettify(),pendingColor:(null===o||void 0===o?void 0:o.positive)?"success":"danger",infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"220px"},children:"The ratio between the dollar value of the collateral and the debt (in LUSD) you are depositing. While the Minimum Collateral Ratio is 110% during normal operation, it is recommended to keep the Collateral Ratio always above 150% to avoid liquidation under Recovery Mode. A Collateral Ratio above 200% or 250% is recommended for additional safety."})})})]}),(null===s||void 0===s?void 0:s.lt(1.5))&&Object(E.jsx)(jn,{children:"Keeping your CR above 150% can help avoid liquidation under Recovery Mode."})]})},Cn=function(e){return{price:e.price}},In=function(e){var t=e.children,n=e.original,a=e.edited,i=e.fee,r=e.borrowingRate,s=e.changePending,o=Object(Ue.useLiquitySelector)(Cn).price,u=new Be.Percent(r),l=n.isEmpty?void 0:n.collateralRatio(o),c=a.isEmpty?void 0:a.collateralRatio(o),p=Be.Difference.between(c,l);return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Trove"}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(Sn,{label:"Collateral",inputId:"trove-collateral",amount:a.collateral.prettify(4),unit:"ETH"}),Object(E.jsx)(Sn,{label:"Debt",inputId:"trove-debt",amount:a.debt.prettify(),unit:Ne}),n.isEmpty&&Object(E.jsx)(Sn,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Be.LUSD_LIQUIDATION_RESERVE),unit:Ne,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(E.jsx)(Sn,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:i.toString(2),pendingAmount:u.toString(2),unit:Ne,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(E.jsx)(An,{value:c,change:p}),t]}),s&&Object(E.jsx)(En,{})]})},Rn=function(e){var t=e.children,n=e.transactionId,a=e.change,i=e.maxBorrowingRate,r=e.borrowingFeeDecayToleranceMinutes,s=R().liquity,o=be(n,"creation"===a.type?s.send.openTrove.bind(s.send,a.params,{maxBorrowingRate:i,borrowingFeeDecayToleranceMinutes:r}):"closure"===a.type?s.send.closeTrove.bind(s.send):s.send.adjustTrove.bind(s.send,a.params,{maxBorrowingRate:i,borrowingFeeDecayToleranceMinutes:r})),u=Object(m.a)(o,1)[0];return Object(E.jsx)(d.c,{onClick:u,children:t})},Mn=Object(i.createContext)(null),Pn=function(){var e=Object(i.useContext)(Mn);if(null===e)throw new Error("You must add a <TroveViewProvider> into the React tree");return e},Bn=function(e){var t=e.children;return Object(E.jsx)(d.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",mb:[2,3],p:3,border:1,borderRadius:"8px",borderColor:"danger",boxShadow:2,bg:"rgba(220, 44, 16, 0.05)"},children:Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(Y,{name:"exclamation-triangle",size:"lg"}),Object(E.jsx)(d.t,{sx:{ml:2},children:t})]})})},Un=new Be.Percent(Be.MINIMUM_COLLATERAL_RATIO).toString(0),Nn=new Be.Percent(Be.CRITICAL_COLLATERAL_RATIO).toString(0),Fn=function(e){var t=e.params;return Object(E.jsxs)(jn,{children:[t.depositCollateral&&t.borrowLUSD?Object(E.jsxs)(E.Fragment,{children:["You will deposit ",Object(E.jsxs)(Tn,{children:[t.depositCollateral.prettify()," ETH"]})," and receive"," ",Object(E.jsxs)(Tn,{children:[t.borrowLUSD.prettify()," ",Ne]})]}):t.repayLUSD&&t.withdrawCollateral?Object(E.jsxs)(E.Fragment,{children:["You will pay"," ",Object(E.jsxs)(Tn,{children:[t.repayLUSD.prettify()," ",Ne]})," ","and receive ",Object(E.jsxs)(Tn,{children:[t.withdrawCollateral.prettify()," ETH"]})]}):t.depositCollateral&&t.repayLUSD?Object(E.jsxs)(E.Fragment,{children:["You will deposit ",Object(E.jsxs)(Tn,{children:[t.depositCollateral.prettify()," ETH"]})," and pay"," ",Object(E.jsxs)(Tn,{children:[t.repayLUSD.prettify()," ",Ne]})]}):t.borrowLUSD&&t.withdrawCollateral?Object(E.jsxs)(E.Fragment,{children:["You will receive ",Object(E.jsxs)(Tn,{children:[t.withdrawCollateral.prettify()," ETH"]})," and"," ",Object(E.jsxs)(Tn,{children:[t.borrowLUSD.prettify()," ",Ne]})]}):t.depositCollateral?Object(E.jsxs)(E.Fragment,{children:["You will deposit ",Object(E.jsxs)(Tn,{children:[t.depositCollateral.prettify()," ETH"]})]}):t.withdrawCollateral?Object(E.jsxs)(E.Fragment,{children:["You will receive ",Object(E.jsxs)(Tn,{children:[t.withdrawCollateral.prettify()," ETH"]})]}):t.borrowLUSD?Object(E.jsxs)(E.Fragment,{children:["You will receive"," ",Object(E.jsxs)(Tn,{children:[t.borrowLUSD.prettify()," ",Ne]})]}):Object(E.jsxs)(E.Fragment,{children:["You will pay"," ",Object(E.jsxs)(Tn,{children:[t.repayLUSD.prettify()," ",Ne]})]}),"."]})},qn=function(e){return{price:e.price,total:e.total,accountBalance:e.accountBalance,lusdBalance:e.lusdBalance,numberOfTroves:e.numberOfTroves}},Yn=function(e,t,n,a){var i=a.total,r=a.price,s=e.whatChanged(t,n);if(!s)return[void 0,void 0];var o=e.apply(s,n),u=i.collateralRatioIsBelowCritical(r),l=i.subtract(e).add(o).collateralRatioIsBelowCritical(r),c=Object(x.a)(Object(x.a)({},a),{},{originalTrove:e,resultingTrove:o,recoveryMode:u,wouldTriggerRecoveryMode:l});if("invalidCreation"===s.type)return[void 0,Object(E.jsxs)(Bn,{children:["Total debt must be at least"," ",Object(E.jsxs)(Tn,{children:[Be.LUSD_MINIMUM_DEBT.toString()," ",Ne]}),"."]})];var d="creation"===s.type?Gn(s.params,c):"closure"===s.type?Wn(s.params,c):Qn(s.params,c);return d?[void 0,d]:[s,Object(E.jsx)(Fn,{params:s.params})]},Gn=function(e,t){var n=e.depositCollateral,a=e.borrowLUSD,i=t.resultingTrove,r=t.recoveryMode,s=t.wouldTriggerRecoveryMode,o=t.accountBalance,u=t.price;if(a.lt(Be.LUSD_MINIMUM_NET_DEBT))return Object(E.jsxs)(Bn,{children:["You must borrow at least"," ",Object(E.jsxs)(Tn,{children:[Be.LUSD_MINIMUM_NET_DEBT.toString()," ",Ne]}),"."]});if(r){if(!i.isOpenableInRecoveryMode(u))return Object(E.jsxs)(Bn,{children:["You're not allowed to open a Trove with less than ",Object(E.jsx)(Tn,{children:Nn})," Collateral Ratio during recovery mode. Please increase your Trove's Collateral Ratio."]})}else{if(i.collateralRatioIsBelowMinimum(u))return Object(E.jsxs)(Bn,{children:["Collateral ratio must be at least ",Object(E.jsx)(Tn,{children:Un}),"."]});if(s)return Object(E.jsxs)(Bn,{children:["You're not allowed to open a Trove that would cause the Total Collateral Ratio to fall below ",Object(E.jsx)(Tn,{children:Nn}),". Please increase your Trove's Collateral Ratio."]})}return n.gt(o)?Object(E.jsxs)(Bn,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(E.jsxs)(Tn,{children:[n.sub(o).prettify()," ETH"]}),"."]}):null},Qn=function(e,t){var n=e.depositCollateral,a=e.withdrawCollateral,i=e.borrowLUSD,r=e.repayLUSD,s=t.originalTrove,o=t.resultingTrove,u=t.recoveryMode,l=t.wouldTriggerRecoveryMode,c=t.price,d=t.accountBalance,p=t.lusdBalance;if(u){if(a)return Object(E.jsx)(Bn,{children:"You're not allowed to withdraw collateral during recovery mode."});if(i){if(o.collateralRatioIsBelowCritical(c))return Object(E.jsxs)(Bn,{children:["Your collateral ratio must be at least ",Object(E.jsx)(Tn,{children:Nn})," to borrow during recovery mode. Please improve your collateral ratio."]});if(o.collateralRatio(c).lt(s.collateralRatio(c)))return Object(E.jsx)(Bn,{children:"You're not allowed to decrease your collateral ratio during recovery mode."})}}else{if(o.collateralRatioIsBelowMinimum(c))return Object(E.jsxs)(Bn,{children:["Collateral ratio must be at least ",Object(E.jsx)(Tn,{children:Un}),"."]});if(l)return Object(E.jsxs)(Bn,{children:["The adjustment you're trying to make would cause the Total Collateral Ratio to fall below"," ",Object(E.jsx)(Tn,{children:Nn}),". Please increase your Trove's Collateral Ratio."]})}if(r){if(o.debt.lt(Be.LUSD_MINIMUM_DEBT))return Object(E.jsxs)(Bn,{children:["Total debt must be at least"," ",Object(E.jsxs)(Tn,{children:[Be.LUSD_MINIMUM_DEBT.toString()," ",Ne]}),"."]});if(r.gt(p))return Object(E.jsxs)(Bn,{children:["The amount you're trying to repay exceeds your balance by"," ",Object(E.jsxs)(Tn,{children:[r.sub(p).prettify()," ",Ne]}),"."]})}return(null===n||void 0===n?void 0:n.gt(d))?Object(E.jsxs)(Bn,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(E.jsxs)(Tn,{children:[n.sub(d).prettify()," ETH"]}),"."]}):null},Wn=function(e,t){var n=e.repayLUSD,a=t.recoveryMode,i=t.wouldTriggerRecoveryMode,r=t.numberOfTroves,s=t.lusdBalance;return 1===r?Object(E.jsx)(Bn,{children:"You're not allowed to close your Trove when there are no other Troves in the system."}):a?Object(E.jsx)(Bn,{children:"You're not allowed to close your Trove during recovery mode."}):(null===n||void 0===n?void 0:n.gt(s))?Object(E.jsxs)(Bn,{children:["You need"," ",Object(E.jsxs)(Tn,{children:[n.sub(s).prettify()," ",Ne]})," ","more to close your Trove."]}):i?Object(E.jsxs)(Bn,{children:["You're not allowed to close a Trove if it would cause the Total Collateralization Ratio to fall below ",Object(E.jsx)(Tn,{children:Nn}),". Please wait until the Total Collateral Ratio increases."]}):null},Zn=function(e){var t=e.trove;return{original:t,edited:new Be.Trove(t.collateral,t.debt),changePending:!1,debtDirty:!1,addedMinimumDebt:!1}},Hn=function(e){return function(t){return $n(t,e)}},zn=Hn({type:"addMinimumDebt"}),Vn=Hn({type:"removeMinimumDebt"}),Jn=Hn({type:"finishChange"}),Kn=Hn({type:"revert"}),$n=function(e,t){var n=e.original,a=e.edited,i=e.changePending,r=e.debtDirty,s=e.addedMinimumDebt;switch(t.type){case"startChange":return console.log("starting change"),Object(x.a)(Object(x.a)({},e),{},{changePending:!0});case"finishChange":return Object(x.a)(Object(x.a)({},e),{},{changePending:!1});case"setCollateral":var o=Be.Decimal.from(t.newValue),u=Object(x.a)(Object(x.a)({},e),{},{edited:a.setCollateral(o)});if(!r){if(a.isEmpty&&o.nonZero)return zn(u);if(s&&o.isZero)return Vn(u)}return u;case"setDebt":return Object(x.a)(Object(x.a)({},e),{},{edited:a.setDebt(t.newValue),debtDirty:!0});case"addMinimumDebt":return Object(x.a)(Object(x.a)({},e),{},{edited:a.setDebt(Be.LUSD_MINIMUM_DEBT),addedMinimumDebt:!0});case"removeMinimumDebt":return Object(x.a)(Object(x.a)({},e),{},{edited:a.setDebt(0),addedMinimumDebt:!1});case"revert":return Object(x.a)(Object(x.a)({},e),{},{edited:new Be.Trove(n.collateral,n.debt),debtDirty:!1,addedMinimumDebt:!1});case"updateStore":var l=t.newState.trove,c=t.stateChange.troveBeforeRedistribution,d=Object(x.a)(Object(x.a)({},e),{},{original:l});if(i&&c)return Jn(Kn(d));var p=n.whatChanged(a,0);return"creation"===(null===p||void 0===p?void 0:p.type)&&!l.isEmpty||"closure"===(null===p||void 0===p?void 0:p.type)&&l.isEmpty?Kn(d):Object(x.a)(Object(x.a)({},d),{},{edited:l.apply(p,0)})}},Xn=function(e,t,n){var a=e.whatChanged(t,n);return a&&"invalidCreation"!==a.type&&a.params.borrowLUSD?a.params.borrowLUSD.mul(n):Be.Decimal.ZERO},ea=function(e){return{fees:e.fees,validationContext:qn(e)}},ta="trove-",na=new RegExp("^".concat(ta)),aa=function(e){var t=e.collateral,n=e.debt,a=Object(Ue.useLiquityReducer)($n,Zn),r=Object(m.a)(a,2),s=r[0],o=s.original,u=s.edited,l=s.changePending,c=r[1],p=Object(Ue.useLiquitySelector)(ea),y=p.fees,b=p.validationContext;Object(i.useEffect)((function(){void 0!==t&&c({type:"setCollateral",newValue:t}),void 0!==n&&c({type:"setDebt",newValue:n})}),[t,n,c]);var f=y.borrowingRate(),h=f.add(.005),v=Yn(o,u,f,b),j=Object(m.a)(v,2),T=j[0],x=j[1],g=Pn().dispatchEvent,O=Object(i.useCallback)((function(){g("CANCEL_ADJUST_TROVE_PRESSED")}),[g]),w=o.isEmpty,_=ye(na);return Object(i.useEffect)((function(){"waitingForApproval"===_.type||"waitingForConfirmation"===_.type?c({type:"startChange"}):"failed"===_.type||"cancelled"===_.type?c({type:"finishChange"}):"confirmedOneShot"===_.type&&(_.id==="".concat(ta,"closure")?g("TROVE_CLOSED"):g("TROVE_ADJUSTED"))}),[_,c,g]),Object(E.jsxs)(In,{original:o,edited:u,fee:Xn(o,u,f),borrowingRate:f,changePending:l,dispatch:c,children:[null!==x&&void 0!==x?x:w?Object(E.jsx)(jn,{children:"Start by entering the amount of ETH you'd like to deposit as collateral."}):Object(E.jsx)(jn,{children:"Adjust your Trove by modifying its collateral, debt, or both."}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:O,children:"Cancel"}),T?Object(E.jsx)(Rn,{transactionId:"".concat(ta).concat(T.type),change:T,maxBorrowingRate:h,borrowingFeeDecayToleranceMinutes:60,children:"Confirm"}):Object(E.jsx)(d.c,{disabled:!0,children:"Confirm"})]})]})},ia=function(e){return{trove:e.trove,price:e.price}},ra=function(){var e=Pn().dispatchEvent,t=Object(i.useCallback)((function(){e("ADJUST_TROVE_PRESSED")}),[e]),n=Object(i.useCallback)((function(){e("CLOSE_TROVE_PRESSED")}),[e]),a=Object(Ue.useLiquitySelector)(ia),r=a.trove,s=a.price;return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Trove"}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsxs)(d.b,{children:[Object(E.jsx)(Dn,{label:"Collateral",inputId:"trove-collateral",amount:r.collateral.prettify(4),unit:"ETH"}),Object(E.jsx)(Dn,{label:"Debt",inputId:"trove-debt",amount:r.debt.prettify(),unit:Ne}),Object(E.jsx)(An,{value:r.collateralRatio(s)})]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"outline",onClick:n,children:"Close Trove"}),Object(E.jsxs)(d.c,{onClick:t,children:[Object(E.jsx)(Y,{name:"pen",size:"sm"}),"\xa0Adjust"]})]})]})]})},sa=function(e){var t=e.title,n=e.children,a=e.icon;return Object(E.jsxs)(d.b,{sx:{mx:1,mb:3},children:[Object(E.jsxs)(d.h,{sx:{alignItems:"center",mb:"10px"},children:[Object(E.jsx)(d.b,{sx:{mr:"12px",fontSize:"20px"},children:a||Object(E.jsx)(Y,{name:"info-circle"})}),Object(E.jsx)(d.j,{as:"h3",children:t})]}),Object(E.jsx)(d.t,{sx:{fontSize:2},children:n})]})},oa=function(e){var t=Pn().dispatchEvent,n=Object(i.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Trove"}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(sa,{title:"You haven't borrowed any LUSD yet.",children:"You can borrow LUSD by opening a Trove."}),Object(E.jsx)(d.h,{variant:"layout.actions",children:Object(E.jsx)(d.c,{onClick:n,children:"Open Trove"})})]})]})},ua=function(e,t){return e&&t?e.eq(t):!e&&!t},la=function(e){var t=Object(i.useState)(e),n=Object(m.a)(t,2),a=n[0],r=n[1];return Object(i.useEffect)((function(){var t,n;!!a!==!!e?r(e):!a||!e||(n=e,(t=a).type===n.type&&ua(t.params.borrowLUSD,n.params.borrowLUSD)&&ua(t.params.repayLUSD,n.params.repayLUSD)&&ua(t.params.depositCollateral,n.params.depositCollateral)&&ua(t.params.withdrawCollateral,n.params.withdrawCollateral))||r(e)}),[a,e]),a},ca=function(e){var t=e.children;return Object(E.jsx)(d.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",mb:[2,3],p:3,border:1,borderRadius:"8px",borderColor:"warning",boxShadow:2},children:Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(Y,{name:"exclamation-triangle",size:"lg"}),Object(E.jsx)(d.t,{sx:{ml:2},children:t})]})})},da=function(e){var t=e.troveChange,n=e.maxBorrowingRate,a=e.borrowingFeeDecayToleranceMinutes,r=e.gasEstimationState,s=e.setGasEstimationState,o=R().liquity;return Object(i.useEffect)((function(){if(t&&"closure"!==t.type){s({type:"inProgress"});var e=!1,i=setTimeout(Object(T.a)(j.a.mark((function i(){var r;return j.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,"creation"===t.type?o.populate.openTrove(t.params,{maxBorrowingRate:n,borrowingFeeDecayToleranceMinutes:a}):o.populate.adjustTrove(t.params,{maxBorrowingRate:n,borrowingFeeDecayToleranceMinutes:a});case 2:r=i.sent,e||(s({type:"complete",populatedTx:r}),console.log("Estimated TX cost: "+Be.Decimal.from("".concat(r.rawPopulatedTransaction.gasLimit)).prettify(0)));case 4:case"end":return i.stop()}}),i)}))),333);return function(){clearTimeout(i),e=!0}}s({type:"idle"})}),[t]),t&&"complete"===r.type&&void 0!==r.populatedTx.gasHeadroom&&r.populatedTx.gasHeadroom>=2e5?"creation"===t.type?Object(E.jsx)(ca,{children:"The cost of opening a Trove in this collateral ratio range is rather high. To lower it, choose a slightly different collateral ratio."}):Object(E.jsx)(ca,{children:"The cost of adjusting a Trove into this collateral ratio range is rather high. To lower it, choose a slightly different collateral ratio."}):null},pa=function(e){return{fees:e.fees,price:e.price,accountBalance:e.accountBalance,validationContext:qn(e)}},ya=new Be.Trove(Be.Decimal.ZERO,Be.Decimal.ZERO),ba="trove-creation",ma=Be.Decimal.from(.1),fa=function(){var e=Pn().dispatchEvent,t=Object(Ue.useLiquitySelector)(pa),n=t.fees,a=t.price,r=t.accountBalance,s=t.validationContext,o=n.borrowingRate(),u=Object(i.useState)(),l=Object(i.useState)(Be.Decimal.ZERO),c=Object(m.a)(l,2),p=c[0],y=c[1],b=Object(i.useState)(Be.Decimal.ZERO),f=Object(m.a)(b,2),h=f[0],v=f[1],j=o.add(.005),T=h.mul(o),x=new Be.Percent(o),g=h.add(Be.LUSD_LIQUIDATION_RESERVE).add(T),O=!p.isZero||!h.isZero,w=O?new Be.Trove(p,g):ya,_=r.gt(ma)?r.sub(ma):Be.Decimal.ZERO,S=p.eq(_),k=p.isZero||h.isZero?void 0:w.collateralRatio(a),D=Yn(ya,w,o,s),L=Object(m.a)(D,2),A=L[0],C=L[1],I=la(A),R=Object(i.useState)({type:"idle"}),M=Object(m.a)(R,2),P=M[0],B=M[1],U=ye(ba),N="waitingForApproval"===U.type||"waitingForConfirmation"===U.type,F=Object(i.useCallback)((function(){e("CANCEL_ADJUST_TROVE_PRESSED")}),[e]),q=Object(i.useCallback)((function(){y(Be.Decimal.ZERO),v(Be.Decimal.ZERO)}),[]);return Object(i.useEffect)((function(){!p.isZero&&h.isZero&&v(Be.LUSD_MINIMUM_NET_DEBT)}),[p,h]),Object(E.jsxs)(d.d,{children:[Object(E.jsxs)(d.j,{children:["Trove",O&&!N&&Object(E.jsx)(d.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:q,children:Object(E.jsx)(Y,{name:"history",size:"lg"})})]}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(Ln,{label:"Collateral",inputId:"trove-collateral",amount:p.prettify(4),maxAmount:_.toString(),maxedOut:S,editingState:u,unit:"ETH",editedAmount:p.toString(4),setEditedAmount:function(e){return y(Be.Decimal.from(e))}}),Object(E.jsx)(Ln,{label:"Borrow",inputId:"trove-borrow-amount",amount:h.prettify(),unit:Ne,editingState:u,editedAmount:h.toString(2),setEditedAmount:function(e){return v(Be.Decimal.from(e))}}),Object(E.jsx)(Sn,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Be.LUSD_LIQUIDATION_RESERVE),unit:Ne,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(E.jsx)(Sn,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:T.prettify(2),pendingAmount:x.toString(2),unit:Ne,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(E.jsx)(Sn,{label:"Total debt",inputId:"trove-total-debt",amount:g.prettify(2),unit:Ne,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsxs)(d.d,{variant:"tooltip",sx:{width:"240px"},children:["The total amount of LUSD your Trove will hold."," ",O&&Object(E.jsxs)(E.Fragment,{children:["You will need to repay ",g.sub(Be.LUSD_LIQUIDATION_RESERVE).prettify(2)," ","LUSD to reclaim your collateral (",Be.LUSD_LIQUIDATION_RESERVE.toString()," LUSD Liquidation Reserve excluded)."]})]})})}),Object(E.jsx)(An,{value:k}),null!==C&&void 0!==C?C:Object(E.jsx)(jn,{children:"Start by entering the amount of ETH you'd like to deposit as collateral."}),Object(E.jsx)(da,{troveChange:I,maxBorrowingRate:j,borrowingFeeDecayToleranceMinutes:60,gasEstimationState:P,setGasEstimationState:B}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:F,children:"Cancel"}),"inProgress"===P.type?Object(E.jsx)(d.c,{disabled:!0,children:Object(E.jsx)(d.s,{size:"24px",sx:{color:"background"}})}):I?Object(E.jsx)(Rn,{transactionId:ba,change:I,maxBorrowingRate:j,borrowingFeeDecayToleranceMinutes:60,children:"Confirm"}):Object(E.jsx)(d.c,{disabled:!0,children:"Confirm"})]})]}),N&&Object(E.jsx)(En,{})]})},ha=function(e){return{trove:e.trove,fees:e.fees,price:e.price,accountBalance:e.accountBalance,validationContext:qn(e)}},va="trove-adjustment",ja=Be.Decimal.from(.1),Ta=function(){var e=Pn().dispatchEvent,t=Object(Ue.useLiquitySelector)(ha),n=t.trove,a=t.fees,r=t.price,s=t.accountBalance,o=t.validationContext,u=Object(i.useState)(),l=Object(i.useRef)(n),c=Object(i.useState)(n.collateral),p=Object(m.a)(c,2),y=p[0],b=p[1],f=Object(i.useState)(n.netDebt),h=Object(m.a)(f,2),v=h[0],j=h[1],T=ye(va),x=a.borrowingRate();Object(i.useEffect)((function(){"confirmedOneShot"===T.type&&e("TROVE_ADJUSTED")}),[T.type,e]),Object(i.useEffect)((function(){if(!l.current.collateral.eq(n.collateral)){var e=function(e,t){return e.absoluteValue?e.positive?t.collateral.add(e.absoluteValue):e.negative&&e.absoluteValue.lt(t.collateral)?t.collateral.sub(e.absoluteValue):t.collateral:t.collateral}(Be.Difference.between(y,l.current.collateral),n);b(e)}if(!l.current.netDebt.eq(n.netDebt)){var t=function(e,t){return e.absoluteValue?e.positive?t.netDebt.add(e.absoluteValue):e.negative&&e.absoluteValue.lt(t.netDebt)?t.netDebt.sub(e.absoluteValue):t.netDebt:t.netDebt}(Be.Difference.between(v,l.current.netDebt),n);j(t)}l.current=n}),[n,y,v]);var g=Object(i.useCallback)((function(){e("CANCEL_ADJUST_TROVE_PRESSED")}),[e]),O=Object(i.useCallback)((function(){b(n.collateral),j(n.netDebt)}),[n.collateral,n.netDebt]),w=!y.eq(n.collateral)||!v.eq(n.netDebt),_=v.gt(n.netDebt),S=_?v.sub(n.netDebt):Be.Decimal.ZERO,k=_?function(e,t,n){var a=e.whatChanged(t,n);return a&&"invalidCreation"!==a.type&&a.params.borrowLUSD?a.params.borrowLUSD.mul(n):Be.Decimal.ZERO}(n,new Be.Trove(n.collateral,n.debt.add(S)),x):Be.Decimal.ZERO,D=v.add(Be.LUSD_LIQUIDATION_RESERVE).add(k),L=x.add(.005),A=w?new Be.Trove(y,D):n,C=new Be.Percent(x),I=s.gt(ja)?s.sub(ja):Be.Decimal.ZERO,R=n.collateral.add(I),M=y.eq(R),P=y.isZero||v.isZero?void 0:A.collateralRatio(r),B=Be.Difference.between(P,n.collateralRatio(r)),U=Yn(n,A,x,o),N=Object(m.a)(U,2),F=N[0],q=N[1],G=la(F),Q=Object(i.useState)({type:"idle"}),W=Object(m.a)(Q,2),Z=W[0],H=W[1],z="waitingForApproval"===T.type||"waitingForConfirmation"===T.type;return"open"!==n.status?null:Object(E.jsxs)(d.d,{children:[Object(E.jsxs)(d.j,{children:["Trove",w&&!z&&Object(E.jsx)(d.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:O,children:Object(E.jsx)(Y,{name:"history",size:"lg"})})]}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(Ln,{label:"Collateral",inputId:"trove-collateral",amount:y.prettify(4),maxAmount:R.toString(),maxedOut:M,editingState:u,unit:"ETH",editedAmount:y.toString(4),setEditedAmount:function(e){return b(Be.Decimal.from(e))}}),Object(E.jsx)(Ln,{label:"Net debt",inputId:"trove-net-debt-amount",amount:v.prettify(),unit:Ne,editingState:u,editedAmount:v.toString(2),setEditedAmount:function(e){return j(Be.Decimal.from(e))}}),Object(E.jsx)(Sn,{label:"Liquidation Reserve",inputId:"trove-liquidation-reserve",amount:"".concat(Be.LUSD_LIQUIDATION_RESERVE),unit:Ne,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"200px"},children:"An amount set aside to cover the liquidator\u2019s gas costs if your Trove needs to be liquidated. The amount increases your debt and is refunded if you close your Trove by fully paying off its net debt."})})}),Object(E.jsx)(Sn,{label:"Borrowing Fee",inputId:"trove-borrowing-fee",amount:k.prettify(2),pendingAmount:C.toString(2),unit:Ne,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"240px"},children:"This amount is deducted from the borrowed amount as a one-time fee. There are no recurring fees for borrowing, which is thus interest-free."})})}),Object(E.jsx)(Sn,{label:"Total debt",inputId:"trove-total-debt",amount:D.prettify(2),unit:Ne,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsxs)(d.d,{variant:"tooltip",sx:{width:"240px"},children:["The total amount of LUSD your Trove will hold."," ",w&&Object(E.jsxs)(E.Fragment,{children:["You will need to repay ",D.sub(Be.LUSD_LIQUIDATION_RESERVE).prettify(2)," ","LUSD to reclaim your collateral (",Be.LUSD_LIQUIDATION_RESERVE.toString()," LUSD Liquidation Reserve excluded)."]})]})})}),Object(E.jsx)(An,{value:P,change:B}),null!==q&&void 0!==q?q:Object(E.jsx)(jn,{children:"Adjust your Trove by modifying its collateral, debt, or both."}),Object(E.jsx)(da,{troveChange:G,maxBorrowingRate:L,borrowingFeeDecayToleranceMinutes:60,gasEstimationState:Z,setGasEstimationState:H}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:g,children:"Cancel"}),G?Object(E.jsx)(Rn,{transactionId:va,change:G,maxBorrowingRate:L,borrowingFeeDecayToleranceMinutes:60,children:"Confirm"}):Object(E.jsx)(d.c,{disabled:!0,children:"Confirm"})]})]}),z&&Object(E.jsx)(En,{})]})},xa=function(e){return{collateralSurplusBalance:e.collateralSurplusBalance}},ga=function(){var e=Object(Ue.useLiquitySelector)(xa).collateralSurplusBalance,t=R().liquity.send,n="claim-coll-surplus",a=ye(n),r=Pn().dispatchEvent;return Object(i.useEffect)((function(){"confirmedOneShot"===a.type&&r("TROVE_SURPLUS_COLLATERAL_CLAIMED")}),[a.type,r]),"waitingForApproval"===a.type?Object(E.jsx)(d.h,{variant:"layout.actions",children:Object(E.jsxs)(d.c,{disabled:!0,sx:{mx:2},children:[Object(E.jsx)(d.s,{sx:{mr:2,color:"white"},size:"20px"}),"Waiting for your approval"]})}):"waitingForConfirmation"!==a.type&&"confirmed"!==a.type?Object(E.jsx)(d.h,{variant:"layout.actions",children:Object(E.jsx)(me,{id:n,send:t.claimCollateralSurplus.bind(t,void 0),children:Object(E.jsxs)(d.c,{sx:{mx:2},children:["Claim ",e.prettify()," ETH"]})})}):null},Oa=function(e){return{hasSurplusCollateral:!e.collateralSurplusBalance.isZero}},wa=function(){var e=Object(Ue.useLiquitySelector)(Oa).hasSurplusCollateral,t=Pn().dispatchEvent,n=Object(i.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Trove"}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(sa,{title:"Your Trove has been redeemed.",children:e?"Please reclaim your remaining collateral before opening a new Trove.":"You can borrow LUSD by opening a Trove."}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[e&&Object(E.jsx)(ga,{}),!e&&Object(E.jsx)(d.c,{onClick:n,children:"Open Trove"})]})]})]})},_a=function(e){return{hasSurplusCollateral:!e.collateralSurplusBalance.isZero}},Sa=function(){var e=Object(Ue.useLiquitySelector)(_a).hasSurplusCollateral,t=Pn().dispatchEvent,n=Object(i.useCallback)((function(){t("OPEN_TROVE_PRESSED")}),[t]);return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Trove"}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(sa,{title:"Your Trove has been liquidated.",children:e?"Please reclaim your remaining collateral before opening a new Trove.":"You can borrow LUSD by opening a Trove."}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[e&&Object(E.jsx)(ga,{}),!e&&Object(E.jsx)(d.c,{onClick:n,children:"Open Trove"})]})]})]})},ka=function(e){switch(Pn().view){case"ACTIVE":return Object(E.jsx)(ra,Object(x.a)({},e));case"ADJUSTING":return Object(E.jsx)(Ta,Object(x.a)({},e));case"CLOSING":return Object(E.jsx)(aa,Object(x.a)(Object(x.a)({},e),{},{collateral:Be.Decimal.ZERO,debt:Be.Decimal.ZERO}));case"OPENING":return Object(E.jsx)(fa,Object(x.a)({},e));case"LIQUIDATED":return Object(E.jsx)(Sa,Object(x.a)({},e));case"REDEEMED":return Object(E.jsx)(wa,Object(x.a)({},e));case"NONE":return Object(E.jsx)(oa,Object(x.a)({},e))}},Da=function(e){return{lusdBalance:e.lusdBalance,lusdInStabilityPool:e.lusdInStabilityPool}},La=function(e){var t=e.originalDeposit,n=e.editedLUSD,a=e.changePending,r=e.dispatch,s=e.children,o=Object(Ue.useLiquitySelector)(Da),u=o.lusdBalance,l=o.lusdInStabilityPool,c=Object(i.useState)(),p=!n.eq(t.currentLUSD),y=t.currentLUSD.add(u),b=n.eq(y),m=l.sub(t.currentLUSD).add(n),f=t.currentLUSD.mulDiv(100,l),h=n.mulDiv(100,m),v=t.currentLUSD.nonZero&&Be.Difference.between(h,f).nonZero;return Object(E.jsxs)(d.d,{children:[Object(E.jsxs)(d.j,{children:["Stability Pool",p&&!a&&Object(E.jsx)(d.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return r({type:"revert"})},children:Object(E.jsx)(Y,{name:"history",size:"lg"})})]}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(Ln,{label:"Deposit",inputId:"deposit-lqty",amount:n.prettify(),maxAmount:y.toString(),maxedOut:b,unit:Ne,editingState:c,editedAmount:n.toString(2),setEditedAmount:function(e){return r({type:"setDeposit",newValue:e})}}),h.infinite?Object(E.jsx)(Sn,{label:"Pool share",inputId:"deposit-share",amount:"N/A"}):Object(E.jsx)(Sn,{label:"Pool share",inputId:"deposit-share",amount:h.prettify(4),pendingAmount:null===v||void 0===v?void 0:v.prettify(4).concat("%"),pendingColor:(null===v||void 0===v?void 0:v.positive)?"success":"danger",unit:"%"}),!t.isEmpty&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Sn,{label:"Liquidation gain",inputId:"deposit-gain",amount:t.collateralGain.prettify(4),color:t.collateralGain.nonZero&&"success",unit:"ETH"}),Object(E.jsx)(Sn,{label:"Reward",inputId:"deposit-reward",amount:t.lqtyReward.prettify(),color:t.lqtyReward.nonZero&&"success",unit:Fe,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"240px"},children:"Although the LQTY rewards accrue every minute, the value on the UI only updates when a user transacts with the Stability Pool. Therefore you may receive more rewards than is displayed when you claim or adjust your deposit."})})})]}),s]}),a&&Object(E.jsx)(En,{})]})},Ea=function(e){return"registered"===e.frontend.status},Aa=function(e){var t=e.children,n=e.transactionId,a=e.change,i=R(),r=i.config,s=i.liquity,o=Object(Ue.useLiquitySelector)(Ea)?r.frontendTag:void 0,u=be(n,a.depositLUSD?s.send.depositLUSDInStabilityPool.bind(s.send,a.depositLUSD,o):s.send.withdrawLUSDFromStabilityPool.bind(s.send,a.withdrawLUSD)),l=Object(m.a)(u,1)[0];return Object(E.jsx)(d.c,{onClick:l,children:t})},Ca=Object(i.createContext)(null),Ia=function(){var e=Object(i.useContext)(Ca);if(null===e)throw new Error("You must add a <StabilityViewProvider> into the React tree");return e},Ra=function(e){var t,n,a=e.originalDeposit,i=e.change,r=null===(t=a.collateralGain.nonZero)||void 0===t?void 0:t.prettify(4).concat(" ETH"),s=null===(n=a.lqtyReward.nonZero)||void 0===n?void 0:n.prettify().concat(" ",Fe);return Object(E.jsxs)(jn,{children:[i.depositLUSD?Object(E.jsxs)(E.Fragment,{children:["You are depositing"," ",Object(E.jsxs)(Tn,{children:[i.depositLUSD.prettify()," ",Ne]})," ","in the Stability Pool"]}):Object(E.jsxs)(E.Fragment,{children:["You are withdrawing"," ",Object(E.jsxs)(Tn,{children:[i.withdrawLUSD.prettify()," ",Ne]})," ","to your wallet"]}),(r||s)&&Object(E.jsxs)(E.Fragment,{children:[" ","and claiming at least"," ",r&&s?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Tn,{children:r})," and ",Object(E.jsx)(Tn,{children:s})]}):Object(E.jsx)(Tn,{children:null!==r&&void 0!==r?r:s})]}),"."]})},Ma=function(e){var t=e.trove,n=e.lusdBalance,a=e.ownFrontend,i=e.haveUndercollateralizedTroves;return{trove:t,lusdBalance:n,haveOwnFrontend:"registered"===a.status,haveUndercollateralizedTroves:i}},Pa=function(e){var t=e.stabilityDeposit;return{originalDeposit:t,editedLUSD:t.currentLUSD,changePending:!1}},Ba=function(e){return function(t){return Fa(t,e)}},Ua=Ba({type:"finishChange"}),Na=Ba({type:"revert"}),Fa=function(e,t){var n=e.originalDeposit,a=e.editedLUSD,i=e.changePending;switch(t.type){case"startChange":return console.log("changeStarted"),Object(x.a)(Object(x.a)({},e),{},{changePending:!0});case"finishChange":return Object(x.a)(Object(x.a)({},e),{},{changePending:!1});case"setDeposit":return Object(x.a)(Object(x.a)({},e),{},{editedLUSD:Be.Decimal.from(t.newValue)});case"revert":return Object(x.a)(Object(x.a)({},e),{},{editedLUSD:n.currentLUSD});case"updateStore":var r=t.stateChange.stabilityDeposit;if(!r)return e;var s=Object(x.a)(Object(x.a)({},e),{},{originalDeposit:r}),o=!r.initialLUSD.eq(n.initialLUSD)||r.currentLUSD.gt(n.currentLUSD)||r.collateralGain.lt(n.collateralGain)||r.lqtyReward.lt(n.lqtyReward);return i&&o?Ua(Na(s)):Object(x.a)(Object(x.a)({},s),{},{editedLUSD:r.apply(n.whatChanged(a))})}},qa="stability-deposit",Ya=function(){var e=Object(Ue.useLiquityReducer)(Fa,Pa),t=Object(m.a)(e,2),n=t[0],a=n.originalDeposit,r=n.editedLUSD,s=n.changePending,o=t[1],u=Object(Ue.useLiquitySelector)(Ma),l=Ia().dispatchEvent,c=Object(i.useCallback)((function(){l("CANCEL_PRESSED")}),[l]),p=function(e,t,n){var a,i=n.lusdBalance,r=n.haveOwnFrontend,s=n.haveUndercollateralizedTroves,o=e.whatChanged(t);return r?[void 0,Object(E.jsx)(Bn,{children:"You can\u2019t deposit using a wallet address that is registered as a frontend."})]:o?(null===(a=o.depositLUSD)||void 0===a?void 0:a.gt(i))?[void 0,Object(E.jsxs)(Bn,{children:["The amount you're trying to deposit exceeds your balance by"," ",Object(E.jsxs)(Tn,{children:[o.depositLUSD.sub(i).prettify()," ",Ne]}),"."]})]:o.withdrawLUSD&&s?[void 0,Object(E.jsx)(Bn,{children:"You're not allowed to withdraw LUSD from your Stability Deposit when there are undercollateralized Troves. Please liquidate those Troves or try again later."})]:[o,Object(E.jsx)(Ra,{originalDeposit:e,change:o})]:[void 0,void 0]}(a,r,u),y=Object(m.a)(p,2),b=y[0],f=y[1],h=a.isEmpty,v=ye(qa);return Object(i.useEffect)((function(){"waitingForApproval"===v.type||"waitingForConfirmation"===v.type?o({type:"startChange"}):"failed"===v.type||"cancelled"===v.type?o({type:"finishChange"}):"confirmedOneShot"===v.type&&l("DEPOSIT_CONFIRMED")}),[v.type,o,l]),Object(E.jsxs)(La,{originalDeposit:a,editedLUSD:r,changePending:s,dispatch:o,children:[null!==f&&void 0!==f?f:h?Object(E.jsxs)(jn,{children:["Enter the amount of ",Ne," you'd like to deposit."]}):Object(E.jsxs)(jn,{children:["Adjust the ",Ne," amount to deposit or withdraw."]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:c,children:"Cancel"}),b?Object(E.jsx)(Aa,{transactionId:qa,change:b,children:"Confirm"}):Object(E.jsx)(d.c,{disabled:!0,children:"Confirm"})]})]})},Ga=function(e){var t=e.disabled,n=e.children,a=R().liquity,i=be("stability-deposit",a.send.transferCollateralGainToTrove.bind(a.send)),r=Object(m.a)(i,1)[0];return Object(E.jsx)(d.c,{variant:"outline",sx:{mt:3,width:"100%"},onClick:r,disabled:t,children:n})},Qa=function(e){var t=e.disabled,n=e.children,a=R().liquity,i=be("stability-deposit",a.send.withdrawGainsFromStabilityPool.bind(a.send)),r=Object(m.a)(i,1)[0];return Object(E.jsx)(d.c,{onClick:r,disabled:t,children:n})},Wa=function(e){return{remainingStabilityPoolLQTYReward:e.remainingStabilityPoolLQTYReward}},Za=function(){var e=Object(Ue.useLiquitySelector)(Wa).remainingStabilityPoolLQTYReward;return Object(E.jsxs)(d.h,{sx:{mr:2,fontSize:2,fontWeight:"medium"},children:[e.prettify(0)," LQTY remaining"]})},Ha=function(e){var t=e.children;return Object(E.jsx)(d.h,{variant:"layout.badge",children:t})},za=n(54),Va=function(e,t){return t in e},Ja=function(e,t,n){if("object"!==typeof n||null===n)throw new Error("unexpected response from CoinGecko");var a,i=Object(za.a)(e);try{for(i.s();!(a=i.n()).done;){var r=a.value;if(!Va(n,r))throw new Error('coin "'.concat(r,'" missing from CoinGecko response'));var s,o=n[r],u=Object(za.a)(t);try{for(u.s();!(s=u.n()).done;){var l=s.value;if(!Va(o,l))throw new Error('currency "'.concat(l,'" missing from CoinGecko response'));if("number"!==typeof o[l])throw new Error('price of coin "'.concat(r,'" in currency "').concat(l,'" is not a number'))}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return n},Ka=function(){var e=Object(T.a)(j.a.mark((function e(t,n){var a,i;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="https://api.coingecko.com/api/v3/simple/price?"+new URLSearchParams({ids:t.join(","),vs_currencies:n.join(",")}),e.next=3,window.fetch(a,{headers:{accept:"application/json"}});case 3:if((i=e.sent).ok){e.next=6;break}throw new Error("couldn't fetch price from CoinGecko: got status ".concat(i.status));case 6:return e.t0=Ja,e.t1=t,e.t2=n,e.next=11,i.json();case 11:return e.t3=e.sent,e.abrupt("return",(0,e.t0)(e.t1,e.t2,e.t3));case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$a=function(){var e=Object(T.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ka(["liquity"],["usd"]);case 2:return t=e.sent,e.abrupt("return",{lqtyPriceUSD:Be.Decimal.from(t.liquity.usd)});case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Xa=function(e){return{lusdInStabilityPool:e.lusdInStabilityPool,remainingStabilityPoolLQTYReward:e.remainingStabilityPoolLQTYReward}},ei=Be.Decimal.from(1-Math.pow(.5,1/365)),ti=ei.mul(100),ni=function(){var e=Object(Ue.useLiquitySelector)(Xa),t=e.lusdInStabilityPool,n=e.remainingStabilityPoolLQTYReward,a=Object(i.useState)(void 0),r=Object(m.a)(a,2),s=r[0],o=r[1],u=n.isZero||t.isZero;if(Object(i.useEffect)((function(){Object(T.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$a();case 3:t=e.sent,n=t.lqtyPriceUSD,o(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()}),[]),u||void 0===s)return null;var l=n.mul(ei).mul(s).mulDiv(36500,t),c=n.mul(s);return l.isZero?null:Object(E.jsxs)(Ha,{children:[Object(E.jsxs)(d.t,{children:["LQTY APR ",l.toString(2),"%"]}),Object(E.jsx)(Gt,{tooltip:Object(E.jsxs)(d.d,{variant:"tooltip",sx:{width:["220px","518px"]},children:[Object(E.jsxs)(d.p,{children:["An ",Object(E.jsx)(d.t,{sx:{fontWeight:"bold"},children:"estimate"})," of the LQTY return on the LUSD deposited to the Stability Pool over the next year, not including your ETH gains from liquidations."]}),Object(E.jsxs)(d.p,{sx:{fontSize:"12px",fontFamily:"monospace",mt:2},children:["($LQTY_REWARDS * DAILY_ISSUANCE% / DEPOSITED_LUSD) * 365 * 100 ="," ",Object(E.jsx)(d.t,{sx:{fontWeight:"bold"},children:" APR"})]}),Object(E.jsxs)(d.p,{sx:{fontSize:"12px",fontFamily:"monospace"},children:["($",c.shorten()," * ",ti.toString(4),"% / $",t.shorten(),") * 365 * 100 =",Object(E.jsxs)(d.t,{sx:{fontWeight:"bold"},children:[" ",l.toString(2),"%"]})]})]})})]})},ai=function(e){return{stabilityDeposit:e.stabilityDeposit,trove:e.trove,lusdInStabilityPool:e.lusdInStabilityPool}},ii=function(){var e=Ia().dispatchEvent,t=Object(Ue.useLiquitySelector)(ai),n=t.stabilityDeposit,a=t.trove,r=t.lusdInStabilityPool,s=n.currentLUSD.mulDiv(100,r),o=Object(i.useCallback)((function(){e("ADJUST_DEPOSIT_PRESSED")}),[e]),u=!n.lqtyReward.isZero,l=!n.collateralGain.isZero,c=!a.isEmpty,p=ye("stability-deposit"),y="waitingForApproval"===p.type||"waitingForConfirmation"===p.type;return Object(i.useEffect)((function(){"confirmedOneShot"===p.type&&e("REWARDS_CLAIMED")}),[p.type,e]),Object(E.jsxs)(d.d,{children:[Object(E.jsxs)(d.j,{children:["Stability Pool",!y&&Object(E.jsx)(d.h,{sx:{justifyContent:"flex-end"},children:Object(E.jsx)(Za,{})})]}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsxs)(d.b,{children:[Object(E.jsx)(Dn,{label:"Deposit",inputId:"deposit-lusd",amount:n.currentLUSD.prettify(),unit:Ne}),Object(E.jsx)(Sn,{label:"Pool share",inputId:"deposit-share",amount:s.prettify(4),unit:"%"}),Object(E.jsx)(Sn,{label:"Liquidation gain",inputId:"deposit-gain",amount:n.collateralGain.prettify(4),color:n.collateralGain.nonZero&&"success",unit:"ETH"}),Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(Sn,{label:"Reward",inputId:"deposit-reward",amount:n.lqtyReward.prettify(),color:n.lqtyReward.nonZero&&"success",unit:Fe,infoIcon:Object(E.jsx)(Gt,{tooltip:Object(E.jsx)(d.d,{variant:"tooltip",sx:{width:"240px"},children:"Although the LQTY rewards accrue every minute, the value on the UI only updates when a user transacts with the Stability Pool. Therefore you may receive more rewards than is displayed when you claim or adjust your deposit."})})}),Object(E.jsx)(d.h,{sx:{justifyContent:"flex-end",flex:1},children:Object(E.jsx)(ni,{})})]})]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsxs)(d.c,{variant:"outline",onClick:o,children:[Object(E.jsx)(Y,{name:"pen",size:"sm"}),"\xa0Adjust"]}),Object(E.jsx)(Qa,{disabled:!l&&!u,children:"Claim ETH and LQTY"})]}),c&&Object(E.jsx)(Ga,{disabled:!l,children:"Claim LQTY and move ETH to Trove"})]}),y&&Object(E.jsx)(En,{})]})},ri=function(e){var t=Ia().dispatchEvent,n=Object(i.useCallback)((function(){t("DEPOSIT_PRESSED")}),[t]);return Object(E.jsxs)(d.d,{children:[Object(E.jsxs)(d.j,{children:["Stability Pool",Object(E.jsx)(d.h,{sx:{justifyContent:"flex-end"},children:Object(E.jsx)(Za,{})})]}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(sa,{title:"You have no LUSD in the Stability Pool.",children:"You can earn ETH and LQTY rewards by depositing LUSD."}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.h,{sx:{justifyContent:"flex-start",flex:1,alignItems:"center"},children:Object(E.jsx)(ni,{})}),Object(E.jsx)(d.c,{onClick:n,children:"Deposit"})]})]})]})},si=function(e){switch(Ia().view){case"NONE":return Object(E.jsx)(ri,Object(x.a)({},e));case"DEPOSITING":case"ADJUSTING":return Object(E.jsx)(Ya,Object(x.a)({},e));case"ACTIVE":return Object(E.jsx)(ii,Object(x.a)({},e))}},oi=function(e){return e.price},ui=function(){var e=R().liquity,t=e.send,n=e.connection._priceFeedIsTestnet,a=Object(Ue.useLiquitySelector)(oi),r=Object(i.useState)(a.toString(2)),s=Object(m.a)(r,2),o=s[0],u=s[1];return Object(i.useEffect)((function(){u(a.toString(2))}),[a]),Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Price feed"}),Object(E.jsx)(d.b,{sx:{p:[2,3]},children:Object(E.jsxs)(d.h,{sx:{alignItems:"stretch"},children:[Object(E.jsx)(d.m,{children:"ETH"}),Object(E.jsx)(d.m,{variant:"unit",children:"$"}),Object(E.jsx)(d.l,{type:n?"number":"text",step:"any",value:o,onChange:function(e){return u(e.target.value)},disabled:!n}),n&&Object(E.jsx)(d.h,{sx:{ml:2,alignItems:"center"},children:Object(E.jsx)(me,{id:"set-price",tooltip:"Set",tooltipPlacement:"bottom",send:function(e){if(!o)throw new Error("Invalid price");return t.setPrice(Be.Decimal.from(o),e)},children:Object(E.jsx)(d.c,{variant:"icon",children:Object(E.jsx)(Y,{name:"chart-line",size:"lg"})})})})]})})]})},li=Object(i.createContext)(null),ci=function(){var e=Object(i.useContext)(li);if(null===e)throw new Error("You must add a <TroveViewProvider> into the React tree");return e},di=function(e){return e.lqtyStake},pi=function(){var e=R().liquity,t=Object(Ue.useLiquitySelector)(di),n=t.collateralGain,a=t.lusdGain,i=be("stake",e.send.withdrawGainsFromStaking.bind(e.send)),r=Object(m.a)(i,1)[0];return Object(E.jsx)(d.c,{onClick:r,disabled:n.isZero&&a.isZero,children:"Claim gains"})},yi=function(e){return{lqtyStake:e.lqtyStake,totalStakedLQTY:e.totalStakedLQTY}},bi=function(){var e=ci(),t=e.changePending,n=e.dispatch,a=Object(Ue.useLiquitySelector)(yi),i=a.lqtyStake,r=a.totalStakedLQTY,s=i.stakedLQTY.mulDiv(100,r);return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Staking"}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(Dn,{label:"Stake",inputId:"stake-lqty",amount:i.stakedLQTY.prettify(),unit:Fe}),Object(E.jsx)(Sn,{label:"Pool share",inputId:"stake-share",amount:s.prettify(4),unit:"%"}),Object(E.jsx)(Sn,{label:"Redemption gain",inputId:"stake-gain-eth",amount:i.collateralGain.prettify(4),color:i.collateralGain.nonZero&&"success",unit:"ETH"}),Object(E.jsx)(Sn,{label:"Issuance gain",inputId:"stake-gain-lusd",amount:i.lusdGain.prettify(),color:i.lusdGain.nonZero&&"success",unit:Ne}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsxs)(d.c,{variant:"outline",onClick:function(){return n({type:"startAdjusting"})},children:[Object(E.jsx)(Y,{name:"pen",size:"sm"}),"\xa0Adjust"]}),Object(E.jsx)(pi,{})]})]}),t&&Object(E.jsx)(En,{})]})},mi=function(e){return{lqtyBalance:e.lqtyBalance,totalStakedLQTY:e.totalStakedLQTY}},fi=function(e){var t=e.children,n=e.title,a=e.originalStake,r=e.editedLQTY,s=e.dispatch,o=Object(Ue.useLiquitySelector)(mi),u=o.lqtyBalance,l=o.totalStakedLQTY,c=ci().changePending,p=Object(i.useState)(),y=!r.eq(a.stakedLQTY),b=a.stakedLQTY.add(u),m=r.eq(b),f=l.sub(a.stakedLQTY).add(r),h=a.stakedLQTY.mulDiv(100,l),v=r.mulDiv(100,f),j=a.stakedLQTY.nonZero&&Be.Difference.between(v,h).nonZero;return Object(E.jsxs)(d.d,{children:[Object(E.jsxs)(d.j,{children:[n,y&&!c&&Object(E.jsx)(d.c,{variant:"titleIcon",sx:{":enabled:hover":{color:"danger"}},onClick:function(){return s({type:"revert"})},children:Object(E.jsx)(Y,{name:"history",size:"lg"})})]}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(Ln,{label:"Stake",inputId:"stake-lqty",amount:r.prettify(),maxAmount:b.toString(),maxedOut:m,unit:Fe,editingState:p,editedAmount:r.toString(2),setEditedAmount:function(e){return s({type:"setStake",newValue:e})}}),v.infinite?Object(E.jsx)(Sn,{label:"Pool share",inputId:"stake-share",amount:"N/A"}):Object(E.jsx)(Sn,{label:"Pool share",inputId:"stake-share",amount:v.prettify(4),pendingAmount:null===j||void 0===j?void 0:j.prettify(4).concat("%"),pendingColor:(null===j||void 0===j?void 0:j.positive)?"success":"danger",unit:"%"}),!a.isEmpty&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Sn,{label:"Redemption gain",inputId:"stake-gain-eth",amount:a.collateralGain.prettify(4),color:a.collateralGain.nonZero&&"success",unit:"ETH"}),Object(E.jsx)(Sn,{label:"Issuance gain",inputId:"stake-gain-lusd",amount:a.lusdGain.prettify(),color:a.lusdGain.nonZero&&"success",unit:Ne})]}),t]}),c&&Object(E.jsx)(En,{})]})},hi=function(e){var t=e.change,n=e.children,a=R().liquity,i=be("stake",t.stakeLQTY?a.send.stakeLQTY.bind(a.send,t.stakeLQTY):a.send.unstakeLQTY.bind(a.send,t.unstakeLQTY)),r=Object(m.a)(i,1)[0];return Object(E.jsx)(d.c,{onClick:r,children:n})},vi=function(e){var t=e.lqtyStake;return{originalStake:t,editedLQTY:t.stakedLQTY}},ji=function(e,t){var n=e.originalStake,a=e.editedLQTY;switch(t.type){case"setStake":return Object(x.a)(Object(x.a)({},e),{},{editedLQTY:Be.Decimal.from(t.newValue)});case"revert":return Object(x.a)(Object(x.a)({},e),{},{editedLQTY:n.stakedLQTY});case"updateStore":var i=t.stateChange.lqtyStake;if(i)return{originalStake:i,editedLQTY:i.apply(n.whatChanged(a))}}return e},Ti=function(e){return e.lqtyBalance},xi=function(e){var t,n,a,i,r=e.originalStake,s=e.change,o=null===(t=s.stakeLQTY)||void 0===t?void 0:t.prettify().concat(" ",Fe),u=null===(n=s.unstakeLQTY)||void 0===n?void 0:n.prettify().concat(" ",Fe),l=null===(a=r.collateralGain.nonZero)||void 0===a?void 0:a.prettify(4).concat(" ETH"),c=null===(i=r.lusdGain.nonZero)||void 0===i?void 0:i.prettify().concat(" ",Ne);return r.isEmpty&&o?Object(E.jsxs)(jn,{children:["You are staking ",Object(E.jsx)(Tn,{children:o}),"."]}):Object(E.jsxs)(jn,{children:[o&&Object(E.jsxs)(E.Fragment,{children:["You are adding ",Object(E.jsx)(Tn,{children:o})," to your stake"]}),u&&Object(E.jsxs)(E.Fragment,{children:["You are withdrawing ",Object(E.jsx)(Tn,{children:u})," to your wallet"]}),(l||c)&&Object(E.jsxs)(E.Fragment,{children:[" ","and claiming"," ",l&&c?Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Tn,{children:l})," and ",Object(E.jsx)(Tn,{children:c})]}):Object(E.jsx)(E.Fragment,{children:Object(E.jsx)(Tn,{children:null!==l&&void 0!==l?l:c})})]}),"."]})},gi=function(){var e,t=ci().dispatch,n=Object(Ue.useLiquityReducer)(ji,vi),a=Object(m.a)(n,2),i=a[0],r=i.originalStake,s=i.editedLQTY,o=a[1],u=Object(Ue.useLiquitySelector)(Ti),l=r.whatChanged(s),c=l?(null===(e=l.stakeLQTY)||void 0===e?void 0:e.gt(u))?[void 0,Object(E.jsxs)(Bn,{children:["The amount you're trying to stake exceeds your balance by"," ",Object(E.jsxs)(Tn,{children:[l.stakeLQTY.sub(u).prettify()," ",Fe]}),"."]})]:[l,Object(E.jsx)(xi,{originalStake:r,change:l})]:[void 0,void 0],p=Object(m.a)(c,2),y=p[0],b=p[1],f=r.isEmpty;return Object(E.jsxs)(fi,{title:"Staking",originalStake:r,editedLQTY:s,dispatch:o,children:[null!==b&&void 0!==b?b:f?Object(E.jsxs)(jn,{children:["Enter the amount of ",Fe," you'd like to stake."]}):Object(E.jsxs)(jn,{children:["Adjust the ",Fe," amount to stake or withdraw."]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:function(){return t({type:"cancelAdjusting"})},children:"Cancel"}),y?Object(E.jsx)(hi,{change:y,children:"Confirm"}):Object(E.jsx)(d.c,{disabled:!0,children:"Confirm"})]})]})},Oi=function(){var e=ci().dispatch;return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Staking"}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsxs)(sa,{title:"You haven't staked ".concat(Fe," yet."),children:["Stake ",Fe," to earn a share of borrowing and redemption fees."]}),Object(E.jsx)(d.h,{variant:"layout.actions",children:Object(E.jsx)(d.c,{onClick:function(){return e({type:"startAdjusting"})},children:"Start staking"})})]})]})},wi=function(){switch(ci().view){case"ACTIVE":return Object(E.jsx)(bi,{});case"ADJUSTING":return Object(E.jsx)(gi,{});case"NONE":return Object(E.jsx)(Oi,{})}},_i=function(){return Object(E.jsx)(sa,{title:Qe.term,children:Qe.description})};const Si=({estimate:e,children:t})=>e.toString()!==Be.Decimal.INFINITY.toString()?Object(E.jsx)(E.Fragment,{children:null!==t&&void 0!==t?t:e}):Object(E.jsxs)(E.Fragment,{children:[Be.Decimal.INFINITY.toString(),Object(E.jsx)(Gt,{size:"xs",tooltip:Et.description,link:Et.link}),"\xa0"]});var ki=n(7);const{BONDS:Di,BOND_DEPOSIT:Li,ACCRUED_AMOUNT:Ei,MARKET_VALUE:Ai,OPTIMUM_REBOND_TIME:Ci,BREAK_EVEN_TIME:Ii}=a,Ri=()=>Object(ki.b)(d.h,{sx:{borderTop:"1px dotted gray",width:"100%",mt:"-20px",mb:0}}),Mi=e=>e<0?"Elapsed":0===e?"Now":parseFloat(e.toFixed(1))<1?`${e.toFixed(1)} days`:e>1e4?Be.Decimal.INFINITY.toString():`${e.toFixed(0)} days`,Pi=e=>Array.from(Array(e)).map(((e,t)=>Object(ki.b)(Ri,{},t))),Bi=()=>{const{bonds:e,hasLoaded:t}=Ct();if(!t)return null;const n=e?e.filter((e=>"PENDING"===e.status)):[],a=n.length>0;return Object(ki.c)(d.d,{children:[Object(ki.b)(d.j,{children:Object(ki.c)(d.h,{children:["Pending bonds"," ",Object(ki.b)(Gt,{placement:"left",size:"xs",tooltip:Object(ki.b)(d.d,{variant:"tooltip",children:Di.description})})]})}),Object(ki.c)(d.b,{sx:{p:[2,3]},children:[!a&&Object(ki.b)(_i,{}),a&&Object(ki.c)(d.i,{gap:"12px 0px",columns:[5,"1fr 1fr 1.1fr 1.3fr 1fr"],sx:{alignItems:"center",justifyItems:"center",alignContent:"center"},children:[Object(ki.c)(d.t,{sx:{fontWeight:"bold"},children:[Li.term," ",Object(ki.b)(Gt,{size:"xs",tooltip:Object(ki.b)(d.d,{variant:"tooltip",children:Li.description})})]}),Object(ki.c)(d.t,{sx:{fontWeight:"bold"},children:[Ei.term," ",Object(ki.b)(Gt,{size:"xs",tooltip:Object(ki.b)(d.d,{variant:"tooltip",children:Ei.description})})]}),Object(ki.c)(d.t,{sx:{fontWeight:"bold"},children:[Ai.term," ",Object(ki.b)(Gt,{size:"xs",tooltip:Object(ki.b)(d.d,{variant:"tooltip",children:Ai.description})})]}),Object(ki.c)(d.t,{sx:{fontWeight:"bold"},children:[Ii.term," ",Object(ki.b)(Gt,{size:"xs",tooltip:Object(ki.b)(d.d,{variant:"tooltip",children:Ii.description})})]}),Object(ki.c)(d.t,{sx:{fontWeight:"bold"},children:[Ci.term," ",Object(ki.b)(Gt,{size:"xs",tooltip:Object(ki.b)(d.d,{variant:"tooltip",children:Ci.description})})]}),Pi(5),n.map(((e,t)=>{const n=Mi((e.breakEvenTime.getTime()-Date.now())/1e3/60/60/24),a=Mi((e.rebondTime.getTime()-Date.now())/1e3/60/60/24);return Object(ki.c)(r.a.Fragment,{children:[Object(ki.c)(d.t,{children:[e.deposit.shorten()," LUSD"]}),Object(ki.c)(d.t,{children:[e.accrued.shorten()," bLUSD"]}),Object(ki.c)(d.t,{children:[e.marketValue.shorten()," LUSD"]}),Object(ki.b)(d.t,{children:Object(ki.b)(Si,{estimate:n})}),Object(ki.b)(d.t,{children:Object(ki.b)(Si,{estimate:a})}),Pi(5)]},t)}))]}),Object(ki.b)(d.h,{variant:"layout.actions",mt:3,children:Object(ki.b)(yn,{to:"/bonds/pending",m:0,p:0,children:Object(ki.b)(d.c,{variant:"primary",children:"Go to bonds"})})})]})]})};var Ui=function(){return Object(E.jsxs)(d.g,{variant:"columns",children:[Object(E.jsxs)(d.g,{variant:"left",children:[Object(E.jsx)(Bi,{}),Object(E.jsx)(ka,{}),Object(E.jsx)(si,{}),Object(E.jsx)(wi,{})]}),Object(E.jsxs)(d.g,{variant:"right",children:[Object(E.jsx)(un,{}),Object(E.jsx)(ui,{})]})]})},Ni=function(){var e=R().config.frontendTag;return Object(E.jsxs)(d.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,p:3,maxWidth:"500px",border:1,borderRadius:"8px",borderColor:"warning",boxShadow:2},children:[Object(E.jsxs)(d.h,{sx:{alignItems:"center",mx:3,mb:2},children:[Object(E.jsx)(Y,{name:"exclamation-triangle",size:"2x"}),Object(E.jsx)(d.j,{sx:{ml:3,fontSize:"18px"},children:"Frontend not yet registered"})]}),Object(E.jsxs)(d.p,{sx:{fontSize:2},children:["If you're the operator of this frontend, please select ",Object(E.jsx)("b",{children:qe(e)})," ","in your wallet to proceed with the registration."]})]})},Fi=function(e){var t=e.kickbackRate,n=R().liquity.send,a="register-frontend",i=ye(a);return"waitingForApproval"===i.type?Object(E.jsxs)(d.c,{disabled:!0,children:[Object(E.jsx)(d.s,{sx:{mr:2,color:"white"},size:"20px"}),"Waiting for your approval"]}):"waitingForConfirmation"!==i.type&&"confirmed"!==i.type?Object(E.jsx)(me,{id:a,send:n.registerFrontend.bind(n,t),children:Object(E.jsx)(d.c,{children:"Register"})}):null},qi=function(){var e=R().account,t=Object(i.useState)(Be.Decimal.from(.8)),n=Object(m.a)(t,2),a=n[0],r=n[1],s=Object(i.useState)(Be.Decimal.from(.2)),o=Object(m.a)(s,2),u=o[0],l=o[1],c=Object(i.useState)("80"),p=Object(m.a)(c,2),y=p[0],b=p[1];return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Choose a kickback rate"}),Object(E.jsx)(d.b,{sx:{p:[2,3]},children:Object(E.jsxs)(d.h,{children:[Object(E.jsx)(d.m,{children:"Kickback rate"}),Object(E.jsx)(d.m,{variant:"unit",children:"%"}),Object(E.jsx)(d.l,{sx:{maxWidth:"200px"},type:"number",step:"any",value:y,onChange:function(e){b(e.target.value);try{var t=Be.Decimal.from(e.target.value||0).div(100),n=Be.Decimal.ONE.sub(t);r(t),l(n)}catch(a){}},onBlur:function(){b(a.mul(100).toString())}})]})})]}),Object(E.jsxs)(d.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,mt:[3,null,4],mb:4,p:3,maxWidth:"450px",border:1,borderRadius:"8px",borderColor:"danger",boxShadow:2},children:[Object(E.jsxs)(d.h,{sx:{alignItems:"center",mx:3,fontSize:4},children:[Object(E.jsx)(Y,{name:"hand-paper"}),Object(E.jsx)(d.j,{sx:{ml:3,fontSize:"18px"},children:"Before you proceed"})]}),Object(E.jsxs)(d.p,{sx:{fontSize:1,mt:3},children:["You are about to register ",Object(E.jsx)("b",{children:qe(e)})," to receive"," ",Object(E.jsxs)("b",{children:[u.mul(100).toString(),"%"]})," of the LQTY rewards earned through this frontend."]}),Object(E.jsx)(d.p,{sx:{fontSize:1,mt:3,fontWeight:"bold"},children:"You will not be able to change the kickback rate for this address later."}),Object(E.jsx)(d.p,{sx:{fontSize:1,mt:3},children:"If you'd like to use a different kickback rate in the future, you will need to repeat this registration with a different address."})]}),Object(E.jsx)(Fi,{kickbackRate:a})]})},Yi=function(e){var t=e.onDismiss;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(d.b,{sx:{display:"flex",flexDirection:"column",justifyContent:"space-around",m:3,mt:4,mb:4,p:4,maxWidth:"500px",bg:"rgba(40, 192, 129, 0.05)",color:"success",border:1,borderRadius:"8px",borderColor:"success",boxShadow:2},children:[Object(E.jsxs)(d.h,{sx:{alignItems:"center",mx:3,mb:4,fontSize:5},children:[Object(E.jsx)(Y,{name:"check"}),Object(E.jsx)(d.j,{sx:{ml:3,fontSize:4},children:"Success!"})]}),Object(E.jsx)(d.p,{sx:{fontSize:2},children:"Your frontend is now ready to receive LQTY rewards."})]}),Object(E.jsx)(d.c,{onClick:t,children:"Go to Dashboard"})]})},Gi=function(e){return e.frontend},Qi=function(){var e=R(),t=e.account,n=e.config.frontendTag,a=Object(Ue.useLiquitySelector)(Gi),r=n!==g.a&&"unregistered"===a.status,s=Object(i.useState)(!1),o=Object(m.a)(s,2),u=o[0],l=o[1];return Object(i.useEffect)((function(){r&&l(!0)}),[r]),u||r?"registered"===a.status?Object(E.jsx)(Yi,{onDismiss:function(){return l(!1)}}):t===n?Object(E.jsx)(qi,{}):Object(E.jsx)(Ni,{}):Object(E.jsx)(Ui,{})},Wi=function(){var e=R().liquity.send,t=Object(i.useState)("90"),n=Object(m.a)(t,2),a=n[0],r=n[1];return Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:"Liquidate"}),Object(E.jsx)(d.b,{sx:{p:[2,3]},children:Object(E.jsxs)(d.h,{sx:{alignItems:"stretch"},children:[Object(E.jsx)(d.m,{children:"Up to"}),Object(E.jsx)(d.l,{type:"number",min:"1",step:"1",value:a,onChange:function(e){return r(e.target.value)}}),Object(E.jsx)(d.m,{children:"Troves"}),Object(E.jsx)(d.h,{sx:{ml:2,alignItems:"center"},children:Object(E.jsx)(me,{id:"batch-liquidate",tooltip:"Liquidate",tooltipPlacement:"bottom",send:function(t){if(!a)throw new Error("Invalid number");return e.liquidateUpTo(parseInt(a,10),t)},children:Object(E.jsx)(d.c,{variant:"dangerIcon",children:Object(E.jsx)(Y,{name:"trash",size:"lg"})})})})]})})]})},Zi=n(346),Hi=n.n(Zi),zi=function(e){var t=e.children,n=e.short,a=Object(P.a)(e,["children","short"]);return Object(E.jsxs)(d.b,Object(x.a)(Object(x.a)({as:"span"},a),{},{children:[Object(E.jsx)(d.b,{as:"span",sx:{display:["none","unset"]},children:t}),Object(E.jsx)(d.b,{as:"span",sx:{display:["unset","none"]},children:n})]}))},Vi="40px",Ji=function(e,t){return[e.collateralRatioIsBelowMinimum(t),"Collateral ratio not low enough"]},Ki=function(e,t,n,a){var i=e.collateralRatio(t);return i.gte(Be.MINIMUM_COLLATERAL_RATIO)&&i.lt(n)?[e.debt.lte(a),"There's not enough LUSD in the Stability pool to cover the debt"]:Ji(e,t)},$i=function(e){var t=e.numberOfTroves,n=e.price,a=e.total,i=e.lusdInStabilityPool,r=e.blockTag;return{numberOfTroves:t,price:n,recoveryMode:a.collateralRatioIsBelowCritical(n),totalCollateralRatio:a.collateralRatio(n),lusdInStabilityPool:i,blockTag:r}},Xi=function(e){var t=e.pageSize,n=Object(Ue.useLiquitySelector)($i),a=n.blockTag,r=n.numberOfTroves,s=n.recoveryMode,o=n.totalCollateralRatio,u=n.lusdInStabilityPool,l=n.price,c=R().liquity,p=Object(i.useState)(!0),y=Object(m.a)(p,2),b=y[0],f=y[1],h=Object(i.useState)(),v=Object(m.a)(h,2),j=v[0],T=v[1],x=Object(i.useState)({}),g=Object(m.a)(x,2),O=g[0],w=g[1],_=Object(i.useCallback)((function(){return w({})}),[]),S=Object(i.useState)(0),k=Object(m.a)(S,2),D=k[0],L=k[1],A=Math.ceil(r/t)||1,C=Math.min(D,A-1);Object(i.useEffect)((function(){D!==C&&L(C)}),[D,C]),Object(i.useEffect)((function(){var e=!0;return f(!0),c.getTroves({first:t,sortedBy:"ascendingCollateralRatio",startingAt:C*t},{blockTag:a}).then((function(t){e&&(T(t),f(!1))})),function(){e=!1}}),[c,C,t,O]),Object(i.useEffect)((function(){_()}),[_,r]);var I=Object(i.useState)(),M=Object(m.a)(I,2),P=M[0],B=M[1];return Object(i.useEffect)((function(){if(void 0!==P){var e=!1;return setTimeout((function(){e||B(void 0)}),2e3),function(){e=!0}}}),[P]),Object(E.jsxs)(d.d,{sx:{width:"100%"},children:[Object(E.jsxs)(d.j,{children:[Object(E.jsx)(zi,{short:"Troves",children:"Risky Troves"}),Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[0!==r&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(zi,{short:"page ".concat(C+1," / ").concat(A),sx:{mr:[0,3],fontWeight:"body",fontSize:[1,2],letterSpacing:[-1,0]},children:[C*t+1,"-",Math.min((C+1)*t,r)," ","of ",r]}),Object(E.jsx)(d.c,{variant:"titleIcon",onClick:function(){C>0&&L(C-1)},disabled:C<=0,children:Object(E.jsx)(Y,{name:"chevron-left",size:"lg"})}),Object(E.jsx)(d.c,{variant:"titleIcon",onClick:function(){C<A-1&&L(C+1)},disabled:C>=A-1,children:Object(E.jsx)(Y,{name:"chevron-right",size:"lg"})})]}),Object(E.jsx)(d.c,{variant:"titleIcon",sx:{opacity:b?0:1,ml:[0,3]},onClick:_,children:Object(E.jsx)(Y,{name:"redo",size:"lg"})})]})]}),j&&0!==j.length?Object(E.jsx)(d.b,{sx:{p:[2,3]},children:Object(E.jsxs)(d.b,{as:"table",sx:{mt:2,pl:[1,4],width:"100%",textAlign:"center",lineHeight:1.15},children:[Object(E.jsxs)("colgroup",{children:[Object(E.jsx)("col",{style:{width:"50px"}}),Object(E.jsx)("col",{}),Object(E.jsx)("col",{}),Object(E.jsx)("col",{}),Object(E.jsx)("col",{style:{width:Vi}})]}),Object(E.jsx)("thead",{children:Object(E.jsxs)("tr",{children:[Object(E.jsx)("th",{children:"Owner"}),Object(E.jsxs)("th",{children:[Object(E.jsx)(zi,{short:"Coll.",children:"Collateral"}),Object(E.jsx)(d.b,{sx:{fontSize:[0,1],fontWeight:"body",opacity:.5},children:"ETH"})]}),Object(E.jsxs)("th",{children:["Debt",Object(E.jsx)(d.b,{sx:{fontSize:[0,1],fontWeight:"body",opacity:.5},children:Ne})]}),Object(E.jsxs)("th",{children:["Coll.",Object(E.jsx)("br",{}),"Ratio"]}),Object(E.jsx)("th",{})]})}),Object(E.jsx)("tbody",{children:j.map((function(e){return!e.isEmpty&&Object(E.jsxs)("tr",{children:[Object(E.jsxs)("td",{style:{display:"flex",alignItems:"center",height:Vi},children:[Object(E.jsx)(ne,{message:e.ownerAddress,placement:"top",children:Object(E.jsxs)(d.t,{variant:"address",sx:{width:["73px","unset"],overflow:"hidden",position:"relative"},children:[qe(e.ownerAddress),Object(E.jsx)(d.b,{sx:{display:["block","none"],position:"absolute",top:0,right:0,width:"50px",height:"100%",background:"linear-gradient(90deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)"}})]})}),Object(E.jsx)(Hi.a,{text:e.ownerAddress,onCopy:function(){return B(e.ownerAddress)},children:Object(E.jsx)(d.c,{variant:"icon",sx:{width:"24px",height:"24px"},children:Object(E.jsx)(Y,{name:P===e.ownerAddress?"clipboard-check":"clipboard",size:"sm"})})})]}),Object(E.jsx)("td",{children:Object(E.jsx)(zi,{short:e.collateral.shorten(),children:e.collateral.prettify(4)})}),Object(E.jsx)("td",{children:Object(E.jsx)(zi,{short:e.debt.shorten(),children:e.debt.prettify()})}),Object(E.jsx)("td",{children:(t=e.collateralRatio(l),Object(E.jsx)(d.t,{color:t.gt(Be.CRITICAL_COLLATERAL_RATIO)?"success":t.gt(1.2)?"warning":"danger",children:new Be.Percent(t).prettify()}))}),Object(E.jsx)("td",{children:Object(E.jsx)(me,{id:"liquidate-".concat(e.ownerAddress),tooltip:"Liquidate",requires:[s?Ki(e,l,o,u):Ji(e,l)],send:c.send.liquidate.bind(c.send,e.ownerAddress),children:Object(E.jsx)(d.c,{variant:"dangerIcon",children:Object(E.jsx)(Y,{name:"trash"})})})})]},e.ownerAddress);var t}))})]})}):Object(E.jsx)(d.b,{sx:{p:[2,3]},children:Object(E.jsx)(d.b,{sx:{p:4,fontSize:3,textAlign:"center"},children:j?"There are no Troves yet":"Loading..."})}),b&&Object(E.jsx)(En,{})]})},er=function(){return Object(E.jsxs)(d.g,{variant:"columns",children:[Object(E.jsxs)(d.g,{variant:"left",children:[Object(E.jsx)(d.d,{children:Object(E.jsx)(d.b,{sx:{p:[2,3]},children:Object(E.jsxs)(sa,{title:"Bot functionality",children:[Object(E.jsx)(d.p,{children:"Liquidation is expected to be carried out by bots."}),Object(E.jsx)(d.p,{children:"Early on you may be able to manually liquidate Troves, but as the system matures this will become less likely."})]})})}),Object(E.jsx)(Wi,{})]}),Object(E.jsx)(d.g,{variant:"right",children:Object(E.jsx)(un,{})}),Object(E.jsx)(Xi,{pageSize:10})]})},tr=n(635),nr=n(642),ar=n(178),ir=n(370),rr=n(360),sr=["Pending","Reserve","Permanent"],or=["#7a77c2","#6d6aad","#5f5c97"],ur=Math.PI/180,lr=function(){var e=Ct().protocolInfo;if(void 0===e)return null;var t=[],n=[parseFloat(e.treasury.pending.toString()),parseFloat(e.treasury.reserve.toString()),parseFloat(e.treasury.permanent.toString())];return e.treasury.pending!==Be.Decimal.ZERO&&t.push({name:"Pending",value:n[0]}),e.treasury.reserve!==Be.Decimal.ZERO&&t.push({name:"Reserve",value:n[1]}),e.treasury.permanent!==Be.Decimal.ZERO&&t.push({name:"Permanent",value:n[2]}),Object(E.jsx)(tr.a,{width:"100%",height:348,children:Object(E.jsxs)(nr.a,{children:[Object(E.jsx)(ar.a,{isAnimationActive:!1}),Object(E.jsx)(ir.a,{data:t,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:110,label:function(e){var t=e.cx,a=e.cy,i=e.midAngle,r=e.innerRadius,s=e.outerRadius,o=e.index,u=r+.5*(s-r),l=t+u*Math.cos(-i*ur),c=a+u*Math.sin(-i*ur);return Object(E.jsx)("text",{fontSize:15,fontWeight:300,x:1.078*l,y:.985*c,fill:"white",textAnchor:"middle",dominantBaseline:"central",children:n[o]>0?sr[o]:""})},isAnimationActive:!1,strokeOpacity:"0.55",children:t.map((function(e,t){return Object(E.jsx)(rr.a,{fill:or[t]},"label-".concat(t))}))}),Object(E.jsx)(ir.a,{data:t,dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",innerRadius:110,outerRadius:132,isAnimationActive:!1,strokeOpacity:"0.55",label:function(e){var t=e.x,a=e.y,i=e.percent,r=e.index;return n[r]>0?Object(E.jsxs)("g",{children:[Object(E.jsx)("circle",{textAnchor:"middle",cx:t<131?1.3*t:.96*t,cy:a<131?1.3*a:.99*a,r:19,fill:or[r]}),Object(E.jsx)("text",{x:t<131?1.3*t:.96*t,y:a<131?1.3*a:.99*a,fontSize:15.5,fill:"white",fontWeight:300,textAnchor:"middle",dominantBaseline:"central",children:"".concat((100*i).toFixed(0),"%")})]}):null},labelLine:!1,children:t.map((function(e,t){return Object(E.jsx)(rr.a,{fill:or[t]},"share-".concat(t))}))})]})})};const cr=({value:e,unit:t})=>Object(E.jsxs)(E.Fragment,{children:[e,"\xa0",t&&Object(E.jsx)(d.t,{sx:{fontWeight:"light",fontSize:1},children:t})]}),dr=()=>{const{stats:e,protocolInfo:t}=Ct();return void 0===e||void 0===t?null:Object(E.jsxs)(d.d,{variant:"info",children:[Object(E.jsx)(d.j,{sx:{fontweight:"bold"},children:"LUSD bonds"}),Object(E.jsx)(d.j,{as:"h2",sx:{mt:3,fontWeight:"body"},children:"bLUSD"}),Object(E.jsx)(Qt,{lexicon:yt,children:Object(E.jsx)(cr,{value:t.marketPrice.prettify(3),unit:"LUSD"})}),Object(E.jsx)(Qt,{lexicon:bt,children:Object(E.jsx)(cr,{value:t.fairPrice.lower.eq(Be.Decimal.INFINITY)?"N/A":`${t.fairPrice.lower.prettify(2)} - ${t.fairPrice.upper.prettify(2)}`,unit:"LUSD"})}),Object(E.jsx)(Qt,{lexicon:Tt,children:Object(E.jsx)(cr,{value:t.floorPriceWithoutPendingHarvests.prettify(4),unit:"LUSD"})}),Object(E.jsx)(Qt,{lexicon:xt,children:Object(E.jsx)(cr,{value:t.windDownPrice.prettify(4),unit:"LUSD"})}),Object(E.jsx)(Qt,{lexicon:gt,children:Object(E.jsx)(cr,{value:t.bLusdApr&&t.bLusdSupply.gt(0)?t.bLusdApr.mul(100).prettify(2):"N/A",unit:"%"})}),Object(E.jsx)(Qt,{lexicon:Ot,children:Object(E.jsx)(cr,{value:void 0!==(null===t||void 0===t?void 0:t.bLusdLpApr)?t.bLusdLpApr.prettify(2):"N/A",unit:"%"})}),Object(E.jsx)(Qt,{lexicon:wt,children:Object(E.jsx)(cr,{value:t.yieldAmplification&&t.bLusdSupply.gt(0)?t.yieldAmplification.prettify(2):"N/A",unit:"x"})}),Object(E.jsx)(Qt,{lexicon:jt,children:Object(E.jsx)(cr,{value:t.bLusdSupply.shorten(),unit:"bLUSD"})}),Object(E.jsx)(d.j,{as:"h2",sx:{mt:3,fontWeight:"body"},children:"Statistics"}),Object(E.jsx)(Qt,{lexicon:ft,children:Object(E.jsx)(cr,{value:e.pendingBonds.prettify(0)})}),Object(E.jsx)(Qt,{lexicon:ht,children:Object(E.jsx)(cr,{value:e.cancelledBonds.prettify(0)})}),Object(E.jsx)(Qt,{lexicon:vt,children:Object(E.jsx)(cr,{value:e.claimedBonds.prettify(0)})}),Object(E.jsx)(Qt,{lexicon:mt,children:Object(E.jsx)(cr,{value:e.totalBonds.prettify(0)})}),Object(E.jsx)(d.j,{as:"h2",sx:{mt:3,fontWeight:"body"},children:"Treasury"}),Object(E.jsx)(Qt,{lexicon:St,children:Object(E.jsx)(cr,{value:t.treasury.pending.shorten(),unit:"LUSD"})}),Object(E.jsx)(Qt,{lexicon:kt,children:Object(E.jsx)(cr,{value:t.treasury.reserve.shorten(),unit:"LUSD"})}),Object(E.jsx)(Qt,{lexicon:Dt,children:Object(E.jsx)(cr,{value:t.treasury.permanent.shorten(),unit:"LUSD"})}),Object(E.jsx)(Qt,{lexicon:_t,children:Object(E.jsx)(cr,{value:t.treasury.total.shorten(),unit:"LUSD"})}),Object(E.jsx)(d.h,{mt:3,children:Object(E.jsx)(lr,{})})]})};var pr,yr=n(363),br=n(73),mr=Object(br.c)(pr||(pr=Object(yr.a)(["\n  from {\n    left: -25%;\n  }\n  to {\n    left: 100%;\n  }\n"]))),fr=function(e){var t=e.style;return Object(E.jsxs)(d.h,{sx:Object(x.a)({position:"relative",backgroundColor:"rgb(225, 230, 230)",overflow:"hidden",borderRadius:"5px",height:"100%",width:"100%"},t),children:[Object(E.jsx)(d.h,{sx:{position:"absolute",left:"-25%",height:"100%",width:"45%",backgroundImage:"linear-gradient(to left, rgba(251,251,251, .05), rgba(251,251,251, .3), rgba(251,251,251, .6), rgba(251,251,251, .3), rgba(251,251,251, .05))",animation:"".concat(mr," 1s infinite")}}),"\xa0"]})};const hr="#d9d9d9",vr={height:"12px",width:"12px",mx:"-1px",borderRadius:"50%",border:"2px solid",borderColor:hr,background:"none",zIndex:1},jr={backgroundColor:"gray",borderColor:"gray"},Tr={width:"0px",mx:"-2px",opacity:0},xr={height:4,flexGrow:1,border:0,backgroundColor:hr,margin:0,padding:0},gr={backgroundColor:"gray",opacity:1},Or=(e,t)=>({background:`linear-gradient(to right, ${e}, ${t})`}),wr=({style:e})=>Object(E.jsx)(d.b,{sx:{...vr,...e}}),_r=({style:e})=>Object(E.jsx)(d.b,{sx:{...xr,...e}}),Sr=new Date(864e13),kr=({style:e,children:t})=>Object(E.jsx)(d.h,{sx:{fontWeight:200,fontSize:"0.98em",alignSelf:"center",justifyContent:"center",flexGrow:1,...e},children:t}),Dr=({children:e,description:t,style:n})=>Object(E.jsxs)(d.h,{sx:{fontWeight:300,alignSelf:"center",alignContent:"center",alignItems:"center",...n},children:[e,"\xa0",t?Object(E.jsx)(Gt,{size:"xs",tooltip:t}):null]}),Lr=({label:e})=>Object(E.jsxs)(d.h,{sx:{flexDirection:"column",flexGrow:1},children:[Object(E.jsx)(d.h,{sx:{justifyContent:"center"},children:Object(E.jsx)(fr,{style:{mx:"20%"}})}),Object(E.jsxs)(d.h,{sx:{my:1,alignItems:"center"},children:[Object(E.jsx)(_r,{style:xr}),Object(E.jsx)(wr,{style:vr}),Object(E.jsx)(_r,{style:xr})]}),Object(E.jsx)(d.h,{sx:{flexDirection:"column"},children:e})]}),Er=({isFirst:e,isLast:t,isPast:n,date:a,label:i,isEndOfLife:r,isMilestone:s=!0,isLoading:o})=>{if(o)return Object(E.jsx)(Lr,{label:i});const u=a.toLocaleDateString()===(new Date).toLocaleDateString(),l=a.toDateString()===Sr.toDateString();let c={...vr},p={...xr},y={...xr};(n||r)&&(c={...jr},p={...gr}),n&&(y={...gr}),s||(c={...Tr}),e&&(p={...p,...Or("white","gray")}),t&&(y={...y,...Or(hr,"white")});const b=u&&r?"Now":l?"Unknown":a.toLocaleDateString("en-GB",{month:"short",day:"2-digit",year:"numeric"});return Object(E.jsxs)(d.h,{sx:{flexDirection:"column",flexGrow:1},children:[Object(E.jsx)(d.h,{sx:{justifyContent:"center"},children:Object(E.jsx)(d.t,{sx:{fontWeight:400,alignSelf:"center"},children:b})}),Object(E.jsxs)(d.h,{sx:{my:1,alignItems:"center"},children:[Object(E.jsx)(_r,{style:p}),Object(E.jsx)(wr,{style:c}),Object(E.jsx)(_r,{style:y})]}),Object(E.jsx)(d.h,{sx:{flexDirection:"column"},children:i})]})},Ar=({events:e,style:t})=>{const n=[...e].sort(((e,t)=>e.date.getTime()===t.date.getTime()?Number(e.isEndOfLife)-Number(t.isEndOfLife):e.date.getTime()>t.date.getTime()?1:-1)),a=n.findIndex((e=>e.isEndOfLife));return Object(E.jsx)(d.h,{sx:{flexGrow:1,...t},children:n.map(((e,t)=>Object(E.jsx)(Er,{isFirst:0===t,isLast:t===n.length-1,isPast:t<a,date:e.date,label:e.label,isEndOfLife:e.isEndOfLife,isMilestone:e.isMilestone,isLoading:e.isLoading},t)))})},Cr=({lexicon:e,value:t,type:n,style:a})=>Object(E.jsxs)(d.h,{sx:{flexDirection:"column",...a},children:[Object(E.jsxs)(d.h,{as:"h4",sx:{fontWeight:"300",alignItems:"baseline",justifyContent:"center"},children:[e.term," ",Object(E.jsx)(Gt,{size:"xs",tooltip:e.description,link:e.link})]}),Object(E.jsxs)(d.t,{as:"h3",sx:{display:"flex",justifyContent:"center"},children:[t?Object(E.jsx)(d.t,{sx:{fontWeight:"400"},children:t}):Object(E.jsx)(fr,{style:{mx:"20%"}}),"\xa0",t&&Object(E.jsx)(d.t,{sx:{fontWeight:"light",opacity:.8},children:n})]})]});var Ir=function(e){var t=e.bondId,n=e.disabled,a=void 0!==n&&n,i=Ct(),r=i.dispatchEvent,s=i.isBootstrapPeriodActive,o=a?"auto":"url(\"data:image/svg+xml;utf8, <svg xmlns='http://www.w3.org/2000/svg' width='32' height='32'  style='font-size: 24px'><text y='20'>\ud83d\udc14</text></svg>\"), auto";return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(d.c,{disabled:a,variant:"outline",sx:{height:"44px"},style:{cursor:o},onClick:function(){r("CANCEL_BOND_PRESSED",{bondId:t})},children:dt.term}),s&&Object(E.jsx)(ee.a,{interactive:!0,placement:"right",content:"Bonds can be claimed after the bootstrap period is complete.",maxWidth:"268px",children:Object(E.jsx)("span",{children:Object(E.jsx)(d.c,{disabled:!0,variant:"outline",sx:{height:"44px"},children:pt.term})})}),!s&&Object(E.jsx)(d.c,{disabled:a,variant:"outline",sx:{height:"44px"},style:{cursor:a?"auto":o},onClick:function(){r("CLAIM_BOND_PRESSED",{bondId:t})},children:pt.term})]})};const Rr={IDLE:{CREATE_BOND_PRESSED:"CREATING",CANCEL_BOND_PRESSED:"CANCELLING",CLAIM_BOND_PRESSED:"CLAIMING",SWAP_PRESSED:"SWAPPING",MANAGE_LIQUIDITY_PRESSED:"MANAGING_LIQUIDITY"},CREATING:{ABORT_PRESSED:"IDLE",CREATE_BOND_CONFIRMED:"IDLE",BACK_PRESSED:"IDLE",CONFIRM_PRESSED:"CREATING"},CLAIMING:{ABORT_PRESSED:"IDLE",BACK_PRESSED:"IDLE",CONFIRM_PRESSED:"CLAIMING",CLAIM_BOND_CONFIRMED:"IDLE"},CANCELLING:{ABORT_PRESSED:"IDLE",BACK_PRESSED:"IDLE",CONFIRM_PRESSED:"CANCELLING",CANCEL_BOND_CONFIRMED:"IDLE"},SWAPPING:{ABORT_PRESSED:"IDLE",BACK_PRESSED:"IDLE",APPROVE_PRESSED:"SWAPPING",CONFIRM_PRESSED:"SWAPPING",SWAP_CONFIRMED:"IDLE"},MANAGING_LIQUIDITY:{ABORT_PRESSED:"IDLE",BACK_PRESSED:"IDLE",APPROVE_PRESSED:"MANAGING_LIQUIDITY",CONFIRM_PRESSED:"MANAGING_LIQUIDITY",MANAGE_LIQUIDITY_CONFIRMED:"IDLE"}};let Mr;!function(e){e[e.BLUSD=0]="BLUSD",e[e.LUSD=1]="LUSD",e[e.BLUSD_LUSD_LP=2]="BLUSD_LUSD_LP"}(Mr||(Mr={}));const Pr=({bond:e,style:t})=>{var n,a;const i=(e=>{var t,n;const a=[{date:new Date(e.startTime),label:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Dr,{description:Ze.description,children:Ze.term}),Object(E.jsx)(kr,{children:"0.00 bLUSD"})]})},{date:new Date("PENDING"===e.status?Date.now():null!==(t=null===e||void 0===e?void 0:e.endTime)&&void 0!==t?t:0),label:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Dr,{description:"PENDING"===e.status?at.description:`The date you ${It[e.status].toLowerCase()} your bond.`,style:{fontWeight:500},children:"PENDING"===e.status?at.term:It[e.status]}),Object(E.jsx)(kr,{style:{fontWeight:400},children:"PENDING"===e.status?`${e.accrued.prettify(2)} bLUSD`:"CLAIMED"===e.status?`${null===e||void 0===e||null===(n=e.claimedAmount)||void 0===n?void 0:n.prettify(2)} bLUSD`:""})]}),isEndOfLife:!0,isMilestone:"PENDING"!==e.status}];var i,r,s,o;return"PENDING"===e.status&&(a.push({date:new Date(e.breakEvenTime),label:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Dr,{description:Je.description,children:Je.term}),Object(E.jsx)(kr,{children:Object(E.jsxs)(Si,{estimate:null===e||void 0===e?void 0:e.breakEvenAccrual,children:[null!==(i=null===e||void 0===e||null===(r=e.breakEvenAccrual)||void 0===r?void 0:r.prettify(2))&&void 0!==i?i:"?"," bLUSD"]})})]})}),a.push({date:new Date(e.rebondTime),label:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Dr,{description:Ke.description,children:Ke.term}),Object(E.jsx)(kr,{children:Object(E.jsxs)(Si,{estimate:null===e||void 0===e?void 0:e.rebondAccrual,children:[null!==(s=null===e||void 0===e||null===(o=e.rebondAccrual)||void 0===o?void 0:o.prettify(2))&&void 0!==s?s:"?"," bLUSD"]})})]})})),a})(e),{dispatchEvent:r}=Ct(),{BOND_NFT_ADDRESS:s}=Nt();return Object(E.jsxs)(d.h,{sx:{justifyContent:"center",alignItems:"center",gap:"12px",...t},children:[Object(E.jsx)(d.h,{sx:{flexShrink:0,boxShadow:2,borderRadius:8.5,border:1,borderColor:"muted",bg:"background"},children:Object(E.jsx)(d.k,{sx:{cursor:"pointer",minWidth:"150px"},src:e.tokenUri,alt:"NFT image representation of your bond.",onClick:()=>{window.open(`https://looksrare.org/collections/${s}/${e.id}`,"_blank")}})}),Object(E.jsx)(d.d,{mt:[0,0,0,0],sx:{borderRadius:12,flexGrow:1},children:Object(E.jsxs)(d.h,{p:[2,3],sx:{flexDirection:"column"},children:[Object(E.jsx)(Ar,{style:{fontSize:"14.5px",justifyContent:"center",pt:2,mx:3},events:i}),Object(E.jsxs)(d.h,{mt:4,pl:3,variant:"layout.actions",sx:{justifyContent:"flex-end"},children:[Object(E.jsxs)(d.h,{sx:{justifyContent:"flex-start",flexGrow:1,alignItems:"center",gap:"0 28px",fontSize:"14.5px"},children:[Object(E.jsx)(Cr,{lexicon:nt,value:e.deposit.prettify(2),type:"LUSD"}),"PENDING"===e.status&&Object(E.jsx)(Cr,{lexicon:it,value:null!==(n=null===e||void 0===e||null===(a=e.marketValue)||void 0===a?void 0:a.prettify(2))&&void 0!==n?n:"0",type:"LUSD"})]}),"PENDING"===e.status&&Object(E.jsx)(Ir,{bondId:e.id}),"PENDING"!==e.status&&"CLAIMED"===e.status&&Object(E.jsx)(d.c,{variant:"outline",sx:{height:"44px"},onClick:()=>{r("SWAP_PRESSED",{inputToken:Mr.BLUSD})},children:"Sell bLUSD"})]})]})})]})},Br=({bond:e,style:t})=>{const n=(e=>[{date:new Date(e.startTime),label:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Dr,{description:"bLUSD accrual starts off at 0 and increases over time.",children:Ze.term}),Object(E.jsx)(kr,{children:"0.00 bLUSD"})]})},{date:new Date(Date.now()),label:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Dr,{description:at.description,style:{fontWeight:500},children:at.term}),Object(E.jsx)(kr,{style:{fontWeight:400}})]}),isEndOfLife:!0},{date:Sr,label:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Dr,{description:"How many bLUSD are required to break-even at the current market price.",children:Je.term}),Object(E.jsx)(kr,{style:{fontWeight:400}})]}),isLoading:!0},{date:Sr,label:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Dr,{description:"How many bLUSD are recommended before claiming the bond, selling the bLUSD for LUSD, and then opening another bond.",children:Ke.term}),Object(E.jsx)(kr,{style:{fontWeight:400}})]}),isLoading:!0}])(e);return Object(E.jsxs)(d.h,{sx:{justifyContent:"center",alignItems:"center",gap:"12px",...t},children:[Object(E.jsx)(d.h,{sx:{width:150,height:210},children:Object(E.jsx)(fr,{})}),Object(E.jsx)(d.d,{mt:[0,0,0,0],sx:{borderRadius:12,flexGrow:1},children:Object(E.jsxs)(d.h,{p:[2,3],sx:{flexDirection:"column"},children:[Object(E.jsx)(Ar,{style:{fontSize:"14.5px",justifyContent:"center",pt:2,mx:3},events:n}),Object(E.jsxs)(d.h,{mt:4,variant:"layout.actions",sx:{justifyContent:"flex-end"},children:[Object(E.jsxs)(d.h,{sx:{justifyContent:"flex-start",flexGrow:1,alignItems:"center",pl:4,gap:"0 28px",fontSize:"14.5px"},children:[Object(E.jsx)(Cr,{lexicon:nt,value:e.deposit.prettify(2),type:"LUSD"}),Object(E.jsx)(Cr,{lexicon:it,type:"LUSD"})]}),Object(E.jsx)(Ir,{bondId:e.id,disabled:!0})]})]})})]})},Ur={pending:"PENDING",claimed:"CLAIMED",cancelled:"CANCELLED"},Nr=()=>{const{bonds:e,optimisticBond:t}=Ct(),{bondFilter:n}=Object(Me.g)();if(void 0===e)return null;const a=void 0!==t&&("all"===n||"pending"===n),i="all"===n?e:((e,t)=>e.filter((e=>e.status===Ur[t])))(e,n);return Object(E.jsxs)(E.Fragment,{children:[a&&Object(E.jsx)(Br,{bond:t,style:{mt:"16px"}}),i.map(((e,t)=>{const n={mt:0===t&&!a?"16px":"32px"};return Object(E.jsx)(Pr,{bond:e,style:n},t)})),!a&&0===i.length&&Object(E.jsx)(d.b,{mt:2,children:Object(E.jsxs)(jn,{children:["You don't have any ","all"!==n?n:null," bonds"]})})]})},Fr=()=>{const{bonds:e}=Ct(),{url:t,path:n}=Object(Me.h)();return Object(E.jsxs)(E.Fragment,{children:[e&&Object(E.jsxs)(d.h,{as:"nav",mt:2,children:[Object(E.jsx)(yn,{to:`${t}/all`,p:2,children:"All"}),Object(E.jsx)(yn,{to:`${t}/pending`,p:2,children:"Pending"}),Object(E.jsx)(yn,{to:`${t}/claimed`,p:2,children:"Claimed"}),Object(E.jsx)(yn,{to:`${t}/cancelled`,p:2,children:"Cancelled"})]}),Object(E.jsxs)(Me.d,{children:[Object(E.jsx)(Me.b,{exact:!0,path:n,children:Object(E.jsx)(Me.a,{to:`${n}/pending`})}),Object(E.jsx)(Me.b,{path:`${n}/:bondFilter`,children:Object(E.jsx)(Nr,{})})]})]})},qr=()=>{const{liquity:e}=R(),{LUSD_OVERRIDE_ADDRESS:t}=Nt(),{dispatchEvent:n,bonds:a,getLusdFromFaucet:r,lusdBalance:s,hasLoaded:o}=Ct(),[u,l]=Object(i.useState)();if(Object(i.useEffect)((()=>{(async()=>{if(void 0===e.connection.signer||void 0!==u)return;const t=await e.connection.signer.getChainId();l(t)})()}),[u,e.connection.signer]),!o)return null;const c=void 0!==a&&a.length>0,p=null!==t&&(null===s||void 0===s?void 0:s.eq(0));return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(d.h,{variant:"layout.actions",sx:{mt:4,mb:3},children:[Object(E.jsx)(d.c,{variant:"outline",onClick:()=>n("MANAGE_LIQUIDITY_PRESSED"),children:"Manage liquidity"}),Object(E.jsx)(d.c,{variant:"outline",onClick:()=>n("SWAP_PRESSED",{inputToken:Mr.LUSD}),children:"Buy bLUSD"}),Object(E.jsx)(d.c,{variant:"outline",onClick:()=>n("SWAP_PRESSED",{inputToken:Mr.BLUSD}),children:"Sell bLUSD"}),p&&Object(E.jsx)(d.c,{variant:c?"outline":"primary",onClick:()=>r(),children:"Get 10k LUSD"}),c&&Object(E.jsx)(d.c,{variant:"primary",onClick:()=>n("CREATE_BOND_PRESSED"),children:"Create another bond"})]}),!c&&Object(E.jsxs)(d.d,{children:[Object(E.jsx)(d.j,{children:Object(E.jsxs)(d.h,{children:[Ge.term,Object(E.jsx)(Gt,{placement:"left",size:"xs",tooltip:Object(E.jsx)(d.d,{variant:"tooltip",children:Ge.description})})]})}),Object(E.jsxs)(d.b,{sx:{p:[2,3]},children:[Object(E.jsx)(_i,{}),Object(E.jsx)(d.h,{variant:"layout.actions",mt:4,children:Object(E.jsx)(d.c,{variant:"primary",onClick:()=>n("CREATE_BOND_PRESSED"),children:"Create bond"})})]})]}),c&&Object(E.jsx)(Fr,{})]})};var Yr=function(){var e=Ct(),t=e.dispatchEvent,n=e.selectedBond,a="PENDING"===e.statuses.CANCEL;return void 0===n?null:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(jn,{children:["You will receive your bonded"," ",Object(E.jsxs)(d.t,{sx:{fontWeight:"bold"},children:[n.deposit.prettify(2)," LUSD"]})," back and forgo"," ",Object(E.jsxs)(d.t,{sx:{fontWeight:"bold"},children:[n.accrued.shorten()," bLUSD"]})]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:function(){t("BACK_PRESSED")},disabled:a,children:"Back"}),Object(E.jsxs)(d.c,{variant:"primary",onClick:function(){t("CONFIRM_PRESSED")},disabled:a,children:[!a&&Object(E.jsx)(E.Fragment,{children:"Confirm"}),a&&Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}})]})]})]})},Gr=function(){var e=Ct(),t=e.dispatchEvent,n=e.selectedBond,a="PENDING"===e.statuses.CLAIM;return void 0===n?null:Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(jn,{children:["You will receive ",Object(E.jsxs)(d.t,{sx:{fontWeight:"bold"},children:[n.accrued.prettify(2)," bLUSD"]})," ","and forgo your bonded"," ",Object(E.jsxs)(d.t,{sx:{fontWeight:"bold"},children:[n.deposit.prettify(2)," LUSD"]})]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:function(){t("BACK_PRESSED")},disabled:a,children:"Back"}),Object(E.jsxs)(d.c,{variant:"primary",onClick:function(){t("CONFIRM_PRESSED")},disabled:a,children:[!a&&Object(E.jsx)(E.Fragment,{children:"Confirm"}),a&&Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}})]})]})]})};const Qr={content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)",maxWidth:"620px",width:"580px",maxHeight:"94vh",overflow:"visible"},overlay:{zIndex:2}},Wr=({children:e,onDismiss:t,style:n})=>Object(E.jsx)(l.a,{isOpen:!0,onRequestClose:()=>t(),style:{...Qr,content:{...Qr.content,...n}},children:Object(E.jsx)("div",{style:{position:"static",overflowY:"scroll",maxHeight:"90vh"},children:e})});var Zr=n(364);const Hr=e=>1e3*e,zr=e=>parseFloat(e.toString()),Vr=e=>e.toNumber(),Jr=e=>Be.Decimal.fromBigNumberString(e.toHexString()),Kr=e=>100*e,$r=e=>e/60/60/24,Xr=(e,t,n)=>{const a=e.mul(n);return parseFloat(a.toString())-parseFloat(t.toString())},es=(e,t,n)=>{const a=t.mul(Be.Decimal.ONE.sub(n));return a.lte(Be.Decimal.ONE)?Be.Decimal.INFINITY:e.div(a.sub(Be.Decimal.ONE))},ts=(e,t,n,a=Be.Decimal.ZERO)=>{const i=t.sub(a);return Be.Decimal.ONE.div(e).mul(i.div(i.add(n)))},ns=(e,t,n)=>{const a=Be.Decimal.ONE.sub(n).mul(t);if(a.lte(Be.Decimal.ONE))return Be.Decimal.INFINITY;const i=Be.Decimal.from(Math.sqrt(parseFloat(a.toString()))),r=Be.Decimal.ONE.add(i),s=a.sub(Be.Decimal.ONE);return e.mul(r.div(s))},as=(e,t,n,a)=>{const i=$r(zr(e)),r=zr(((e,t)=>{const n=t.gt(e)?t.sub(e):Be.Decimal.ZERO,a=$r(parseFloat(n.toString()));return Be.Decimal.from(a)})(n,t)),s=zr(a)-i;if(s<r)return s;const o=Math.log(.99)*zr(a),u=.99**(i+r);return-(Object(Zr.lambertW0)(-o/u)+Math.log(.99)*(i+r))/Math.log(.99)},is=(e,t,n,a)=>{const i=as(e,t,n,a);return r=i,new Date(Math.round(Date.now()+(e=>60*e*60*24*1e3)(r)));var r},rs=()=>{const{dispatchEvent:e,view:t,selectedBond:n}=Ct(),a=()=>{e("ABORT_PRESSED")};if(void 0===n)return null;let i;switch(t){case"CANCELLING":i=Object(ki.b)(Yr,{});break;case"CLAIMING":i=Object(ki.b)(Gr,{})}const r=[{date:new Date(n.startTime),label:Object(ki.c)(ki.a,{children:[Object(ki.b)(Dr,{description:Ze.description,children:Ze.term}),Object(ki.b)(kr,{children:"0 bLUSD"})]})},{date:new Date(n.breakEvenTime),label:Object(ki.c)(ki.a,{children:[Object(ki.b)(Dr,{description:Je.description,children:Je.term}),Object(ki.b)(kr,{children:Object(ki.c)(Si,{estimate:n.breakEvenAccrual,children:[n.breakEvenAccrual.prettify(2)," bLUSD"]})})]})},{date:new Date(n.rebondTime),label:Object(ki.c)(ki.a,{children:[Object(ki.b)(Dr,{description:Ke.description,children:Ke.term}),Object(ki.b)(kr,{children:Object(ki.c)(Si,{estimate:n.rebondAccrual,children:[n.rebondAccrual.prettify(2)," bLUSD"]})})]})},{date:new Date(Date.now()),label:Object(ki.c)(ki.a,{children:[Object(ki.b)(Dr,{description:at.description,style:{fontWeight:500},children:at.term}),Object(ki.b)(kr,{style:{fontWeight:400},children:`${n.accrued.prettify(2)} bLUSD`})]}),isEndOfLife:!0,isMilestone:!1}];return Object(ki.c)(Wr,{onDismiss:a,children:[Object(ki.c)(d.j,{as:"h2",sx:{pt:2,pb:3,px:2},children:[Object(ki.b)(d.h,{sx:{justifyContent:"center"},children:"CANCELLING"===t?dt.term:pt.term}),Object(ki.b)(d.f,{onClick:a,sx:{position:"absolute",right:"24px",top:"24px"}})]}),Object(ki.b)(d.h,{my:4,mx:2,sx:{justifyContent:"center"},children:Object(ki.b)(Ar,{events:r})}),Object(ki.c)(d.i,{gap:"12px",columns:3,sx:{my:4,justifyItems:"center"},children:[Object(ki.b)(Cr,{lexicon:nt,value:n.deposit.prettify(2),type:"LUSD"}),Object(ki.b)(Cr,{lexicon:it,value:n.marketValue.prettify(2),type:"LUSD"}),"CLAIMING"===t&&Object(ki.b)(Cr,{lexicon:st,value:n.claimNowReturn.toFixed(2),type:"LUSD"})]}),Object(ki.c)("details",{children:[Object(ki.b)("summary",{sx:{pl:2,mt:4,cursor:"pointer"},children:"Rebond estimations"}),Object(ki.c)(d.i,{gap:"20px",columns:3,sx:{my:2,justifyItems:"center"},children:[Object(ki.b)(Cr,{lexicon:$e,value:n.rebondAccrual.eq(Be.Decimal.INFINITY)?"N/A":n.rebondReturn.toFixed(2),type:"LUSD"}),Object(ki.b)(Cr,{lexicon:Xe,value:n.rebondAccrual.eq(Be.Decimal.INFINITY)?"N/A":Kr(n.rebondRoi).toFixed(2)+"%"}),Object(ki.b)(Cr,{lexicon:et,value:n.rebondAccrual.eq(Be.Decimal.INFINITY)?"N/A":Kr(n.rebondApr).toFixed(2)+"%"})]})]}),Object(ki.c)(d.b,{mt:3,children:["CLAIMING"===t&&n.claimNowReturn<0&&Object(ki.b)(ca,{children:"You are claiming a bond which currently has a negative return"}),"CANCELLING"===t&&n.accrued.gte(n.breakEvenAccrual)&&Object(ki.b)(ca,{children:"Your are cancelling a bond which has accrued a positive return"})]}),i]})};var ss,os,us=Object(i.createContext)(null),ls=function(){var e=Object(i.useContext)(us);return null===e?{next:null,back:null,go:null}:e},cs=function(e){var t=e.children,n=e.onCancel,a=e.onFinish,r=Object(i.useState)(0),s=Object(m.a)(r,2),o=s[0],u=s[1],l=Object(i.useState)([]),c=Object(m.a)(l,2),d=c[0],p=c[1],y={next:function(){if(o===t.length-1&&a)return a();var e=Math.min(t.length-1,o+1);u(e),p(d.concat(o))},back:function(){var e;if(0===o&&n)return n();var t=null!==(e=d.slice(d.length-1)[0])&&void 0!==e?e:0;u(t),p(d.slice(0,d.length-1))},go:function(e){var n=t.findIndex((function(t){return t.type.name===e.name}));-1!==n&&(u(n),p(d.concat(o)))}};return Object(E.jsx)(us.Provider,{value:y,children:t[o]})},ds=function(e){var t=e.children,n=e.onFinish,a=e.onCancel;return Object(E.jsx)(cs,{onFinish:n,onCancel:a,children:t})},ps=function(e){var t=e.children,n=e.onDismiss,a=e.style;return Object(E.jsx)(Wr,{onDismiss:function(){return n()},style:a,children:Object(E.jsx)(ds,{onCancel:n,children:t})})},ys=n(31),bs=n(102),ms=n(88),fs=n(365),hs=n(118);const vs=["NON_EXISTENT","PENDING","CANCELLED","CLAIMED"],js="0xEd279fDD11cA84bEef15AF5D39BB4d4bEE23F0cA",Ts="0x5f98805A4E8be255a32880FDeC7F6728C6568bA0",xs="0x81C46fECa27B31F3ADC2b91eE4be9717d1cd3DD7",gs={[Ts]:"LUSD","0xD533a949740bb3306d119CC777fa900bA034cd52":"CRV"},Os=ys.a.from(5e4),ws=[null!==(ss=Rt.BLUSD_TOKEN_ADDRESS)&&void 0!==ss?ss:"",null!==(os=Rt.BLUSD_AMM_ADDRESS)&&void 0!==os?os:"",js,js,Ts],_s=[...ws].reverse(),Ss=e=>[[...e===Mr.BLUSD?ws:_s,bs.constants.AddressZero,bs.constants.AddressZero,bs.constants.AddressZero,bs.constants.AddressZero],[e===Mr.BLUSD?[0,1,3]:[0,0,6],e===Mr.BLUSD?[0,0,9]:[1,0,3],[0,0,0],[0,0,0]]];let ks={lusd3Crv:void 0,stabilityPool:void 0,bLusdLusd3Crv:void 0};const Ds=async()=>{try{var e,t,n,a;const i=await(await window.fetch("https://api.curve.fi/api/getPools/ethereum/factory-crypto")).json(),r=await await(await window.fetch("https://api.curve.fi/api/getFactoryAPYs?version=crypto")).json(),s=null===(e=i.data)||void 0===e?void 0:e.poolData.find((e=>"factory-crypto-134"===e.id)),o=null===s||void 0===s?void 0:s.gaugeRewards.reduce(((e,t)=>e+t.apy),0),u=null===r||void 0===r||null===(t=r.data)||void 0===t||null===(n=t.poolDetails)||void 0===n||null===(a=n.find((e=>"0x74ED5d42203806c8CDCf2F04Ca5F60DC777b901c"===e.poolAddress)))||void 0===a?void 0:a.apy;if(void 0===o&&void 0===u)return;const l=(null!==o&&void 0!==o?o:0)+(null!==u&&void 0!==u?u:0);ks.bLusdLusd3Crv=Be.Decimal.from(l)}catch(i){console.log("cacheCurveLpApy failed"),console.error(i)}},Ls=async()=>{try{var e,t;if(void 0!==ks.lusd3Crv)return;const n=await(await window.fetch("https://api.yearn.finance/v1/chains/1/vaults/all")).json(),a=n.find((e=>{var t;return(null===e||void 0===e||null===(t=e.token)||void 0===t?void 0:t.address)===js})),i=n.find((e=>{var t;return(null===e||void 0===e||null===(t=e.token)||void 0===t?void 0:t.address)===Ts}));if(void 0===(null===a||void 0===a||null===(e=a.apy)||void 0===e?void 0:e.net_apy)||void 0===(null===i||void 0===i||null===(t=i.apy)||void 0===t?void 0:t.net_apy))return;ks.lusd3Crv=Be.Decimal.from(a.apy.net_apy),ks.stabilityPool=Be.Decimal.from(i.apy.net_apy)}catch(n){console.log("cacheYearnVaultApys failed"),console.error(n)}},Es=(e,t,n,a)=>{const i=e.div(t),r=i.mul(Be.Decimal.ONE.sub(n)).gt(Be.Decimal.ONE),s=es(a,i,n),o=ns(a,i,n);return{marketPricePremium:i,hasMarketPremium:r,breakEvenAccrualFactor:ts(t,s,a),rebondAccrualFactor:ts(t,o,a),breakEvenPeriodInDays:s,rebondPeriodInDays:o}},As=Be.Decimal.ONE.div(1e3),Cs=async e=>{try{return(await Ps(Mr.BLUSD,As,e)).div(As)}catch(t){console.error("bLUSD AMM get_dy() price failed, probably has no liquidity?",t)}return Be.Decimal.ONE.div(Jr(await e.price_oracle()))},Is=async e=>{try{return(await Bs(Mr.BLUSD,As,e)).div(As)}catch(i){console.error("getExpectedSwapOutputMainnet() failed, probably no liquidity?",i)}const t=new ms.Contract(js,["function calc_withdraw_one_coin(uint256 burn_amount, int128 i) external view returns (uint256)"],e.provider),[n,a]=await Promise.all([e.price_oracle().then(Jr),t.calc_withdraw_one_coin(As.hex,0).then(Jr)]);return a.div(As).div(n)},Rs=(e,t)=>new ms.Contract(e,["function approve(address spender, uint256 amount) returns (bool)","function allowance(address owner, address spender) view returns (uint256)","function balanceOf(address) view returns (uint256)","function totalSupply() view returns (uint256)"],t),Ms=e=>e===Mr.BLUSD?Mr.LUSD:Mr.BLUSD,Ps=async(e,t,n)=>Jr(await n.get_dy(e,Ms(e),t.hex)),Bs=async(e,t,n)=>{const a=await n.balances(0),i=Be.Decimal.from(1).div(1.29);if(a.eq(0))return t.div(i);const r=hs.CurveRegistrySwaps__factory.connect(xs,n.signer);return Jr(await r["get_exchange_multiple_amount(address[9],uint256[3][4],uint256)"](...Ss(e),t.hex))},Us={getAccountBonds:async(e,t,n,a)=>{try{const{marketPrice:i,alphaAccrualFactor:r,marketPricePremium:s,claimBondFee:o,floorPrice:u,controllerTargetAge:l,averageBondAge:c}=a,d=(await t.balanceOf(e)).toNumber(),p=Array.from(Array(d)).map(((n,a)=>t.tokenOfOwnerByIndex(e,a))),y=await Promise.all(p),b={deposits:y.map((e=>t.getBondAmount(e))),accrueds:y.map((e=>n.calcAccruedBLUSD(e))),startTimes:y.map((e=>t.getBondStartTime(e))),endTimes:y.map((e=>t.getBondEndTime(e))),statuses:y.map((e=>t.getBondStatus(e))),tokenUris:y.map((e=>t.tokenURI(e))),claimedAmounts:y.map((e=>t.getBondClaimedBLUSD(e)))},m=await Promise.all(b.deposits),f=await Promise.all(b.accrueds),h=await Promise.all(b.startTimes),v=await Promise.all(b.endTimes),j=await Promise.all(b.statuses),T=await Promise.all(b.tokenUris),x=await Promise.all(b.claimedAmounts);return y.reduce(((e,t,n)=>{const a=Vr(y[n]).toString(),d=Jr(m[n]),p=Jr(f[n]),b=Hr(Vr(h[n])),g=Hr(Vr(v[n])),O=vs[j[n]],w=(e=>{var t;const n=e.indexOf("base64,")+"base64,".length;if(-1===n)return"TODO:";const a=atob(e.slice(n)).replace('"background_color":',',"background_color":').replace(",,",",");return a?null===(t=JSON.parse(a))||void 0===t?void 0:t.image:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA3NTAgMTA1MCI+PHN0eWxlPiNjYi1lZ2ctNTUgLmNiLWVnZyBwYXRoIHthbmltYXRpb246IHNoYWtlIDNzIGluZmluaXRlIGVhc2Utb3V0O3RyYW5zZm9ybS1vcmlnaW46IDUwJTt9QGtleWZyYW1lcyBzaGFrZSB7MCUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfTY1JSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9NzAlIHsgdHJhbnNmb3JtOiByb3RhdGUoM2RlZyk7IH03NSUgeyB0cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTsgfTgwJSB7IHRyYW5zZm9ybTogcm90YXRlKC0zZGVnKTsgfTg1JSB7IHRyYW5zZm9ybTogcm90YXRlKDBkZWcpOyB9OTAlIHsgdHJhbnNmb3JtOiByb3RhdGUoM2RlZyk7IH0xMDAlIHsgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7IH19PC9zdHlsZT48ZGVmcz48bGluZWFyR3JhZGllbnQgaWQ9ImNiLWVnZy01NS1jYXJkLWRpYWdvbmFsLWdyYWRpZW50IiB5MT0iMTAwJSIgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPjxzdG9wIG9mZnNldD0iMCIgc3RvcC1jb2xvcj0iI2ZmZDIwMCIvPjxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI2ZmMDA4NyIvPjwvbGluZWFyR3JhZGllbnQ+PC9kZWZzPjxnIGlkPSJjYi1lZ2ctNTUiPjxyZWN0IGZpbGw9IiNjZDdmMzIiIHdpZHRoPSIxMDAlIiBoZWlnaHQ9IjEwMCUiIHJ4PSIzNy41Ii8+PHJlY3Qgc3R5bGU9ImZpbGw6IHVybCgjY2ItZWdnLTU1LWNhcmQtZGlhZ29uYWwtZ3JhZGllbnQpIiB4PSIzMCIgeT0iMzAiIHdpZHRoPSI2OTAiIGhlaWdodD0iOTkwIiByeD0iMzcuNSIvPjxlbGxpcHNlIGZpbGw9IiMwYTEwMmUiIGN4PSIzNzUiIGN5PSI1NjAuMjUiIHJ4PSI2MCIgcnk9IjExLjQiIC8+PGcgY2xhc3M9ImNiLWVnZyI+PHBhdGggZmlsbD0iI2NkN2YzMiIgZD0iTTI5My44NiA0NzguMTJjMCA0NS4zNiAzNi40IDgyLjEzIDgxLjI5IDgyLjEzczgxLjI5LTM2Ljc3IDgxLjI5LTgyLjEzUzQyMC4wNSAzNjUuODUgMzc1LjE1IDM2NS44NUMzMzIuNzQgMzY1Ljg1IDI5My44NiA0MzIuNzYgMjkzLjg2IDQ3OC4xMloiLz48cGF0aCBzdHlsZT0ibWl4LWJsZW5kLW1vZGU6IHNvZnQtbGlnaHQiIGZpbGw9IiNmZmYiIGQ9Ik0zMjguOTYgNDA5LjRjLTYgMTMuNTktNS40OCAyOS41MyAzLjI1IDM2LjExIDkuNzYgNy4zNSAyMy44OSA5IDM2Ljk4LTMuMTMgMTIuNTctMTEuNjYgMjMuNDgtNDMuOTQgMS4yNC01NS41QzM1OC4yNSAzODAuNTUgMzM1LjU5IDM5NC4zNSAzMjguOTYgNDA5LjRaIi8+PHBhdGggc3R5bGU9Im1peC1ibGVuZC1tb2RlOiBzb2Z0LWxpZ2h0IiBmaWxsPSIjMDAwIiBkPSJNNDE2LjE3IDM4NS4wMmMxMS45NCAyMC45MiAxOS4xNSA0NS4zNSAxOS4xNCA2NS41MiAwIDQ1LjM2LTM2LjQgODIuMTMtODEuMyA4Mi4xM2E4MC40NSA4MC40NSAwIDAgMS01Mi41Mi0xOS40NUMzMTQuNTIgNTQxLjAzIDM0Mi41NCA1NjAuMjcgMzc1IDU2MC4yN2M0NC45IDAgODEuMy0zNi43NyA4MS4zLTgyLjEzQzQ1Ni4zMSA0NDcuOTUgNDQwLjE4IDQwOC4yMiA0MTYuMTcgMzg1LjAyWiIvPjwvZz48dGV4dCBmaWxsPSIjZmZmIiBmb250LWZhbWlseT0iQXJpYWwgQmxhY2ssIEFyaWFsIiBmb250LXNpemU9IjcycHgiIGZvbnQtd2VpZ2h0PSI4MDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUwJSIgeT0iMTQlIj5MVVNEPC90ZXh0Pjx0ZXh0IGZpbGw9IiNmZmYiIGZvbnQtZmFtaWx5PSJBcmlhbCBCbGFjaywgQXJpYWwiIGZvbnQtc2l6ZT0iMzBweCIgZm9udC13ZWlnaHQ9IjgwMCIgdGV4dC1hbmNob3I9Im1pZGRsZSIgeD0iNTAlIiB5PSIxOSUiPklEOiA1NTwvdGV4dD48dGV4dCBmaWxsPSIjZmZmIiBmb250LWZhbWlseT0iQXJpYWwgQmxhY2ssIEFyaWFsIiBmb250LXNpemU9IjQwcHgiIGZvbnQtd2VpZ2h0PSI4MDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUwJSIgeT0iNzIlIj5CT05EIEFNT1VOVDwvdGV4dD48dGV4dCBmaWxsPSIjZmZmIiBmb250LWZhbWlseT0iQXJpYWwgQmxhY2ssIEFyaWFsIiBmb250LXNpemU9IjY0cHgiIGZvbnQtd2VpZ2h0PSI4MDAiIHRleHQtYW5jaG9yPSJtaWRkbGUiIHg9IjUwJSIgeT0iODElIj40MDI8L3RleHQ+PHRleHQgZmlsbD0iI2ZmZiIgZm9udC1mYW1pbHk9IkFyaWFsIEJsYWNrLCBBcmlhbCIgZm9udC1zaXplPSIzMHB4IiBmb250LXdlaWdodD0iODAwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiB4PSI1MCUiIHk9IjkxJSIgb3BhY2l0eT0iMC42Ij5TRVBURU1CRVIgNywgMjAyMjwvdGV4dD48L2c+PC9zdmc+"})(T[n]),_=(e=>$r((Date.now()-e)/1e3))(b),S=ns(r,s,o),k=Be.Decimal.from(Date.now()-b).div(1e3),D=as(k,l,c,S),L=es(r,s,o),E=as(k,l,c,L),A=Be.Decimal.ONE.sub(o).mul(d),C=S===Be.Decimal.INFINITY?Be.Decimal.INFINITY:ts(u,S,r).mul(A),I=L===Be.Decimal.INFINITY?Be.Decimal.INFINITY:ts(u,L,r).mul(A),R=L===Be.Decimal.INFINITY?Sr:is(k,l,c,L),M=S===Be.Decimal.INFINITY?Sr:is(k,l,c,S),P=Jr(f[n]).mul(i),B=p.isZero?0:Xr(p,d,i),U=p.isZero?0:Xr(C,d,i),N=U/zr(d);return[...e,{id:a,deposit:d,accrued:p,startTime:b,endTime:g,status:O,tokenUri:w,breakEvenAccrual:I,rebondAccrual:C,breakEvenTime:R,rebondTime:M,marketValue:P,rebondReturn:U,claimNowReturn:B,rebondRoi:N,rebondApr:N*(365/(_+D)),claimedAmount:Be.Decimal.from(Vr(x[n])),bondAgeInDays:_,remainingRebondDays:D,remainingBreakEvenDays:E}]}),[]).sort(((e,t)=>e.startTime>t.startTime?-1:e.startTime<t.startTime?1:0))}catch(i){console.error(i)}return[]},getStats:async e=>{const[t,n,a]=await Promise.all([e.getOpenBondCount(),e.countChickenOut(),e.countChickenIn()]),i=t.add(n).add(a);return{pendingBonds:Be.Decimal.from(t.toString()),cancelledBonds:Be.Decimal.from(n.toString()),claimedBonds:Be.Decimal.from(a.toString()),totalBonds:Be.Decimal.from(i.toString())}},erc20From:Rs,getLpToken:async e=>{var t;return Rs(await e.token(),null!==(t=e.signer)&&void 0!==t?t:e.provider)},getTokenBalance:async(e,t)=>Jr(await t.balanceOf(e)),getTokenTotalSupply:async e=>Jr(await e.totalSupply()),getProtocolInfo:async(e,t,n,a)=>{const i=n.getBAMMLUSDDebt().then(Jr),[r,s,o,u,l,c,d,p,y,b]=await Promise.all([e.totalSupply().then(Jr),a?Is(t):Cs(t),n.getTreasury().then((e=>e.map(Jr))),n.getOwnedLUSDInSP().then(Jr),n.getTotalLUSDInCurve().then(Jr),n.calcSystemBackingRatio().then(Jr),n.CHICKEN_IN_AMM_FEE().then(Jr),n.calcUpdatedAccrualParameter().then((e=>Jr(e).div(86400))),n.targetAverageAgeSeconds().then((e=>Be.Decimal.from(e.toString()))),n.totalWeightedStartTimes().then(Jr)]),m=await i,f={pending:o[0],reserve:o[1],permanent:o[2],total:o[0].add(o[1]).add(o[2])},h=void 0===ks.lusd3Crv||void 0===ks.stabilityPool||void 0===ks.bLusdLusd3Crv?[Ls(),Ds()]:null,v=f.pending.add(u),j=r.isZero?Be.Decimal.ONE:c,T=r.isZero?Be.Decimal.ONE:((e,t,n,a,i)=>e.add(t).sub(n).sub(a).div(i))(m,l,f.pending,f.permanent,r),x=((e,t)=>{const n=1e3*Math.round(parseFloat(e.div(t).toString()));return Be.Decimal.from(Date.now()-n).div(1e3)})(b,f.pending);let g,O,w=ks.bLusdLusd3Crv;const _={lower:f.total.sub(f.pending).div(r),upper:f.total.div(r)},{marketPricePremium:S,hasMarketPremium:k,breakEvenAccrualFactor:D,rebondAccrualFactor:L,breakEvenPeriodInDays:E,rebondPeriodInDays:A}=Es(s,j,d,p),C=s,I=f.reserve.add(f.permanent).div(r);if(h&&await Promise.all(h),void 0!==ks.lusd3Crv&&void 0!==ks.stabilityPool&&f.reserve.gt(0)){const e=ks.stabilityPool.mul(v),t=ks.lusd3Crv.mul(l);O=e.add(t).div(f.reserve),g=O.div(ks.stabilityPool),_.lower=v.sub(f.pending).add(l.mul(ks.lusd3Crv.div(ks.stabilityPool))).div(r),_.upper=v.add(l.mul(ks.lusd3Crv.div(ks.stabilityPool))).div(r)}return{bLusdSupply:r,marketPrice:s,treasury:f,fairPrice:_,floorPrice:j,claimBondFee:d,alphaAccrualFactor:p,marketPricePremium:S,hasMarketPremium:k,breakEvenAccrualFactor:D,rebondAccrualFactor:L,breakEvenPeriodInDays:E,rebondPeriodInDays:A,simulatedMarketPrice:C,yieldAmplification:g,bLusdApr:O,bLusdLpApr:w,controllerTargetAge:y,averageBondAge:x,floorPriceWithoutPendingHarvests:T,windDownPrice:I}},createBond:async(e,t,n,a,i,r)=>{var s,o,u;if(void 0===i||void 0===a)throw new Error("createBond() failed: a dependency is null");const l=i.address,c=Math.round(Date.now()/1e3)+600,d=(await a.nonces(t)).toNumber(),p={name:await a.name(),version:"1",chainId:await r.getChainId(),verifyingContract:n},y={owner:t,spender:l,value:e.hex,nonce:d,deadline:c},b=await r._signTypedData(p,{Permit:[{name:"owner",type:"address"},{name:"spender",type:"address"},{name:"value",type:"uint256"},{name:"nonce",type:"uint256"},{name:"deadline",type:"uint256"}]},y),{v:m,r:f,s:h}=Object(fs.splitSignature)(b),v=await i.estimateGas.createBondWithPermit(t,e.hex,c,m,f,h),j=await(await i.createBondWithPermit(t,e.hex,c,m,f,h,{gasLimit:v.add(Os)})).wait();console.log("CREATE BOND",null===j||void 0===j?void 0:j.events,null===j||void 0===j||null===(s=j.events)||void 0===s?void 0:s.map((e=>e.event)),null===j||void 0===j||null===(o=j.events)||void 0===o?void 0:o.find((e=>"BondCreated"===e.event)));const T=null===j||void 0===j||null===(u=j.events)||void 0===u?void 0:u.find((e=>"BondCreated"===e.event));if(void 0===T)throw new Error("createBond() failed: couldn't find BondCreated event");return console.log("createBond() finished:",T.args),T.args},cancelBond:async(e,t,n)=>{var a;if(void 0===n)throw new Error("cancelBond() failed: a dependency is null");console.log("cancelBond() started:",e,t.toString());const i=await n.estimateGas.chickenOut(e,t.hex),r=await(await n.chickenOut(e,t.hex,{gasLimit:i.add(Os)})).wait(),s=null===r||void 0===r||null===(a=r.events)||void 0===a?void 0:a.find((e=>"BondCancelled"===e.event));if(void 0===s)throw new Error("cancelBond() failed: couldn't find BondCancelled event");return console.log("cancelBond() finished:",s.args),s.args},claimBond:async(e,t)=>{try{var n;if(void 0===t)throw new Error("claimBond() failed: a dependency is null");console.log("claimBond() started",e);const a=await t.estimateGas.chickenIn(e),i=null===(n=(await(await t.chickenIn(e,{gasLimit:a.add(Os)})).wait()).events)||void 0===n?void 0:n.find((e=>"BondClaimed"===e.event));if(void 0===i)throw new Error("claimBond() failed: couldn't find BondClaimed event");return console.log("claimBond() finished",i.args),i.args}catch(a){throw console.error("claimBond() failed:",a),a}},isTokenApprovedWithBLusdAmm:async(e,t,n)=>{if(null===n)throw new Error("isTokenApprovedWithBLusdAmm() failed: a dependency is null");return(await t.allowance(e,n)).gt(bs.constants.MaxInt256)},isTokenApprovedWithBLusdAmmMainnet:async(e,t)=>(await t.allowance(e,xs)).gt(bs.constants.MaxInt256),approveTokenWithBLusdAmm:async(e,t)=>{if(void 0===e||null===t)throw new Error("approveTokenWithBLusdAmm() failed: a dependency is null");await(await e.approve(t,bs.constants.MaxUint256)).wait()},approveTokenWithBLusdAmmMainnet:async e=>{if(void 0===e)throw new Error("approveTokenWithBLusdAmmMainnet() failed: a dependency is null");await(await e.approve(xs,bs.constants.MaxUint256)).wait()},isTokenApprovedWithAmmZapper:async(e,t,n)=>{if(null===n)throw new Error("isTokenApprovedWithAmmZapper() failed: a dependency is null");return(await t.allowance(e,n)).gt(bs.constants.MaxInt256)},approveToken:async(e,t)=>{if(void 0===e||null===t)throw new Error("approveToken() failed: a dependency is null");await(await e.approve(t,bs.constants.MaxUint256)).wait()},getExpectedSwapOutput:Ps,getExpectedSwapOutputMainnet:Bs,swapTokens:async(e,t,n,a)=>{var i;if(void 0===a)throw new Error("swapTokens() failed: a dependency is null");const r=await a.estimateGas["exchange(uint256,uint256,uint256,uint256)"](e,Ms(e),t.hex,n.hex),s=await(await a["exchange(uint256,uint256,uint256,uint256)"](e,Ms(e),t.hex,n.hex,{gasLimit:r.mul(6).div(5)})).wait(),o=null===s||void 0===s||null===(i=s.events)||void 0===i?void 0:i.find((e=>"TokenExchange"===e.event));if(void 0===o)throw new Error("swapTokens() failed: couldn't find TokenExchange event");return console.log("swapTokens() finished:",o.args),o.args},swapTokensMainnet:async(e,t,n,a)=>{if(void 0===a)throw new Error("swapTokensMainnet() failed: a dependency is null");const i=hs.CurveRegistrySwaps__factory.connect(xs,a.signer),r=Ss(e),s=await i.estimateGas["exchange_multiple(address[9],uint256[3][4],uint256,uint256)"](...r,t.hex,n.hex);if(!(await(await i["exchange_multiple(address[9],uint256[3][4],uint256,uint256)"](...r,t.hex,n.hex,{gasLimit:s.mul(6).div(5)})).wait()).status)throw new Error("swapTokensMainnet() failed");console.log("swapTokensMainnet() finished")},getCoinBalances:e=>Promise.all([e.balances(0).then(Jr),e.balances(1).then(Jr)]),getExpectedLpTokens:async(e,t,n)=>{let a=Be.Decimal.ZERO;try{a=await(async(e,t,n)=>Jr(await n.getMinLPTokens(e.hex,t.hex)).mul(.99))(e,t,n)}catch{return a}return a},addLiquidity:async(e,t,n,a,i)=>{if(void 0===i)throw new Error("addLiquidity() failed: a dependency is null");const r=a?"addLiquidityAndStake":"addLiquidity",s=await i.estimateGas[r](e.hex,t.hex,n.hex);if(!(await(await i[r](e.hex,t.hex,n.hex,{gasLimit:s.mul(6).div(5)})).wait()).status)throw new Error("addLiquidity() failed");console.log("addLiquidity() finished")},getExpectedWithdrawal:async(e,t,n,a)=>{if("both"===t){const[t,a]=await n.getMinWithdrawBalanced(e.hex);return new Map([[Mr.BLUSD,Jr(t)],[Mr.LUSD,Jr(a)]])}{const i=t===Mr.LUSD?()=>n.getMinWithdrawLUSD(e.hex):()=>a.calc_withdraw_one_coin(e.hex,0);return new Map([[t,await i().then(Jr)]])}},removeLiquidity:async(e,t,n,a)=>{if(void 0===a)throw new Error("removeLiquidity() failed: a dependency is null");if(!(await(await a.removeLiquidityBalanced(e.hex,t.hex,n.hex)).wait()).status)throw new Error("removeLiquidity() failed");console.log("removeLiquidity() finished")},removeLiquidityOneCoin:async(e,t,n,a,i)=>t===Mr.LUSD?(async(e,t,n)=>{if(void 0===n)throw new Error("removeLiquidityLUSD() failed: a dependency is null");const a=await n.estimateGas.removeLiquidityLUSD(e.hex,t.hex);if(!(await(await n.removeLiquidityLUSD(e.hex,t.hex,{gasLimit:a.mul(6).div(5)})).wait()).status)throw new Error("removeLiquidityLUSD() failed");console.log("removeLiquidityLUSD() finished")})(e,n,a):(async(e,t,n)=>{if(void 0===n)throw new Error("removeLiquidityBLUSD() failed: a dependency is null");const a="remove_liquidity_one_coin(uint256,uint256,uint256,bool)",i=await n.estimateGas[a](e.hex,0,t.hex,!1);if(!(await(await n[a](e.hex,0,t.hex,!1,{gasLimit:i.mul(6).div(5)})).wait()).status)throw new Error("removeLiquidityBLUSD() failed");console.log("removeLiquidityBLUSD() finished")})(e,n,i),stakeLiquidity:async(e,t)=>{var n;if(void 0===t)throw new Error("stakeLiquidity() failed: a dependency is null");const a=await(await t["deposit(uint256)"](e.hex)).wait(),i=null===a||void 0===a||null===(n=a.events)||void 0===n?void 0:n.find((e=>"Deposit"===(null===e||void 0===e?void 0:e.event)));if(void 0===i)throw new Error("stakeLiquidity() failed: couldn't find Withdraw event");return console.log("stakeLiquidity() finished:",i.args),i.args},unstakeLiquidity:async(e,t)=>{var n;if(void 0===t)throw new Error("unstakeLiquidity() failed: a dependency is null");const a=await(await t["withdraw(uint256,bool)"](e.hex,!0)).wait(),i=null===a||void 0===a||null===(n=a.events)||void 0===n?void 0:n.find((e=>"Withdraw"===(null===e||void 0===e?void 0:e.event)));if(void 0===i)throw new Error("unstakeLiquidity() failed: couldn't find Withdraw event");return console.log("unstakeLiquidity() finished:",i.args),i.args},getLpRewards:async(e,t)=>{let n=[];const a=(await t.reward_count()).toNumber();for(let i=0;i<a;i++){const a=await t.reward_tokens(i),r=Jr(await t.claimable_reward(e,a)),s=gs[a]||`${a.slice(0,5)}..${a.slice(a.length-3)}`;n.push({name:s,address:a,amount:r})}return n},claimLpRewards:async e=>{if(void 0===e)throw new Error("claimLpRewards() failed: a dependency is null");if(!(await(await e["claim_rewards()"]()).wait()).status)throw new Error("claimLpRewards() failed: no transaction receipt status received.")}};function Ns(e,t){var n=Object(i.useState)("IDLE"),a=Object(m.a)(n,2),r=a[0],s=a[1];return Object(i.useEffect)((function(){if("CONFIRMED"===r||"FAILED"===r){var e=setTimeout((function(){s("IDLE")}),2600);return function(){return clearTimeout(e)}}}),[r]),[Object(i.useCallback)(Object(T.a)(j.a.mark((function t(){var n,a,i,r=arguments;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=r.length,a=new Array(n),i=0;i<n;i++)a[i]=r[i];return t.prev=1,s("PENDING"),t.next=5,e.apply(void 0,a);case 5:s("CONFIRMED"),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),s("FAILED"),new Error("useTransaction(".concat(a,") ").concat(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,8]])}))),[e].concat(Object(b.a)(t))),r]}var Fs=n(121),qs=n(366),Ys=n(80);function Gs(e,t){var n=R(),a=n.provider,r=n.liquity,s=Object(i.useState)(),o=Object(m.a)(s,2),u=o[0],l=o[1];return Object(i.useEffect)((function(){Object(T.a)(j.a.mark((function n(){var i;return j.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,void 0===u){n.next=3;break}return n.abrupt("return");case 3:if(null!==e){n.next=6;break}return l({instance:void 0,status:"FAILED"}),n.abrupt("return");case 6:return n.next=8,a.getCode(e);case 8:if(n.t0=n.sent,"0x"!==n.t0){n.next=12;break}throw new Error("Contract ".concat(e," doesn't exist."));case 12:i=new Ys.ethers.Contract(e,t,r.connection.signer),l({instance:i,status:"LOADED"}),n.next=21;break;case 16:n.prev=16,n.t1=n.catch(0),l({instance:void 0,status:"FAILED"}),console.error(n.t1),console.error("Contract ".concat(e," doesn't appear to be deployed. Did you forget to re-run yarn deploy:chicken-bonds?"));case 21:case"end":return n.stop()}}),n,null,[[0,16]])})))()}),[a,r.connection.signer,e,t,u]),[null===u||void 0===u?void 0:u.instance,(null===u||void 0===u?void 0:u.status)||"UNKNOWN"]}const Qs=e=>{const{children:t}=e,[n,a]=Object(i.useState)("IDLE"),r=Object(i.useRef)(n),[s,o]=Object(i.useState)(),[u,l]=Object(i.useState)(),[d,p]=Object(i.useState)(!0),[y,b]=Object(i.useState)(),[m,f]=Object(i.useState)(),[h,v]=Object(i.useState)(),[j,T]=Object(i.useState)(),[x,g]=Object(i.useState)(),[O,w]=Object(i.useState)(!1),[_,S]=Object(i.useState)(!1),[k,D]=Object(i.useState)(!1),[L,A]=Object(i.useState)(!1),[C,I]=Object(i.useState)(!1),[M,P]=Object(i.useState)(!1),[B,U]=Object(i.useState)(!1),[N,F]=Object(i.useState)(Mr.BLUSD),[q,Y]=Object(i.useState)({CREATE:"IDLE",CANCEL:"IDLE",CLAIM:"IDLE",APPROVE_AMM:"IDLE",APPROVE_SPENDER:"IDLE",SWAP:"IDLE",MANAGE_LIQUIDITY:"IDLE"}),[G,Q]=Object(i.useState)(),[W,Z]=Object(i.useState)(),[H,z]=Object(i.useState)(),[V,J]=Object(i.useState)(),[K,$]=Object(i.useState)(),[X,ee]=Object(i.useState)(),[te,ne]=Object(i.useState)(),[ae,ie]=Object(i.useState)(),{account:re,liquity:se}=R(),{LUSD_OVERRIDE_ADDRESS:oe,BLUSD_AMM_ADDRESS:ue,BLUSD_LP_ZAP_ADDRESS:le,BLUSD_AMM_STAKING_ADDRESS:ce}=Nt(),de=(()=>{const{liquity:e}=R(),{chainId:t}=Object(c.b)(),n=1===t,a=Nt(),{BLUSD_AMM_ADDRESS:r,BLUSD_TOKEN_ADDRESS:s,BOND_NFT_ADDRESS:o,CHICKEN_BOND_MANAGER_ADDRESS:u,LUSD_OVERRIDE_ADDRESS:l,BLUSD_LP_ZAP_ADDRESS:d,BLUSD_AMM_STAKING_ADDRESS:p}=a,[y,b]=Gs(e.connection.addresses.lusdToken,qs),[m,f]=Gs(l,Fs.ERC20Faucet__factory.abi),[h,v]=null===l?[y,b]:[m,f],[j,T]=Gs(s,Fs.BLUSDToken__factory.abi),[x,g]=Gs(o,Fs.BondNFT__factory.abi),[O,w]=Gs(u,Fs.ChickenBondManager__factory.abi),[_,S]=Gs(r,hs.CurveCryptoSwap2ETH__factory.abi),[k,D]=Gs(d,Fs.BLUSDLPZap__factory.abi),[L,E]=Gs(p,hs.CurveLiquidityGaugeV5__factory.abi),A=void 0===[v,g,w,T,S,D,E].find((e=>"FAILED"===e)),C=Object(i.useCallback)((async(e,t)=>{if(void 0===h||void 0===x||void 0===O||void 0===j||void 0===_||void 0===L||null===p)return;const a=t.getProtocolInfo(j,_,O,n),i=t.getAccountBonds(e,x,O,await a),[r,s,o,u]=await Promise.all([a,t.getStats(O),t.getLpToken(_),t.erc20From(p,_.provider)]),[l,c,d,y,b,m,f]=await Promise.all([t.getTokenBalance(e,j),t.getTokenBalance(e,h),t.getTokenBalance(e,o),t.getTokenBalance(e,u),t.getTokenTotalSupply(o),t.getCoinBalances(_),t.getLpRewards(e,L)]);return{protocolInfo:r,bonds:await i,stats:s,bLusdBalance:l,lusdBalance:c,lpTokenBalance:d,stakedLpTokenBalance:y,lpTokenSupply:b,bLusdAmmBLusdBalance:m[Mr.BLUSD],bLusdAmmLusdBalance:m[Mr.LUSD],lpRewards:f}}),[O,x,j,h,_,n,p,L]);return{addresses:a,lusdToken:h,bLusdToken:j,bondNft:x,chickenBondManager:O,bLusdAmm:_,bLusdAmmZapper:k,bLusdGauge:L,getLatestData:C,hasFoundContracts:A}})(),{chainId:pe}=Object(c.b)(),ye=1===pe,be=Object(i.useCallback)((e=>{if(void 0===h)return;const t=Es(e,h.floorPrice,h.claimBondFee,h.alphaAccrualFactor);T({...h,...t,simulatedMarketPrice:e})}),[h]),me=Object(i.useCallback)((()=>{void 0!==h&&T({...h})}),[h]),fe=Object(i.useCallback)((e=>{if(void 0===y)return;const t=y.findIndex((t=>t.id===e)),n=y.slice(0,t).concat(y.slice(t+1));b(n)}),[y]),he=Object(i.useCallback)((e=>{if(void 0===y)return;const t=y.findIndex((t=>t.id===e)),n={...y[t],status:"CLAIMED"},a=y.slice(0,t).concat(n).concat(y.slice(t+1));b(a)}),[y]),ve=Object(i.useCallback)((async()=>{void 0!==de.lusdToken&&null!==oe&&(await de.lusdToken.balanceOf(re)).eq(0)&&"tap"in de.lusdToken&&(await(await de.lusdToken.tap()).wait(),p(!0))}),[de.lusdToken,re,oe]);Object(i.useEffect)((()=>{(async()=>{if(null===ue||void 0===de.lusdToken||O)return;const e=await(ye?Us.isTokenApprovedWithBLusdAmmMainnet(re,de.lusdToken):Us.isTokenApprovedWithBLusdAmm(re,de.lusdToken,ue));w(e)})()}),[de.lusdToken,re,O,ye,ue]),Object(i.useEffect)((()=>{(async()=>{if(null===ue||void 0===de.bLusdToken||_)return;const e=await(ye?Us.isTokenApprovedWithBLusdAmmMainnet(re,de.bLusdToken):Us.isTokenApprovedWithBLusdAmm(re,de.bLusdToken,ue));S(e)})()}),[de.bLusdToken,re,_,ye,ue]),Object(i.useEffect)((()=>{(async()=>{if(null===le||void 0===de.lusdToken||k)return;const e=await Us.isTokenApprovedWithAmmZapper(re,de.lusdToken,le);D(e)})()}),[de.lusdToken,re,k,le]),Object(i.useEffect)((()=>{(async()=>{if(void 0===de.bLusdAmm||C)return;const e=await Us.getLpToken(de.bLusdAmm),t=await Us.isTokenApprovedWithAmmZapper(re,e,le);I(t)})()}),[de.bLusdAmm,re,C,le]),Object(i.useEffect)((()=>{(async()=>{if(null===le||void 0===de.bLusdToken||L)return;const e=await Us.isTokenApprovedWithAmmZapper(re,de.bLusdToken,le);D(e)})()}),[de.bLusdToken,re,L,le]),Object(i.useEffect)((()=>{if(B)return;const e=setTimeout((()=>p(!0)),15e3);return()=>{clearTimeout(e)}}),[B]),Object(i.useEffect)((()=>{(async()=>{try{if(void 0===de.lusdToken||void 0===de.bondNft||void 0===de.chickenBondManager||void 0===de.bLusdToken||void 0===de.bLusdAmm||void 0===de.bLusdGauge||!d||B)return;U(!0);const e=await de.getLatestData(re,Us);if(void 0===e)return void U(!1);const{protocolInfo:t,bonds:n,stats:a,bLusdBalance:i,lusdBalance:r,lpTokenBalance:s,stakedLpTokenBalance:o,lpTokenSupply:u,bLusdAmmBLusdBalance:c,bLusdAmmLusdBalance:y,lpRewards:m}=e;if(v(t),void 0===j){const e=Es(t.simulatedMarketPrice,t.floorPrice,t.claimBondFee,t.alphaAccrualFactor);T({...t,...e,simulatedMarketPrice:t.simulatedMarketPrice})}p(!1),g(m),Q(i),Z(r),z(s),J(o),$(u),ee(c),ne(y),f(a),b(n),l(void 0)}catch(e){console.error("Synchronising effect exception",e)}U(!1)})()}),[B,d,re,de,j]);const[je,Te]=Ns((async e=>{for(const t of e)t===Mr.BLUSD?(await(ye?Us.approveTokenWithBLusdAmmMainnet(de.bLusdToken):Us.approveTokenWithBLusdAmm(de.bLusdToken,ue)),S(!0)):(await(ye?Us.approveTokenWithBLusdAmmMainnet(de.lusdToken):Us.approveTokenWithBLusdAmm(de.lusdToken,ue)),w(!0))}),[de.bLusdToken,de.lusdToken,ye,ue]),[xe,ge]=Ns((async({tokensNeedingApproval:e})=>{if(void 0!==de.bLusdAmm)for(const[t,n]of Array.from(e))if(t===Mr.BLUSD)await Us.approveToken(de.bLusdToken,n),n===ue?S(!0):n===le&&A(!0);else if(t===Mr.LUSD)await Us.approveToken(de.lusdToken,le),D(!0);else if(t===Mr.BLUSD_LUSD_LP&&void 0===n){const e=await Us.getLpToken(de.bLusdAmm);await Us.approveToken(e,le),I(!0)}else if(t===Mr.BLUSD_LUSD_LP){const e=await Us.getLpToken(de.bLusdAmm);await Us.approveToken(e,n),n===le?I(!0):n===ce&&P(!0)}}),[de.bLusdAmm,de.bLusdToken,de.lusdToken,le,ce,ue,L,k]),[Oe,we]=Ns((async e=>{if(void 0===se.connection.signer)return;await Us.createBond(e,re,null!==oe&&void 0!==oe?oe:se.connection.addresses.lusdToken,de.lusdToken,de.chickenBondManager,se.connection.signer);const t={id:"OPTIMISTIC_BOND",deposit:e,startTime:Date.now(),status:"PENDING"};l(t),p(!0)}),[de.chickenBondManager,de.lusdToken,se.connection.signer,re]),[_e,Se]=Ns((async(e,t)=>{await Us.cancelBond(e,t,de.chickenBondManager),fe(e),p(!0)}),[de.chickenBondManager,fe]),[ke,De]=Ns((async e=>{await Us.claimBond(e,de.chickenBondManager),he(e),p(!0)}),[de.chickenBondManager,he]),Le=Object(i.useCallback)((async(e,t)=>de.bLusdAmm?(ye?Us.getExpectedSwapOutputMainnet:Us.getExpectedSwapOutput)(e,t,de.bLusdAmm):Be.Decimal.ZERO),[de.bLusdAmm,ye]),[Ee,Ae]=Ns((async(e,t,n)=>{await(ye?Us.swapTokensMainnet:Us.swapTokens)(e,t,n,de.bLusdAmm),p(!0)}),[de.bLusdAmm]),Ce=Object(i.useCallback)((async(e,t)=>void 0===se.connection.signer?Be.Decimal.ZERO:de.bLusdAmmZapper?Us.getExpectedLpTokens(e,t,de.bLusdAmmZapper):Be.Decimal.ZERO),[de.bLusdAmmZapper,se.connection.signer]),[Ie,Re]=Ns((async e=>{"addLiquidity"===e.action?await Us.addLiquidity(e.bLusdAmount,e.lusdAmount,e.minLpTokens,e.shouldStakeInGauge,de.bLusdAmmZapper):"removeLiquidity"===e.action?await Us.removeLiquidity(e.burnLpTokens,e.minBLusdAmount,e.minLusdAmount,de.bLusdAmmZapper):"removeLiquidityOneCoin"===e.action?await Us.removeLiquidityOneCoin(e.burnLpTokens,e.output,e.minAmount,de.bLusdAmmZapper,de.bLusdAmm):"stakeLiquidity"===e.action?await Us.stakeLiquidity(e.stakeAmount,de.bLusdGauge):"unstakeLiquidity"===e.action?await Us.unstakeLiquidity(e.unstakeAmount,de.bLusdGauge):"claimLpRewards"===e.action&&await Us.claimLpRewards(de.bLusdGauge),p(!0)}),[de.bLusdAmmZapper,de.bLusdGauge]),Me=Object(i.useCallback)((async(e,t)=>void 0===de.bLusdAmm?new Map([[Mr.LUSD,Be.Decimal.ZERO],[Mr.BLUSD,Be.Decimal.ZERO]]):de.bLusdAmmZapper?Us.getExpectedWithdrawal(e,t,de.bLusdAmmZapper,de.bLusdAmm):new Map),[de.bLusdAmmZapper,de.bLusdAmm]),Pe=Object(i.useMemo)((()=>null===y||void 0===y?void 0:y.find((e=>e.id===s))),[y,s]),Ue=Object(i.useCallback)((async(e,t)=>{if(!((e,t)=>void 0!==Rr[e][t])(r.current,e))return void console.error("invalid event",e,t,"in view",r.current);const n=((e,t)=>{var n;return null!==(n=Rr[e][t])&&void 0!==n?n:e})(r.current,e);a(n),t&&"bondId"in t&&t.bondId!==s&&o(t.bondId),t&&"inputToken"in t&&t.inputToken!==N&&F(t.inputToken);const i=(t,n)=>r.current===t&&e===n;try{if(i("CREATING","CONFIRM_PRESSED"))await Oe(t.deposit),await Ue("CREATE_BOND_CONFIRMED");else if(i("CANCELLING","CONFIRM_PRESSED")){if(void 0===Pe)return void console.error("dispatchEvent() handler: attempted to cancel a bond without selecting a bond");await _e(Pe.id,Pe.deposit),await Ue("CANCEL_BOND_CONFIRMED")}else if(i("CLAIMING","CONFIRM_PRESSED")){if(void 0===Pe)return void console.error("dispatchEvent() handler: attempted to claim a bond without selecting a bond");await ke(Pe.id),await Ue("CLAIM_BOND_CONFIRMED")}else if(i("SWAPPING","APPROVE_PRESSED"))await je([N]);else if(i("SWAPPING","CONFIRM_PRESSED")){const{inputAmount:e,minOutputAmount:n}=t;await Ee(N,e,n),await Ue("SWAP_CONFIRMED")}else i("MANAGING_LIQUIDITY","APPROVE_PRESSED")?await xe(t):i("MANAGING_LIQUIDITY","CONFIRM_PRESSED")&&(await Ie(t),await Ue("MANAGE_LIQUIDITY_CONFIRMED"))}catch(u){console.error("dispatchEvent(), event handler failed\n\n",u)}}),[s,_e,Oe,ke,Pe,je,xe,Ee,N,Ie]);Object(i.useEffect)((()=>{Y((e=>({...e,CREATE:we,CANCEL:Se,CLAIM:De,APPROVE_AMM:Te,APPROVE_SPENDER:ge,SWAP:Ae,MANAGE_LIQUIDITY:Re})))}),[we,Se,De,Te,ge,Ae,Re]),Object(i.useEffect)((()=>{r.current=n}),[n]),Object(i.useEffect)((()=>{(async()=>{if(void 0===y||void 0===h||void 0===de.chickenBondManager)return;if(h.bLusdSupply.gt(0))return void ie(!1);const e=1e3*(await de.chickenBondManager.BOOTSTRAP_PERIOD_CHICKEN_IN()).toNumber(),t=void 0!==y.find((t=>Date.now()-t.startTime>e));ie(!t)})()}),[y,h,de.chickenBondManager]);const Ne={view:n,dispatchEvent:Ue,selectedBondId:s,optimisticBond:u,protocolInfo:h,stats:m,bonds:y,statuses:q,selectedBond:Pe,bLusdBalance:G,lusdBalance:W,lpTokenBalance:H,stakedLpTokenBalance:V,lpTokenSupply:K,bLusdAmmBLusdBalance:X,bLusdAmmLusdBalance:te,isSynchronizing:B,getLusdFromFaucet:ve,setSimulatedMarketPrice:be,resetSimulatedMarketPrice:me,simulatedProtocolInfo:j,hasFoundContracts:de.hasFoundContracts,isBLusdApprovedWithBlusdAmm:_,isLusdApprovedWithBlusdAmm:O,isLusdApprovedWithAmmZapper:k,isBLusdApprovedWithAmmZapper:L,isBLusdLpApprovedWithAmmZapper:C,isBLusdLpApprovedWithGauge:M,inputToken:N,isInputTokenApprovedWithBLusdAmm:N===Mr.BLUSD?_:O,getExpectedSwapOutput:Le,getExpectedLpTokens:Ce,getExpectedWithdrawal:Me,isBootstrapPeriodActive:ae,hasLoaded:void 0!==h&&void 0!==y,addresses:de.addresses,lpRewards:x};return window.__LIQUITY_BONDS__=Ne.current,Object(E.jsx)(At.Provider,{value:Ne,children:t})},Ws=({name:e,description:t,descriptionLink:n,value:a,type:i,min:r,max:s,step:o=.01,onSliderChange:u,onReset:l})=>Object(E.jsxs)(d.h,{mb:2,mx:1,sx:{flexDirection:"column"},children:[Object(E.jsxs)(d.h,{as:"h4",sx:{fontWeight:"300",alignItems:"center",justifyContent:"center"},children:[e,t&&Object(E.jsx)(Gt,{size:"xs",tooltip:t,link:n}),l&&Object(E.jsx)(d.c,{variant:"icon",sx:{m:0,ml:"24px",mt:1,border:"none",fontSize:1,width:0,height:0},onClick:l,children:"Reset"})]}),Object(E.jsxs)(d.h,{sx:{flexGrow:1,alignItems:"center"},children:[Object(E.jsx)(d.t,{mr:2,sx:{fontSize:1},children:r}),Object(E.jsx)(d.r,{value:zr(a),min:r,max:s,step:o,onChange:e=>u(Be.Decimal.from(e.target.value))}),Object(E.jsx)(d.t,{ml:2,sx:{fontSize:1},children:s})]}),Object(E.jsx)(d.h,{sx:{fontWeight:"400",justifyContent:"center",alignItems:"center"},children:Object(E.jsxs)(d.t,{children:[a.prettify(2)," ",i]})})]}),Zs=({onBack:e})=>{var t,n;const{dispatchEvent:a,statuses:r,lusdBalance:s,simulatedProtocolInfo:o,setSimulatedMarketPrice:u,resetSimulatedMarketPrice:l,protocolInfo:c}=Ct(),{back:p}=ls(),[y,b]=Object(i.useState)(null!==s&&void 0!==s?s:Be.Decimal.ZERO),m=Object(i.useState)(),f=Object(i.useMemo)((()=>"PENDING"===r.CREATE),[r.CREATE]),h=null!==(t=null!==p&&void 0!==p?p:e)&&void 0!==t?t:()=>a("BACK_PRESSED"),[v,j]=Object(i.useState)(null===(n=null===s||void 0===s?void 0:s.gte(100))||void 0===n||n),[T,x]=Object(i.useState)(!1);if(Object(i.useEffect)((()=>()=>l()),[]),void 0===c||void 0===o||void 0===s)return null;const g=o.hasMarketPremium,O=Be.Decimal.ONE.sub(c.claimBondFee).mul(y),w=Xr(O.mul(o.rebondAccrualFactor),y,o.simulatedMarketPrice),_=w/zr(y)||0,S=c.floorPrice.mul(1.025).prettify(2),k=Be.Decimal.max(c.marketPrice.mul(1.1),c.floorPrice.mul(1.5)).prettify(2),D=ns(o.alphaAccrualFactor,o.marketPricePremium,c.claimBondFee),L=as(Be.Decimal.ZERO,o.controllerTargetAge,o.averageBondAge,D),E=es(o.alphaAccrualFactor,o.marketPricePremium,c.claimBondFee),A=E.eq(Be.Decimal.INFINITY)?Sr:is(Be.Decimal.ZERO,o.controllerTargetAge,o.averageBondAge,E),C=D.eq(Be.Decimal.INFINITY)?Sr:is(Be.Decimal.ZERO,o.controllerTargetAge,o.averageBondAge,D),I=g?O.mul(o.breakEvenAccrualFactor):Be.Decimal.INFINITY,R=g?O.mul(o.rebondAccrualFactor):Be.Decimal.INFINITY;return Object(ki.c)(ki.a,{children:[Object(ki.c)(d.j,{as:"h2",sx:{pt:1,pb:3,px:2},children:[Object(ki.b)(d.h,{sx:{justifyContent:"center"},children:"Bond LUSD"}),Object(ki.b)(d.f,{onClick:()=>{a("ABORT_PRESSED")},sx:{position:"absolute",right:"24px",top:"24px"}})]}),Object(ki.c)(d.h,{sx:{justifyContent:"center",alignItems:"center"},children:[Object(ki.b)(d.k,{sx:{height:180,border:"10px solid white",borderRadius:"14%",borderColor:"white"},src:"./bonds/egg-nft.png"}),Object(ki.b)(Gt,{tooltip:Object(ki.b)(d.d,{variant:"tooltip",sx:{width:"200px"},children:Ve.description})})]}),Object(ki.b)(d.h,{my:4,sx:{justifyContent:"center"},children:Object(ki.b)(Ar,{events:[{date:new Date((M=Date.now(),new Date(new Date(M).toDateString()))),label:Object(ki.c)(ki.a,{children:[Object(ki.b)(Dr,{subLabel:"0 bLUSD",description:Ze.description,children:Ze.term}),Object(ki.b)(kr,{children:"0 bLUSD"})]}),isEndOfLife:!0},{date:A,label:Object(ki.c)(ki.a,{children:[Object(ki.b)(Dr,{description:Je.description,children:Je.term}),Object(ki.b)(kr,{children:Object(ki.c)(Si,{estimate:I,children:[I.prettify(2)," bLUSD"]})})]})},{date:C,label:Object(ki.c)(ki.a,{children:[Object(ki.b)(Dr,{description:Ke.description,children:Ke.term}),Object(ki.b)(kr,{children:Object(ki.c)(Si,{estimate:R,children:[R.prettify(2)," bLUSD"]})})]})}]})}),Object(ki.b)(Ln,{label:nt.term,inputId:"bond-deposit-amount",amount:y.prettify(2),unit:"LUSD",editingState:m,editedAmount:y.toString(),setEditedAmount:e=>(e=>{const t=e.gte(100),n=!!(null===s||void 0===s?void 0:s.lt(e));b(e),j(t),x(n)})(Be.Decimal.from(e)),maxedOut:y.eq(s),maxAmount:s.toString()}),Object(ki.c)(d.i,{sx:{my:1,mb:3,justifyItems:"center",pl:2},gap:"20px",columns:3,children:[Object(ki.b)(Cr,{lexicon:$e,value:g?w.toFixed(2):"N/A",type:"LUSD"}),Object(ki.b)(Cr,{lexicon:Xe,value:g?Kr(_).toFixed(2)+"%":"N/A",type:""}),Object(ki.b)(Cr,{lexicon:et,value:g?Kr(_*(365/L)).toFixed(2)+"%":"N/A",type:""})]}),Object(ki.b)(Ws,{name:"Simulate market price",description:"The market price of bLUSD impacts how long it will take to rebond and break even. The actual times may be overestimated as the simulator is based on the current bLUSD accrual rate, not taking into account potential rate adjustments.",descriptionLink:"https://docs.chickenbonds.org/faq/economic-design#_44lrt4qpho3a",value:o.simulatedMarketPrice,min:S,max:k,type:"LUSD",onSliderChange:e=>u(e),onReset:()=>l()}),"FAILED"===r.CREATE&&Object(ki.b)(ca,{children:"Failed to create bond. Please try again."}),!c.hasMarketPremium&&Object(ki.c)(ca,{children:["When the bLUSD market price is less than 3% above the floor price, it's not profitable to bond. Buying bLUSD from the market currently generates a higher return than bonding."," ",Object(ki.b)(te,{link:Et.link})]}),!v&&Object(ki.b)(Bn,{children:"The minimum bond amount is 100 LUSD."}),T&&Object(ki.c)(Bn,{children:["Amount exceeds your balance by ",Object(ki.c)(Tn,{children:[y.sub(s).prettify(2)," LUSD"]})]}),Object(ki.b)(d.h,{pb:2,sx:{fontSize:"15.5px",justifyContent:"center",fontStyle:"italic"},children:"You can cancel your bond at any time to recover your deposited LUSD"}),Object(ki.c)(d.h,{variant:"layout.actions",children:[Object(ki.b)(d.c,{variant:"cancel",onClick:h,disabled:f,children:"Back"}),Object(ki.c)(d.c,{onClick:()=>{a("CONFIRM_PRESSED",{deposit:y})},disabled:f,children:[!f&&Object(ki.b)(ki.a,{children:"Confirm"}),f&&Object(ki.b)(d.s,{size:"28px",sx:{color:"white"}})]})]})]});var M},Hs=({children:e})=>{const{dispatchEvent:t}=Ct();return Object(ki.c)(ki.a,{children:[Object(ki.c)(d.j,{as:"h2",sx:{pt:2,pb:3,px:2},children:[Object(ki.b)(d.h,{sx:{justifyContent:"center"},children:"Bond LUSD"}),Object(ki.b)(d.f,{onClick:()=>t("ABORT_PRESSED"),sx:{position:"absolute",right:"24px",top:"24px"}})]}),Object(ki.b)(d.h,{sx:{justifyContent:"center"},children:Object(ki.b)(d.k,{src:"./bonds/bond-info.png",sx:{height:"200px"}})}),e]})},zs=()=>{const e=Object(i.useRef)(null),{go:t,back:n}=ls();return Object(ki.c)(Hs,{children:[Object(ki.c)(d.b,{sx:{p:[2,3]},children:[Object(ki.b)(d.p,{sx:{mt:2},children:"Bonds accrue a virtual balance of boosted LUSD tokens (bLUSD) over time. At any time, the bonder may choose to claim their bLUSD in exchange for their LUSD, or cancel their bond to recover their deposited LUSD."}),Object(ki.c)(d.p,{sx:{mt:3},children:["Please visit the\xa0",Object(ki.b)(d.n,{href:"https://docs.chickenbonds.org/",target:"_blank",children:"docs"}),"\xa0to understand how bonds work."]})]}),Object(ki.c)(d.h,{variant:"layout.actions",children:[Object(ki.b)(d.h,{sx:{justifyContent:"flex-end",flexDirection:"column"},children:Object(ki.b)(d.m,{sx:{fontSize:"14px"},children:Object(ki.c)(d.h,{children:[Object(ki.b)(d.e,{ref:e}),"Don't show this message again"]})})}),Object(ki.b)(d.c,{variant:"cancel",onClick:n||(()=>{}),children:"Back"}),Object(ki.b)(d.c,{onClick:()=>{var n;(null===e||void 0===e||null===(n=e.current)||void 0===n?void 0:n.checked)&&window.localStorage.setItem("LIQUITY.BOND_FAQ.VISISBLE","true"),t&&t(Zs)},children:"Continue"})]})]})};var Vs=function(){var e=Ct().dispatchEvent,t=function(){e("ABORT_PRESSED")};return"true"===window.localStorage.getItem("LIQUITY.BOND_FAQ.VISISBLE")?Object(E.jsx)(Wr,{onDismiss:t,children:Object(E.jsx)(Zs,{})}):Object(E.jsxs)(ps,{onDismiss:t,children:[Object(E.jsx)(zs,{}),Object(E.jsx)(Zs,{})]})};const Js={[Mr.BLUSD]:"bLUSD",[Mr.LUSD]:"LUSD"},Ks={[Mr.BLUSD]:Mr.LUSD,[Mr.LUSD]:Mr.BLUSD},$s=Be.Decimal.ONE.div(1e3),Xs=()=>{var e;const{dispatchEvent:t,statuses:n,inputToken:a,lusdBalance:r,bLusdBalance:s,isInputTokenApprovedWithBLusdAmm:o,bLusdAmmBLusdBalance:u,bLusdAmmLusdBalance:l,getExpectedSwapOutput:c}=Ct(),p=Object(i.useState)(),y=null!==(e=a===Mr.BLUSD?s:r)&&void 0!==e?e:Be.Decimal.ZERO,[b,m]=Object(i.useState)(Be.Decimal.ZERO),[f,h]=Object(i.useState)(),[v,j]=Object(i.useState)(),[T,x]=Object(i.useState)(),[g,O]=Object(i.useState)("half"),[w,_]=Object(i.useState)(),[S,k]=Object(i.useState)(!1),D=Object(i.useRef)(null),L=T&&new Be.Percent(T),E="PENDING"===n.APPROVE_AMM,A="PENDING"===n.SWAP,C=b.gt(y),I="custom"===g&&(!w||w.lt(.001)||w.gt(Be.Decimal.ONE)),R=null===w||void 0===w?void 0:w.gt(.05),M=`${u},${l}`,P=e=>O((e=>{if("half"===e||"one"===e||"custom"===e)return e;throw new Error(`invalid slippage tolerance choice "${e}"`)})(e.target.value));return Object(i.useEffect)((()=>{let e=!1;const t=setTimeout((async()=>{h(void 0),j(void 0),x(void 0);try{const[t,n]=await Promise.all([c(a,$s),b.nonZero&&c(a,b)]);if(e)return;const i=t.div($s),r=null===n||void 0===n?void 0:n.div(b),s=(null===r||void 0===r?void 0:r.lte(i))?i.sub(r).div(i):Be.Decimal.ZERO;h(null!==n&&void 0!==n?n:Be.Decimal.ZERO),j(null!==r&&void 0!==r?r:i),x(s)}catch(t){console.error("getExpectedSwapOutput() failed"),console.log(t)}}),200);return()=>{clearTimeout(t),e=!0}}),[a,b,c,M]),Object(ki.c)(ki.a,{children:[Object(ki.c)(d.j,{as:"h2",sx:{pt:2,pb:3,px:2},children:[Object(ki.c)(d.h,{sx:{justifyContent:"center"},children:[a===Mr.BLUSD?Object(ki.b)(ki.a,{children:"Sell"}):Object(ki.b)(ki.a,{children:"Buy"})," bLUSD"]}),Object(ki.b)(d.f,{onClick:()=>{t("ABORT_PRESSED")},sx:{position:"absolute",right:"24px",top:"24px"}})]}),Object(ki.b)(Ln,{label:"Sell",inputId:"swap-input-amount",amount:b.prettify(2),unit:Js[a],editingState:p,editedAmount:b.toString(),setEditedAmount:e=>m(Be.Decimal.from(e)),maxAmount:y.toString(),maxedOut:b.eq(y)}),Object(ki.b)(d.h,{sx:{justifyContent:"center",mb:3},children:Object(ki.b)(Y,{name:"arrow-down",size:"lg"})}),Object(ki.b)(Dn,{label:"Buy",children:f?Object(ki.b)(kn,{inputId:"swap-output-amount",amount:f.prettify(2),unit:Js[Ks[a]]}):Object(ki.b)(kn,{inputId:"swap-output-amount",children:Object(ki.b)(d.b,{sx:{width:"160px",height:"20px",mt:"10px",mb:"6px"},children:Object(ki.b)(fr,{})})})}),Object(ki.b)(Sn,{label:"Exchange rate",children:v?Object(ki.b)(On,{inputId:"swap-exchange-rate",amount:v.prettify(4),unit:`${Js[a]}:${Js[Ks[a]]}`}):Object(ki.b)(On,{inputId:"swap-exchange-rate",children:Object(ki.b)(d.b,{sx:{width:"180px",height:"16px",mt:"9px",mb:"5px"},children:Object(ki.b)(fr,{})})})}),Object(ki.b)(Sn,{label:"Price impact",children:T&&L?Object(ki.b)(On,{inputId:"swap-price-impact",amount:L.toString(4),color:T.gte(.005)?"danger":void 0}):Object(ki.b)(On,{inputId:"swap-price-impact",children:Object(ki.b)(d.b,{sx:{width:"80px",height:"16px",mt:"9px",mb:"5px"},children:Object(ki.b)(fr,{})})})}),Object(ki.c)("details",{children:[Object(ki.b)("summary",{sx:{cursor:"pointer",mx:2,mb:2},children:"Slippage tolerance"}),Object(ki.c)(d.h,{sx:{alignItems:"center",mx:4,mb:3},children:[Object(ki.c)(d.m,{variant:"radioLabel",children:[Object(ki.b)(d.q,{name:"swap-slippage-tolerance",value:"half",checked:"half"===g,onChange:P}),"0.5%"]}),Object(ki.c)(d.m,{variant:"radioLabel",children:[Object(ki.b)(d.q,{name:"swap-slippage-tolerance",value:"one",checked:"one"===g,onChange:P}),"1%"]}),Object(ki.c)(d.m,{variant:"radioLabel",sx:{alignItems:"center"},children:[Object(ki.b)(d.q,{name:"swap-slippage-tolerance",value:"custom",checked:"custom"===g,onChange:P}),Object(ki.b)(d.l,{ref:D,sx:{py:"6px",px:"10px",width:"110px",fontSize:2,...S?{}:I?{bg:"invalid",borderColor:"danger"}:R?{borderColor:"warning"}:{}},type:"number",min:0,max:100,step:.1,placeholder:"Custom",onFocus:()=>{O("custom"),k(!0)},onKeyDown:e=>{var t;"Enter"===e.key&&(null===(t=D.current)||void 0===t||t.blur())},onBlur:()=>k(!1),onChange:e=>{try{_(Be.Decimal.from(e.target.value).div(100))}catch{_(void 0)}}}),"\xa0%"]})]})]}),C&&Object(ki.c)(Bn,{children:["Amount exceeds your balance by"," ",Object(ki.c)(Tn,{children:[b.sub(y).prettify(2)," ",Js[a]]})]}),((null===u||void 0===u?void 0:u.isZero)||(null===l||void 0===l?void 0:l.isZero))&&Object(ki.b)(Bn,{children:"No liquidity in pool yet. Swap unavailable."}),Object(ki.c)(d.h,{pb:2,sx:{fontSize:"15.5px",justifyContent:"center",fontStyle:"italic"},children:["Your swap is performed directly in\xa0",Object(ki.b)(d.n,{href:"https://curve.fi/factory-crypto/134",target:"_blank",children:"Curve"}),"\xa0protocol."]}),Object(ki.c)(d.h,{variant:"layout.actions",children:[Object(ki.b)(d.c,{variant:"cancel",onClick:()=>{t("BACK_PRESSED")},disabled:E||A,children:"Back"}),o?Object(ki.b)(d.c,{variant:"primary",onClick:()=>{if(!f)return;const e="half"===g?Be.Decimal.from(.005):"one"===g?Be.Decimal.from(.01):w;if(!e||I)return;const n=Be.Decimal.ONE.sub(e);t("CONFIRM_PRESSED",{inputAmount:b,minOutputAmount:f.mul(n)})},disabled:b.isZero||!f||C||I||A,children:A?Object(ki.b)(d.s,{size:"28px",sx:{color:"white"}}):Object(ki.b)(ki.a,{children:"Confirm"})}):Object(ki.b)(d.c,{variant:"primary",onClick:()=>{t("APPROVE_PRESSED")},disabled:E,children:E?Object(ki.b)(d.s,{size:"28px",sx:{color:"white"}}):Object(ki.b)(ki.a,{children:"Approve"})})]})]})};var eo=function(){var e=Ct().dispatchEvent;return Object(E.jsx)(Wr,{onDismiss:function(){e("ABORT_PRESSED")},children:Object(E.jsx)(Xs,{})})};const to=({symbol:e,children:t})=>Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(d.t,{sx:{fontWeight:"medium"},children:t}),"\xa0",Object(E.jsx)(d.t,{sx:{fontWeight:"light",opacity:.8},children:e})]}),no=()=>{var e,t;const{lpTokenSupply:n,bLusdAmmBLusdBalance:a,bLusdAmmLusdBalance:i,protocolInfo:r}=Ct(),s=a&&i?i.div(a):Be.Decimal.ONE;return Object(E.jsxs)("details",{children:[Object(E.jsx)(d.b,{as:"summary",sx:{cursor:"pointer",mb:3,ml:2},children:"Pool details"}),Object(E.jsxs)(d.b,{sx:{mt:3},children:[Object(E.jsx)(Sn,{label:"Pool balance",children:Object(E.jsxs)(On,{sx:{alignItems:"center",justifyContent:"flex-start"},inputId:"deposit-pool-balance",children:[Object(E.jsx)(to,{symbol:"bLUSD",children:(null!==a&&void 0!==a?a:Be.Decimal.ZERO).prettify(2)}),Object(E.jsx)(d.t,{sx:{fontWeight:"light",mx:"12px"},children:"+"}),Object(E.jsx)(to,{symbol:"LUSD-3CRV",children:(null!==i&&void 0!==i?i:Be.Decimal.ZERO).prettify(2)})]})}),Object(E.jsx)(Sn,{label:"Pool balance ratio",children:Object(E.jsxs)(On,{sx:{alignItems:"center",justifyContent:"flex-start"},inputId:"deposit-pool-ratio",children:[Object(E.jsx)(to,{symbol:"bLUSD",children:"1"}),Object(E.jsx)(d.t,{sx:{fontWeight:"thin",mx:"6px"},children:":"}),Object(E.jsx)(to,{symbol:"LUSD-3CRV",children:s.prettify(2)})]})}),Object(E.jsxs)(d.h,{children:[Object(E.jsx)(Sn,{label:"LP token supply",inputId:"deposit-mint-lp-tokens",amount:(null!==n&&void 0!==n?n:Be.Decimal.ZERO).prettify(2)}),Object(E.jsx)(Sn,{label:"bLUSD price",children:Object(E.jsxs)(On,{sx:{alignItems:"center",justifyContent:"flex-start"},children:[Object(E.jsx)(to,{symbol:"LUSD",children:(null!==(e=null===r||void 0===r?void 0:r.marketPrice)&&void 0!==e?e:Be.Decimal.INFINITY).prettify(2)})," "]})}),Object(E.jsx)(Sn,{label:"bLUSD LP APR",children:Object(E.jsxs)(On,{sx:{alignItems:"center",justifyContent:"flex-start"},children:[Object(E.jsx)(to,{symbol:"%",children:(null!==(t=null===r||void 0===r?void 0:r.bLusdLpApr)&&void 0!==t?t:Be.Decimal.INFINITY).prettify(2)})," "]})})]})]})]})},ao=()=>{const{dispatchEvent:e,statuses:t,lusdBalance:n,bLusdBalance:a,isBLusdApprovedWithAmmZapper:r,isLusdApprovedWithAmmZapper:s,getExpectedLpTokens:o,addresses:u,bLusdAmmBLusdBalance:l,bLusdAmmLusdBalance:c}=Ct(),p=Object(i.useState)(),[y,b]=Object(i.useState)(Be.Decimal.ZERO),[m,f]=Object(i.useState)(Be.Decimal.ZERO),[h,v]=Object(i.useState)(Be.Decimal.ZERO),[j,T]=Object(i.useState)(!0),[x,g]=Object(i.useState)(!0),O=null!==a&&void 0!==a?a:Be.Decimal.ZERO,w=null!==n&&void 0!==n?n:Be.Decimal.ZERO,_="PENDING"===t.APPROVE_SPENDER,S="PENDING"===t.MANAGE_LIQUIDITY,k=y.gt(O),D=m.gt(w),L=k||D,A=m.gt(0),C=y.gt(0),I=A&&!s,R=C&&!r,M=I||R,P=l&&c?c.div(l):Be.Decimal.ONE,B=(e,t)=>{x&&("bLUSD"===e?f(P.mul(t)):"LUSD"===e&&b(t.div(P))),"bLUSD"===e?b(t):"LUSD"===e&&f(t)};return Object(i.useEffect)((()=>{if(y.isZero&&m.isZero)return void v(Be.Decimal.ZERO);let e=!1;const t=setTimeout((async()=>{try{const t=await o(y,m);if(e)return;v(t)}catch(t){console.error("getExpectedLpTokens() failed"),console.log(t)}}),200);return()=>{clearTimeout(t),e=!0}}),[y,m,o]),Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Ln,{label:"bLUSD amount",inputId:"deposit-blusd",amount:y.prettify(2),unit:"bLUSD",editingState:p,editedAmount:y.toString(),setEditedAmount:e=>B("bLUSD",Be.Decimal.from(e)),maxAmount:O.toString(),maxedOut:y.eq(O)}),Object(E.jsx)(Ln,{label:"LUSD amount",inputId:"deposit-lusd",amount:m.prettify(2),unit:"LUSD",editingState:p,editedAmount:m.toString(),setEditedAmount:e=>B("LUSD",Be.Decimal.from(e)),maxAmount:w.toString(),maxedOut:m.eq(w)}),Object(E.jsx)(d.h,{sx:{justifyContent:"center",mb:3},children:Object(E.jsx)(Y,{name:"arrow-down",size:"lg"})}),Object(E.jsx)(Dn,{label:"Mint LP tokens",inputId:"deposit-mint-lp-tokens",amount:h.prettify(2)}),Object(E.jsx)(d.m,{children:Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(d.e,{checked:x,onChange:()=>{x||(b(Be.Decimal.ZERO),f(Be.Decimal.ZERO)),g((e=>!e))}}),Object(E.jsx)(d.t,{sx:{fontWeight:300,fontSize:"16px"},children:"Deposit tokens in a balanced ratio"}),Object(E.jsx)(Gt,{placement:"right",size:"xs",tooltip:Object(E.jsxs)(d.d,{variant:"tooltip",children:["Tick this box to deposit bLUSD and LUSD-3CRV in the pool's current liquidity ratio. Current ratio = 1 bLUSD : ",P.prettify(2)," LUSD."]})})]})}),Object(E.jsx)(d.m,{mb:2,children:Object(E.jsxs)(d.h,{sx:{alignItems:"center"},children:[Object(E.jsx)(d.e,{checked:j,onChange:()=>{T((e=>!e))}}),Object(E.jsx)(d.t,{sx:{fontWeight:300,fontSize:"16px"},children:"Stake LP tokens in Curve gauge"}),Object(E.jsx)(Gt,{placement:"right",size:"xs",tooltip:Object(E.jsx)(d.d,{variant:"tooltip",children:"Tick this box to have your Curve LP tokens staked in the bLUSD Curve gauge. Staked LP tokens will earn protocol fees and Curve rewards."})})]})}),Object(E.jsx)(no,{}),L&&Object(E.jsxs)(Bn,{children:["Deposit exceeds your balance by"," ",k&&Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(Tn,{children:[y.sub(O).prettify(2)," bLUSD"]}),D&&Object(E.jsx)(E.Fragment,{children:" and "})]}),D&&Object(E.jsxs)(Tn,{children:[m.sub(w).prettify(2)," LUSD"]})]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:()=>{e("BACK_PRESSED")},disabled:_||S,children:"Back"}),M?Object(E.jsx)(d.c,{variant:"primary",onClick:()=>{const t=new Map;I&&t.set(Mr.LUSD,u.BLUSD_LP_ZAP_ADDRESS),R&&t.set(Mr.BLUSD,u.BLUSD_LP_ZAP_ADDRESS),e("APPROVE_PRESSED",{tokensNeedingApproval:t})},disabled:_,children:_?Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}}):Object(E.jsx)(E.Fragment,{children:"Approve"})}):Object(E.jsx)(d.c,{variant:"primary",onClick:()=>{e("CONFIRM_PRESSED",{action:"addLiquidity",bLusdAmount:y,lusdAmount:m,minLpTokens:h,shouldStakeInGauge:j})},disabled:y.isZero&&m.isZero||L||S,children:S?Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}}):Object(E.jsx)(E.Fragment,{children:"Confirm"})})]})]})},io=new Map([[Mr.BLUSD,"bLUSD"],[Mr.LUSD,"LUSD"]]),ro=({symbol:e,children:t})=>Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(d.t,{sx:{fontWeight:"medium"},children:t}),"\xa0",Object(E.jsx)(d.t,{sx:{fontWeight:"light",opacity:.8},children:e})]}),so=new Map([[Mr.BLUSD,Be.Decimal.ZERO],[Mr.LUSD,Be.Decimal.ZERO]]),oo=()=>{const{dispatchEvent:e,statuses:t,lpTokenBalance:n,getExpectedWithdrawal:a,isBLusdLpApprovedWithAmmZapper:s,stakedLpTokenBalance:o,addresses:u}=Ct(),l=Object(i.useState)(),[c,p]=Object(i.useState)(Be.Decimal.ZERO),[y,b]=Object(i.useState)("both"),[m,f]=Object(i.useState)(so),h="PENDING"===t.APPROVE_SPENDER,v=null!==n&&void 0!==n?n:Be.Decimal.ZERO,j="PENDING"===t.MANAGE_LIQUIDITY,T=c.gt(v),x=y!==Mr.BLUSD&&!s,g=e=>b((e=>{if("both"===e)return"both";const t=parseInt(e);if(t===Mr.BLUSD||t===Mr.LUSD)return t;throw new Error(`invalid output choice "${e}"`)})(e.target.value));return Object(i.useEffect)((()=>{if(c.isZero)return void f("both"===y?so:new Map([[y,Be.Decimal.ZERO]]));let e=!1;const t=setTimeout((async()=>{try{const t=await a(c,y);if(e)return;f(t)}catch(t){console.error("getExpectedWithdrawal() failed"),console.log(t)}}),200);return()=>{clearTimeout(t),e=!0}}),[c,a,y]),Object(E.jsxs)(E.Fragment,{children:[(null===o||void 0===o?void 0:o.nonZero)&&Object(E.jsxs)(ca,{children:["You ",(null===n||void 0===n?void 0:n.nonZero)&&" also "," have ",o.shorten()," staked LP tokens. Unstake them to withdraw liquidity from them."]}),Object(E.jsx)(Ln,{label:"Burn LP Tokens",inputId:"withdraw-burn-lp",amount:c.prettify(2),editingState:l,editedAmount:c.toString(),setEditedAmount:e=>p(Be.Decimal.from(e)),maxAmount:v.toString(),maxedOut:c.eq(v)}),Object(E.jsx)(d.h,{sx:{justifyContent:"center",mb:3},children:Object(E.jsx)(Y,{name:"arrow-down",size:"lg"})}),Object(E.jsxs)(d.h,{sx:{justifyContent:"center",mb:3},children:[Array.from(io.entries()).map((([e,t])=>Object(E.jsxs)(d.m,{variant:"radioLabel",children:[Object(E.jsx)(d.q,{name:"withdraw-output-choice",value:e,checked:y===e,onChange:g}),t]},e))),Object(E.jsxs)(d.m,{variant:"radioLabel",children:[Object(E.jsx)(d.q,{name:"withdraw-output-choice",value:"both",checked:"both"===y,onChange:g}),"Both"]},"both")]}),Object(E.jsx)(Dn,{label:"Withdraw",inputId:"withdraw-output-amount",children:Object(E.jsx)(kn,{sx:{justifyContent:"flex-start"},children:Array.from(m.entries()).map((([e,t],n)=>{var a;return Object(E.jsxs)(r.a.Fragment,{children:[n>0&&Object(E.jsx)(d.t,{sx:{fontWeight:"light",mx:"12px"},children:"+"}),Object(E.jsx)(ro,{symbol:null!==(a=io.get(e))&&void 0!==a?a:"",children:t.prettify(2)})]},n)}))})}),Object(E.jsx)(no,{}),T&&Object(E.jsxs)(Bn,{children:["LP Token amount exceeds your balance by"," ",Object(E.jsx)(Tn,{children:c.sub(v).prettify(2)})]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:()=>{e("BACK_PRESSED")},disabled:h||j,children:"Back"}),x&&Object(E.jsx)(d.c,{variant:"primary",onClick:()=>{const t=new Map;x&&t.set(Mr.BLUSD_LUSD_LP,u.BLUSD_LP_ZAP_ADDRESS),e("APPROVE_PRESSED",{tokensNeedingApproval:t})},disabled:c.isZero||h,children:h?Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}}):Object(E.jsx)(E.Fragment,{children:"Approve"})}),!x&&Object(E.jsx)(d.c,{variant:"primary",onClick:()=>{e("CONFIRM_PRESSED","both"===y?{action:"removeLiquidity",burnLpTokens:c,minBLusdAmount:Be.Decimal.ZERO,minLusdAmount:Be.Decimal.ZERO}:{action:"removeLiquidityOneCoin",burnLpTokens:c,output:y,minAmount:Be.Decimal.ZERO})},disabled:!0,children:j?Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}}):Object(E.jsx)(E.Fragment,{children:"Confirm"})})]})]})},uo=()=>{var e;const{dispatchEvent:t,statuses:n,lpTokenBalance:a,isBLusdLpApprovedWithGauge:r,addresses:s,protocolInfo:o}=Ct(),u=Object(i.useState)(),[l,c]=Object(i.useState)(Be.Decimal.ZERO),p="PENDING"===n.APPROVE_SPENDER,y=null!==a&&void 0!==a?a:Be.Decimal.ZERO,b="PENDING"===n.MANAGE_LIQUIDITY,m=l.gt(y);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Ln,{label:"Wallet LP Tokens",inputId:"stake-lp",amount:l.prettify(2),editingState:u,editedAmount:l.toString(),setEditedAmount:e=>c(Be.Decimal.from(e)),maxAmount:y.toString(),maxedOut:l.eq(y)}),Object(E.jsx)(d.h,{mt:3,children:Object(E.jsx)(Sn,{label:"bLUSD LP APR",children:Object(E.jsxs)(On,{sx:{alignItems:"center",justifyContent:"flex-start"},children:[Object(E.jsx)(to,{symbol:"%",children:(null!==(e=null===o||void 0===o?void 0:o.bLusdLpApr)&&void 0!==e?e:Be.Decimal.INFINITY).prettify(2)})," "]})})}),Object(E.jsx)(d.h,{my:3,sx:{fontWeight:300,fontSize:"16px"},children:"Your LP tokens will be staked in the bLUSD Curve gauge to earn protocol fees and Curve rewards."}),m&&Object(E.jsxs)(Bn,{children:["LP Token amount exceeds your balance by"," ",Object(E.jsx)(Tn,{children:l.sub(y).prettify(2)})]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:()=>{t("BACK_PRESSED")},disabled:b,children:"Back"}),!r&&Object(E.jsx)(d.c,{variant:"primary",onClick:()=>{const e=new Map;r||e.set(Mr.BLUSD_LUSD_LP,s.BLUSD_AMM_STAKING_ADDRESS),t("APPROVE_PRESSED",{tokensNeedingApproval:e})},disabled:l.isZero||p,children:p?Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}}):Object(E.jsx)(E.Fragment,{children:"Approve"})}),r&&Object(E.jsx)(d.c,{variant:"primary",onClick:()=>{t("CONFIRM_PRESSED",{action:"stakeLiquidity",stakeAmount:l})},disabled:l.isZero||m||b,children:b?Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}}):Object(E.jsx)(E.Fragment,{children:"Confirm"})})]})]})},lo=()=>{const{lpRewards:e}=Ct();return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(d.b,{as:"summary",sx:{cursor:"pointer",mt:1,mb:2,ml:3},children:"Rewards"}),Object(E.jsxs)(d.h,{children:[null===e||void 0===e?void 0:e.map((e=>Object(E.jsx)(Sn,{amount:e.amount.shorten(),label:Object(E.jsxs)(d.h,{children:[e.name,Object(E.jsx)(Gt,{placement:"right",size:"xs",tooltip:Object(E.jsxs)(d.d,{variant:"tooltip",children:["Reward token address: ",e.address]})})]})}))),(void 0===e||0===(null===e||void 0===e?void 0:e.length))&&Object(E.jsx)(d.h,{children:"You have no pending rewards"})]})]})},co=()=>{var e;const{dispatchEvent:t,statuses:n,stakedLpTokenBalance:a,protocolInfo:r}=Ct(),s=Object(i.useState)(),[o,u]=Object(i.useState)(Be.Decimal.ZERO),l=null!==a&&void 0!==a?a:Be.Decimal.ZERO,c="PENDING"===n.MANAGE_LIQUIDITY,p=o.gt(l);return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(Ln,{label:"Staked LP Tokens",inputId:"unstake-lp",amount:o.prettify(2),editingState:s,editedAmount:o.toString(),setEditedAmount:e=>u(Be.Decimal.from(e)),maxAmount:l.toString(),maxedOut:o.eq(l)}),Object(E.jsx)(lo,{}),Object(E.jsx)(Sn,{label:"bLUSD LP APR",children:Object(E.jsxs)(On,{sx:{alignItems:"center",justifyContent:"flex-start"},children:[Object(E.jsx)(to,{symbol:"%",children:(null!==(e=null===r||void 0===r?void 0:r.bLusdLpApr)&&void 0!==e?e:Be.Decimal.INFINITY).prettify(2)})," "]})}),Object(E.jsx)(d.h,{mb:3,sx:{fontWeight:300,fontSize:"16px"},children:"Your staked LP tokens will be unstaked from the bLUSD Curve gauge and moved into your wallet. Pending rewards will also be claimed and moved into your wallet."}),p&&Object(E.jsxs)(Bn,{children:["LP Token amount exceeds your balance by"," ",Object(E.jsx)(Tn,{children:o.sub(l).prettify(2)})]}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:()=>{t("BACK_PRESSED")},disabled:c,children:"Back"}),Object(E.jsx)(d.c,{variant:"primary",onClick:()=>{t("CONFIRM_PRESSED",{action:"unstakeLiquidity",unstakeAmount:o})},disabled:o.isZero||p||c,children:c?Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}}):Object(E.jsx)(E.Fragment,{children:"Confirm"})})]})]})},po=()=>{var e;const{dispatchEvent:t,statuses:n,lpRewards:a,protocolInfo:i}=Ct(),r="PENDING"===n.MANAGE_LIQUIDITY,s=void 0!==(null===a||void 0===a?void 0:a.find((e=>e.amount.gt(0))));return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(lo,{}),Object(E.jsx)(Sn,{label:"bLUSD LP APR",children:Object(E.jsxs)(On,{sx:{alignItems:"center",justifyContent:"flex-start"},children:[Object(E.jsx)(to,{symbol:"%",children:(null!==(e=null===i||void 0===i?void 0:i.bLusdLpApr)&&void 0!==e?e:Be.Decimal.INFINITY).prettify(2)})," "]})}),Object(E.jsxs)(d.h,{variant:"layout.actions",children:[Object(E.jsx)(d.c,{variant:"cancel",onClick:()=>{t("BACK_PRESSED")},disabled:r,children:"Back"}),Object(E.jsx)(d.c,{variant:"primary",onClick:()=>{t("CONFIRM_PRESSED",{action:"claimLpRewards"})},disabled:!s,children:r?Object(E.jsx)(d.s,{size:"28px",sx:{color:"white"}}):Object(E.jsx)(E.Fragment,{children:"Claim all rewards"})})]})]})},yo=({active:e,children:t,...n})=>Object(E.jsx)(d.o,{...n,sx:{cursor:"pointer",...e?{color:"primary"}:{}},children:t}),bo=()=>{const{dispatchEvent:e}=Ct(),[t,n]=Object(i.useState)("deposit"),a=()=>{e("ABORT_PRESSED")};return Object(E.jsxs)(Wr,{onDismiss:a,children:[Object(E.jsxs)(d.j,{as:"h2",sx:{pt:2,pb:3,px:2},children:[Object(E.jsx)(d.h,{sx:{justifyContent:"center"},children:"Manage liquidity"}),Object(E.jsx)(d.f,{onClick:a,sx:{position:"absolute",right:"24px",top:"24px"}})]}),Object(E.jsxs)(d.h,{as:"nav",sx:{mb:3},children:[Object(E.jsx)(yo,{active:"deposit"===t,onClick:()=>n("deposit"),children:"Deposit"}),Object(E.jsx)(yo,{active:"withdraw"===t,onClick:()=>n("withdraw"),children:"Withdraw"}),Object(E.jsx)(yo,{active:"stake"===t,onClick:()=>n("stake"),children:"Stake"}),Object(E.jsx)(yo,{active:"unstake"===t,onClick:()=>n("unstake"),children:"Unstake"}),Object(E.jsx)(yo,{active:"claim"===t,onClick:()=>n("claim"),children:"Rewards"})]}),"deposit"===t&&Object(E.jsx)(ao,{}),"withdraw"===t&&Object(E.jsx)(oo,{}),"stake"===t&&Object(E.jsx)(uo,{}),"unstake"===t&&Object(E.jsx)(co,{}),"claim"===t&&Object(E.jsx)(po,{})]})},mo=()=>{const{view:e,hasFoundContracts:t}=Ct();if(!t)return Object(E.jsx)(d.g,{sx:{position:"absolute",left:"30%",top:"40%"},children:Object(E.jsx)(sa,{title:"Unsupported network",children:"LUSD Bonds don't seem to be deployed to this network."})});let n=null;switch(e){case"CANCELLING":case"CLAIMING":n=Object(E.jsx)(rs,{});break;case"CREATING":n=Object(E.jsx)(Vs,{});break;case"SWAPPING":n=Object(E.jsx)(eo,{});break;case"MANAGING_LIQUIDITY":n=Object(E.jsx)(bo,{})}return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsx)(qr,{}),n]})};var fo={IDLE:"idle",PENDING:"waitingForConfirmation",FAILED:"failed",CONFIRMED:"confirmed"},ho=function(){var e=Ct().statuses,t=Object.keys(e).find((function(t){return"IDLE"!==e[t]})),n=t?fo[e[t]]:null;return Object(E.jsxs)(E.Fragment,{children:[Object(E.jsxs)(d.g,{variant:"columns",sx:{justifyContent:"flex-start"},children:[Object(E.jsx)(d.g,{variant:"left",sx:{width:["100%","70%"]},children:Object(E.jsx)(mo,{})}),Object(E.jsx)(d.g,{variant:"right",sx:{width:["100%","30%"]},children:Object(E.jsx)(dr,{})})]}),n&&Object(E.jsx)(le,{state:n,style:{zIndex:9999999999}})]})},vo={NONE:{OPEN_TROVE_PRESSED:"OPENING",TROVE_OPENED:"ACTIVE"},LIQUIDATED:{OPEN_TROVE_PRESSED:"OPENING",TROVE_SURPLUS_COLLATERAL_CLAIMED:"NONE",TROVE_OPENED:"ACTIVE"},REDEEMED:{OPEN_TROVE_PRESSED:"OPENING",TROVE_SURPLUS_COLLATERAL_CLAIMED:"NONE",TROVE_OPENED:"ACTIVE"},OPENING:{CANCEL_ADJUST_TROVE_PRESSED:"NONE",TROVE_OPENED:"ACTIVE"},ADJUSTING:{CANCEL_ADJUST_TROVE_PRESSED:"ACTIVE",TROVE_ADJUSTED:"ACTIVE",TROVE_CLOSED:"NONE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"},CLOSING:{CANCEL_ADJUST_TROVE_PRESSED:"ACTIVE",TROVE_CLOSED:"NONE",TROVE_ADJUSTED:"ACTIVE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"},ACTIVE:{ADJUST_TROVE_PRESSED:"ADJUSTING",CLOSE_TROVE_PRESSED:"CLOSING",TROVE_CLOSED:"NONE",TROVE_LIQUIDATED:"LIQUIDATED",TROVE_REDEEMED:"REDEEMED"}},jo={open:"TROVE_OPENED",closedByOwner:"TROVE_CLOSED",closedByLiquidation:"TROVE_LIQUIDATED",closedByRedemption:"TROVE_REDEEMED"},To=function(e){return e.trove.status},xo=function(e){var t=e.children,n=Object(Ue.useLiquitySelector)(To),a=Object(i.useState)(function(e){return"closedByLiquidation"===e?"LIQUIDATED":"closedByRedemption"===e?"REDEEMED":"open"===e?"ACTIVE":"NONE"}(n)),r=Object(m.a)(a,2),s=r[0],o=r[1],u=Object(i.useRef)(s),l=Object(i.useCallback)((function(e){var t=function(e,t){var n;return null!==(n=vo[e][t])&&void 0!==n?n:e}(u.current,e);console.log("dispatchEvent() [current-view, event, next-view]",u.current,e,t),o(t)}),[]);Object(i.useEffect)((function(){u.current=s}),[s]),Object(i.useEffect)((function(){var e,t=null!==(e=jo[n])&&void 0!==e?e:null;null!==t&&l(t)}),[n,l]);var c={view:s,dispatchEvent:l};return Object(E.jsx)(Mn.Provider,{value:c,children:t})},go={NONE:{DEPOSIT_PRESSED:"DEPOSITING"},DEPOSITING:{CANCEL_PRESSED:"NONE",DEPOSIT_CONFIRMED:"ACTIVE"},ACTIVE:{REWARDS_CLAIMED:"ACTIVE",ADJUST_DEPOSIT_PRESSED:"ADJUSTING",DEPOSIT_EMPTIED:"NONE"},ADJUSTING:{CANCEL_PRESSED:"ACTIVE",DEPOSIT_CONFIRMED:"ACTIVE",DEPOSIT_EMPTIED:"NONE"}},Oo=function(e){return e.stabilityDeposit},wo=function(e){var t=e.children,n=Object(Ue.useLiquitySelector)(Oo),a=Object(i.useState)(function(e){return e.isEmpty?"NONE":"ACTIVE"}(n)),r=Object(m.a)(a,2),s=r[0],o=r[1],u=Object(i.useRef)(s),l=Object(i.useCallback)((function(e){var t=function(e,t){var n;return null!==(n=go[e][t])&&void 0!==n?n:e}(u.current,e);console.log("dispatchEvent() [current-view, event, next-view]",u.current,e,t),o(t)}),[]);Object(i.useEffect)((function(){u.current=s}),[s]),Object(i.useEffect)((function(){n.isEmpty&&l("DEPOSIT_EMPTIED")}),[n.isEmpty,l]);var c={view:s,dispatchEvent:l};return Object(E.jsx)(Ca.Provider,{value:c,children:t})},_o=function(e){return{lqtyStake:e.lqtyStake,changePending:!1,adjusting:!1}},So=function(e,t){switch(t.type){case"startAdjusting":return Object(x.a)(Object(x.a)({},e),{},{adjusting:!0});case"cancelAdjusting":return Object(x.a)(Object(x.a)({},e),{},{adjusting:!1});case"startChange":return Object(x.a)(Object(x.a)({},e),{},{changePending:!0});case"abortChange":return Object(x.a)(Object(x.a)({},e),{},{changePending:!1});case"updateStore":var n=t.oldState.lqtyStake,a=t.stateChange.lqtyStake;if(a){var i=!a.stakedLQTY.eq(n.stakedLQTY)||a.collateralGain.lt(n.collateralGain)||a.lusdGain.lt(n.lusdGain);return Object(x.a)(Object(x.a)({},e),{},{lqtyStake:a,adjusting:!1,changePending:!i&&e.changePending})}}return e},ko=function(e){var t=e.children,n=ye("stake"),a=Object(Ue.useLiquityReducer)(So,_o),r=Object(m.a)(a,2),s=r[0],o=s.adjusting,u=s.changePending,l=s.lqtyStake,c=r[1];return Object(i.useEffect)((function(){"waitingForApproval"===n.type||"waitingForConfirmation"===n.type?c({type:"startChange"}):"failed"!==n.type&&"cancelled"!==n.type||c({type:"abortChange"})}),[n.type,c]),Object(E.jsx)(li.Provider,{value:{view:o?"ADJUSTING":l.isEmpty?"NONE":"ACTIVE",changePending:u,dispatch:c},children:t})},Do=(n(627),function(e){var t=e.children;return Object(E.jsx)(Ft,{children:Object(E.jsx)(Qs,{children:t})})}),Lo=function(e){var t=e.loader,n=R(),a=n.account,i=n.provider,r=n.liquity;return Object.assign(window,{account:a,provider:i,liquity:r,Trove:Be.Trove,Decimal:Be.Decimal,Difference:Be.Difference,Wallet:Pe.Wallet}),Object(E.jsxs)(Ue.LiquityStoreProvider,{loader:t,store:r.store,children:[Object(E.jsx)(Re.a,{children:Object(E.jsx)(xo,{children:Object(E.jsx)(wo,{children:Object(E.jsx)(ko,{children:Object(E.jsx)(Do,{children:Object(E.jsxs)(d.h,{sx:{flexDirection:"column",minHeight:"100%"},children:[Object(E.jsxs)(vn,{children:[Object(E.jsx)(Yt,{}),Object(E.jsx)(cn,{})]}),Object(E.jsx)(d.g,{variant:"main",sx:{display:"flex",flexGrow:1,flexDirection:"column",alignItems:"center"},children:Object(E.jsxs)(Me.d,{children:[Object(E.jsx)(Me.b,{path:"/",exact:!0,children:Object(E.jsx)(Qi,{})}),Object(E.jsx)(Me.b,{path:"/bonds",children:Object(E.jsx)(ho,{})}),Object(E.jsx)(Me.b,{path:"/risky-troves",children:Object(E.jsx)(er,{})})]})})]})})})})})}),Object(E.jsx)(fe,{})]})},Eo=function(){return Object(E.jsxs)(d.h,{sx:{alignItems:"center",justifyContent:"center",height:"100vh"},children:[Object(E.jsx)(d.s,{sx:{m:2,color:"text"},size:"32px"}),Object(E.jsx)(d.j,{children:"Loading..."})]})};if(window.ethereum&&Object.assign(window.ethereum,{autoRefreshOnNetworkChange:!1}),"true"===Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"edb8cb9cfb41b24a324145e91e5103989a990866"}).REACT_APP_DEMO_MODE){var Ao=new Ie.a(Object({NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_VERSION:"edb8cb9cfb41b24a324145e91e5103989a990866"}).REACT_APP_RPC_URL||"http://".concat(window.location.hostname,":8545"),"0x4d5db4107d237df6a3d58ee5f70ae63d73d7658d4026f2eefd2f204c81682cb7");Object.assign(window,{ethereum:Ao})}L().then((function(e){Object.assign(window,{config:e})}));var Co=function(e){var t=e.children;return Object(E.jsx)(c.a,{getLibrary:function(e){return new y.BatchedWebSocketAugmentedWeb3Provider(e)},children:t})},Io=function(){return Object(E.jsxs)(d.h,{sx:{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",textAlign:"center"},children:[Object(E.jsxs)(d.j,{sx:{mb:3},children:[Object(E.jsx)(Y,{name:"exclamation-triangle"})," This app is for testing purposes only."]}),Object(E.jsx)(d.p,{sx:{mb:3},children:"Please change your network to Ropsten, Rinkeby, Kovan, G\xf6rli or Kiln."}),Object(E.jsxs)(d.p,{children:["If you'd like to use the Liquity Protocol on mainnet, please pick a frontend"," ",Object(E.jsxs)(d.n,{href:"https://www.liquity.org/frontend",children:["here ",Object(E.jsx)(Y,{name:"external-link-alt",size:"xs"})]}),"."]})]})},Ro=function(){return Object(E.jsx)(Co,{children:Object(E.jsx)(p.a,{theme:Ce,children:Object(E.jsx)(K,{loader:Object(E.jsx)(Eo,{}),children:Object(E.jsx)(I,{loader:Object(E.jsx)(Eo,{}),unsupportedNetworkFallback:function(e){return Object(E.jsxs)(d.h,{sx:{flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100vh",textAlign:"center"},children:[Object(E.jsxs)(d.j,{sx:{mb:3},children:[Object(E.jsx)(Y,{name:"exclamation-triangle"})," Liquity is not yet deployed to"," ",1===e?"mainnet":"this network","."]}),"Please switch to Ropsten, Rinkeby, Kovan, G\xf6rli or Kiln."]})},unsupportedMainnetFallback:Object(E.jsx)(Io,{}),children:Object(E.jsx)(de,{children:Object(E.jsx)(Lo,{loader:Object(E.jsx)(Eo,{})})})})})})})};l.a.setAppElement("#root"),o.a.render(Object(E.jsx)(r.a.StrictMode,{children:Object(E.jsx)(Ro,{})}),document.getElementById("root"))}},[[628,1,2]]]);
//# sourceMappingURL=main.461e7f62.chunk.js.map